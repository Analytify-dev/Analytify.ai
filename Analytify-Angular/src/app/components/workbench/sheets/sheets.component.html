<div class="main-container container-fluid mt-5"> 
    <div class="row" style="position: fixed; width: -webkit-fill-available; padding-right: 25px; padding-left: 9px;">
        <div class="col-xxl-2 col-xl-2 col-lg-3 col-md-3 p-1 mt-3">
            <div class="card mb-0 border rounded-3 p-1" >
                <div class="card-body p-0 ">
                    <div class=" mb-0 p-2 br-0 border-bottom">
                        <div class="d-flex align-items-center justify-content-between ">
                            <h6 class="mb-0">Connections</h6>
                            <app-insights-button *ngIf="qrySetId" [buttonName]="'Edit'" [classesList]="'add-txt text-info'" [previledgeId]="2" [isBtn]="false"
                            (btnClickEvent)="goToDataSource()" [isIcon]="false"></app-insights-button>
                            <app-insights-button *ngIf="!qrySetId" [buttonName]="'Add'" [classesList]="'add-txt text-info'" [isIcon]="false" [previledgeId]="1" [isBtn]="false"
                            (btnClickEvent)="goToConnections()"></app-insights-button>
                        </div>
                        </div>
                        <div class=" mb-0 p-2 br-0 ">
                            <h6 class="mb-0">Database</h6>
                            <p class=" mb-0" ngbTooltip="{{database_name}}">{{database_name}}</p> 
                        </div>
                </div>
                <div class="card-body p-1">
                    <div class="input-group justify-content-between">
                    <h6 class="fw-600  mb-0 p-1">Tables</h6>

                    <div class="dashboard-option">
                        <div class=" p-1" ngbDropdown [autoClose]="false" #level1="ngbDropdown">
                            <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                aria-haspopup="true" aria-expanded="false" class="" ><i
                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                            </a>
                            <div class="dropdown-menu" ngbDropdownMenu>
                                <div class=" p-1" ngbDropdown [autoClose]="false" #level2="ngbDropdown">
                                <a class="dropdown-item" ngbDropdownToggle href="javascript:void(0);" (click)="addCalculatedField();" > {{isEditCalculatedField ? "Edit Calculated Field" : "Add Calculated Field"}} </a>
                                <div class="dropdown-menu Semantic-layer-card" ngbDropdownMenu>
                                    <!-- <div class="col-lg-12 col-md-10 col-sm-10 col-xl-10 p-0"> -->
                                        <div cdkDropList cdkDropListOrientation="horizontal" class="form-control" 
                                        style="position: relative;min-height: 100px; padding: 2px;" 
                                    #calculatedfields="cdkDropList" 
                                      
                                        (cdkDropListDropped)="calculatedFieldsDrop($event)">
                                            
                                            <div style="max-height: 382px; overflow: auto; padding: 10px;">
                                                <div class="col-lg-12 col-md-12 p-0 m-0">
                                                        <div class="form-group p-0 mb-0">
                                                            <label class="form-label mb-2">Calculated Field Name <span class="text-red">*</span></label>
                                                            <div class="d-flex">
                                                                <div class="col-6 p-0">
                                                                    <input type="text" placeholder="Enter Field Name" [(ngModel)]="calculatedFieldName"
                                                                    class="mb-2 form-control checkbox-color">
                                                                    <div class="input-group mb-2">
                                                                        <div class="col-lg-6 col-md-6 p-0">
                                                                            <select class="form-select form-select select2 fs-14" [(ngModel)]="calculatedFieldFunction"
                                                                                (change)="calculatedFieldData()">
                                                                                <option value="number">Number</option>
                                                                                <option value="string">String</option>
                                                                                <option value="arithematic">Arithmetic operation</option>
                                                                                <option value="date">Date</option>
                                                                                <option value="logical">Logical</option>
                                                                                <option value="aggregation">Aggregate</option>
                                                                            </select>
                                                                        </div>
                                                                        <div *ngIf="calculatedFieldFunction === 'logical' || calculatedFieldFunction === 'number' || calculatedFieldFunction === 'string' || calculatedFieldFunction === 'date' || calculatedFieldFunction === 'aggregation'" class="col-lg-6 col-md-6 p-0">
                                                                            <select class="form-select form-select select2 fs-14" [(ngModel)]="nestedCalculatedFieldData"
                                                                                (change)="nestedCalculatedFieldFunction()">
                                                                                <option [disabled]="true" value="">select function</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="abs">ABS</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="ceiling">CEILING</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="floor">FLOOR</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="round">ROUND</option>

                                                                                <option *ngIf="calculatedFieldFunction === 'logical'" value="ifnull">IF NULL</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'logical'" value="case">CASE</option>
                                                    
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="average">AVG</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="count">COUNT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="countd">COUNTD</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="max">MAX</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="min">MIN</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="sum">SUM</option>
                                                    
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="left">LEFT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="right">RIGHT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="mid">MID</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="length">LENGTH</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="trim">TRIM</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="upper">UPPER</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="lower">LOWER</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="replace">REPLACE</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="split">SPLIT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="find">FIND</option>
                                                    
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="dateadd">DATEADD</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="datediff">DATEDIFF</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="datepart">DATEPART</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="now">NOW</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="today">TODAY</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="parse">PARSE</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <textarea [readonly]="nestedCalculatedFieldData == 'now' || nestedCalculatedFieldData == 'today'"
                                                                        *ngIf="((calculatedFieldFunction == 'aggregation' || calculatedFieldFunction == 'logical' || calculatedFieldFunction == 'date' || calculatedFieldFunction == 'string' || calculatedFieldFunction == 'number') &&  nestedCalculatedFieldData) || calculatedFieldFunction == 'arithematic'"
                                                                        class="query-text mb-2 px-3" [(ngModel)]="calculatedFieldLogic"
                                                                        placeholder="Drop Column or Enter Logic"></textarea>
                                                                    <div *ngIf="validationMessage" class="alert"
                                                                        [ngClass]="{'alert-success': isValidCalculatedField, 'alert-danger': !isValidCalculatedField}">
                                                                        {{ validationMessage }}
                                                                    </div>
                                                                </div>
                                                                <div class="col-6 p-0" style="margin-left: 8px;">
                                                                        <p class="mb-0  p-2 bg-light mb-3 border rounded-2 description-text" >
                                                                            @if(nestedCalculatedFieldData == 'abs'){
                                                                                <span > <p class="fw-600 mb-0">ABS(number) :<br> </p> Returns the absolute value.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> ABS("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  ABS(-2) = 2 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'ceiling'){
                                                                                <span > <p class="fw-600 mb-0">CEILING(number) :<br> </p> Rounds up to the nearest integer.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> CEILING("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  CEILING(2.63) = 3 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'floor'){
                                                                                <span > <p class="fw-600 mb-0">FLOOR(number) :<br> </p> Rounds down to the nearest integer.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> FLOOR("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  FLOOR(2.65) = 2 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'round'){
                                                                                <span > <p class="fw-600 mb-0">ROUND(number, [decimals]) :<br> </p> Rounds to a specified number of decimals.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> ROUND("tablename"."column_name", [decimals])</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  ROUND(2.65,1) = 2.6 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'ifnull'){
                                                                                <span > <p class="fw-600 mb-0">IFNULL(expression1, expression2) :<br> </p> Returns the first non-null expression.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> COALESCE("tablename"."column_name", 0)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  COALESCE("finance"."Amount", 0) </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'case'){
                                                                                <span > <p class="fw-600 mb-0">CASE :<br> </p> executes conditional logical expression.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> CASE expression WHEN value THEN result ELSE default END</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  case  when "finance"."Amount" > 0 then 1 else 0 end </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'average'){
                                                                                <span > <p class="fw-600 mb-0">AVG(expression) :<br> </p> Returns the average.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> AVG("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  AVG("finance"."Amount") </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'countd'){
                                                                                <span > <p class="fw-600 mb-0">COUNTD(string) :<br> </p> Counts distinct values.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> COUNT( DISTINCT "tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  COUNT(DISTINCT "finance"."Name") </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'max'){
                                                                                <span > <p class="fw-600 mb-0">MAX(expression) :<br> </p> Returns the maximum value.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> MAX("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  MAX("finance"."Amount")  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'min'){
                                                                                <span > <p class="fw-600 mb-0">MIN(expression) :<br> </p> Returns the minimum value.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> MIN("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  MIN("finance"."Amount")  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'sum'){
                                                                                <span > <p class="fw-600 mb-0">SUM(expression) :<br> </p> Returns the total sum.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> SUM("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  SUM("finance"."Amount")  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'left'){
                                                                                <span > <p class="fw-600 mb-0">LEFT(string, number) :<br> </p> Returns the specified number of characters from left part of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LEFT("Tablename"."column_name", number)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  Left('Electronics',3)=Ele </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'right'){
                                                                                <span > <p class="fw-600 mb-0">RIGHT(string, number) :<br> </p> Returns the specified number of characters from right part of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LEFT("Tablename"."column_name", number)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  Left('Electronics',3)=ics </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'mid'){
                                                                                <span > <p class="fw-600 mb-0">substring(string, [from int], [for int]) :<br> </p> Extracts part of a string by giving starting position and the length of the string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> substring("Tablename"."column_name" from [int] for [int])</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  substring('electronics' from 1 for 3)=ele </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'length'){
                                                                                <span > <p class="fw-600 mb-0">LENGTH(string) :<br> </p> Returns the length of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LENGTH("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  Length('electronics') = 12 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'trim'){
                                                                                <span > <p class="fw-600 mb-0">TRIM(string) :<br> </p> Removes spaces at the beginning and end of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> TRIM("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  TRIM('   electronics   ') = 'electronics' </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'upper'){
                                                                                <span > <p class="fw-600 mb-0">UPPER(number) :<br> </p>  Converts a string to uppercase.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> UPPER("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  UPPER('electronics') = ELECTRONICS </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'lower'){
                                                                                <span > <p class="fw-600 mb-0">LOWER(number) :<br> </p>  Converts a string to lowercase.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LOWER("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  LOWER('ELECTRONICS') = electronics </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'replace'){
                                                                                <span > <p class="fw-600 mb-0">REPLACE(string, substring, replacement) :<br> </p> Replaces occurrences of substring with replacement.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> REPLACE("tablename"."column_name", substring, replacement)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  REPLACE('I will do it', 'will do', 'did') = I did it </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'split'){
                                                                                <span > <p class="fw-600 mb-0">split_part(string text, delimiter text, field int) :<br> </p> Splits a given string at a specified character and returns the requested part.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> split_part("Tablename"."column_name", '$',[int])</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  split_part('I will$do it', '$',2) = do it </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'find'){
                                                                                <span > <p class="fw-600 mb-0">position(substring in string) :<br> </p> Returns the position of the first occurrence of substring.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> POSITION([string] in "tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p> POSITION('ctr' IN 'electronics') = 4 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'dateadd'){
                                                                                <span > <p class="fw-600 mb-0">DATEADD (date_field + interval date) :<br> </p> Adds a time interval to a date.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> "tablename"."columnname" + INTERVAL '[int] days' (days/months/years) </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  current_date + INTERVAL '5 days'(days/months/years)  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'datediff'){
                                                                                <span > <p class="fw-600 mb-0">ABS(number) :<br> </p> Returns the difference between two dates.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> "tablename"."column_name" - "tablename"."column_name"</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  CURRENT_DATE - '2024-10-03' </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'datepart'){
                                                                                <span > <p class="fw-600 mb-0">DATEPART(date_part, date) :<br> </p> Returns a part of the date (year, month, day, etc.).</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> DATE_PART('year', "tablename"."column_name")/DATE_PART('month', "tablename"."column_name")/DATE_PART('date', "tablename"."column_name")
                                                                                    </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  DATE_PART('year', current_timestamp)/DATE_PART('month', current_timestamp)/DATE_PART('date', current_timestamp)
                                                                                 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'now'){
                                                                                <span > <p class="fw-600 mb-0">Current_timestamp :<br> </p> Returns the current date and time.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> current_timestamp()</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p> current_timestamp() </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'today'){
                                                                                <span > <p class="fw-600 mb-0">Current_date :<br> </p> Returns the current date without the time.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> CURRENT_DATE </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p> CURRENT_DATE </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'parse'){
                                                                                <span > <p class="fw-600 mb-0">dateparse :<br> </p> converts string to date in specific format .</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> TO_CHAR(Tablename.column_name, 'dd-mm-yyyy') </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  TO_CHAR('2024-12-02', 'dd-mm-yyyy') </span>
                                                                            }
                                                                            @if(calculatedFieldFunction == 'arithematic'){
                                                                                <span > <p class="fw-600 mb-0">expression :<br> </p> evaluate the basic mathematical calculations.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> "tablename"."column_name" + "tablename"."column_name"</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example : 2 + 2 = 4<br> </p>   </span>
                                                                            }
                                                                </div>
                                                            </div>
                                                        </div>
                                            
                                                        <div class="mt-0 d-flex gap-2">
                                                            <button
                                                                [disabled]="!(calculatedFieldLogic  && calculatedFieldName && (calculatedFieldLogic.length > 0 || calculatedFieldName.length > 0))"
                                                                class="btn btn-primary mt-0" (click)="applyCalculatedFields(level2,level1);">Apply </button>
                                                            <button class="btn btn-primary mt-0"
                                                                (click)="isEditCalculatedField = false;level1.close();level2.close()">Close </button>
                                                        </div>
                                                </div>
                                            </div>
                                        </div>             
                                        
                                    <!-- </div> -->
                                    <!-- <button class="dropdown-item filtersBtnWidth" ngbDropdownItem  (click)="test(calculatedfield)"> Create Calculated Field </button> -->
                                   <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                    <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                </div>
                                </div>
                               <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                            </div>
                        </div>
                      </div>
                        
                      
                      </div>
                    <div class="input-group">
                        <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="tableSearch"
                            (keyup.enter)="columnsData()" aria-describedby="button-addon2">
                        <button class="btn btn-primary border" (click)="columnsData()" type="button" id="button-addon2"
                            style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                    </div>
                    <div class="sheet-table-h mt-1">
                        @for(columns of tableColumnsData; track columns){
                            @if(!columns.calculated_fields){
                            <div  class="menu-item mb-1">
                                
                            
                            <div class="menu-title" class="example-box bg-light border w-100" style=" font-weight: 700;" (click)="toggleSubMenu(columns)">
                                <span class="arrow"> <i *ngIf="!columns.expanded" class="fa fa-chevron-down"></i> <i *ngIf="columns.expanded" class="fa fa-chevron-up"></i>
                                    {{columns.table_alias}} </span>

                              </div>
                              
                              @if(columns.expanded){
                            <div  cdkDropList 
                            #originList="cdkDropList"
                            [cdkDropListData]="columns.dimensions"
                            [cdkDropListConnectedTo]="[calculatedfields,columnList,rowList,drilldownList]"
                            (cdkDropListDropped)="columndrop($event)"
                            [cdkDropListDisabled]="canDrop" [ngClass]="{'drag-disabled': canDrop}">
                            
                           @for(dimensions of columns.dimensions; track dimensions){
                               <div class="d-flex justify-content-between border border-bottom">
                                <li class="example-box" ngbTooltip="{{dimensions.column}}"
                                (cdkDragStarted)="tableNameMethod(columns.schema,columns.table_name,columns.table_alias)" cdkDrag [cdkDragDisabled]="canDrop" >
                                <span *ngIf="!dateList.includes(dimensions.data_type) && !boolList.includes(dimensions.data_type)" class="abc-txt">abc</span>
                                <span *ngIf="dateList.includes(dimensions.data_type)" class="date-dtype"><i class="fa fa-clock-o"></i></span>
                                <span *ngIf="boolList.includes(dimensions.data_type)" class="date-dtype" style="font-family: 'Times New Roman', Times, serif; font-style: italic;">T|F</span>
                                {{ dimensions.column?.substr(0,15) }}{{ dimensions.column.length > 15 ? '...' : '' }}
                                </li>
                                <div class="dashboard-option">
                                    <div class=" p-1" ngbDropdown>
                                        <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                            aria-haspopup="true" aria-expanded="false" class="" (click)="editFilterCheck(dimensions.column)"><i
                                                class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                        </a>
                                        <div class="dropdown-menu filtersDropDown" ngbDropdownMenu>
                                            <button *ngIf="!filterAdded" class="dropdown-item filtersBtnWidth" ngbDropdownItem  (click)="formatExtractType = ''; filterSearch = ''; activeTabId = 1; openSuperScaled(content,dimensions)"> Apply Filters </button>
                                            <a *ngIf="filterAdded" class="dropdown-item" ngbDropdownItem  (click)="formatExtractType = ''; editFilterSearch = ''; openSuperScalededitFilter(contentedit,dimensions)"> Edit Filters </a>
                                           <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                            <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                        </div>
                                    </div>
                                  </div>
                               </div>
                            }
                        </div>
                            <div cdkDropList
                            #originList="cdkDropList"
                            [cdkDropListData]="columns.measures"
                            [cdkDropListConnectedTo]="[calculatedfields,columnList,drilldownList]"
                            (cdkDropListDropped)="rowdrop($event)"
                            [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">
                            
                            @for(measures of columns.measures; track measures){ 
                                <div class="example-box1 border m-0 ps-3 pe-0" ngbTooltip="{{measures.column}}" (cdkDragStarted)="tableNameMethod(columns.schema,columns.table_name,columns.table_alias)" cdkDrag [cdkDragDisabled]="canDrop" ># 
                                    {{ measures.column?.substr(0,18) }}{{ measures.column.length > 18 ? '...' : '' }}
                                    <div class="dashboard-option">
                                        <div class=" p-1" ngbDropdown>
                                            <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                aria-haspopup="true" aria-expanded="false" class="" (click)="editFilterCheck(measures.column)"><i
                                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                            </a>
                                            <div class="dropdown-menu" ngbDropdownMenu>
                                                <a *ngIf="!filterAdded" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="formatExtractType = ''; filterSearch = ''; activeTabId = 1; openSuperScaled(content,measures)"> Apply Filters </a>
                                                <a *ngIf="filterAdded" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="formatExtractType = ''; editFilterSearch = ''; openSuperScalededitFilter(contentedit,measures)"> Edit Filters </a>
                                               <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                                <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                            </div>
                                        </div>
                                      </div>
                                </div>
                            }
                            </div>
                      }
                            </div>
                        } @else if(columns.calculated_fields?.length){
                            <div  class="menu-item mb-1">
                                
                            
                                <div class="menu-title" class="example-box border w-100" style=" font-weight: 700;" (click)="toggleSubMenu(columns)">
                                    <span class="arrow"> <i *ngIf="!columns.expanded" class="fa fa-chevron-down"></i> <i *ngIf="columns.expanded" class="fa fa-chevron-up"></i>
                                        Calculated Fields </span>
    
                                  </div>
                                  <div cdkDropList
                                  #originList="cdkDropList"
                                  [cdkDropListData]="columns.calculated_fields"
                                  [cdkDropListConnectedTo]="[calculatedfields,columnList,rowList,drilldownList]"
                                  (cdkDropListDropped)="rowdrop($event)"
                                  [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">  
                                  @if(columns.expanded){    
                                                            
                                @for(measures of columns.calculated_fields; track measures){ 
                                    <div class="example-box1 border m-0 ps-3 pe-0" ngbTooltip="{{measures.field_name}}" (cdkDragStarted)="tableNameMethod(columns.schema,columns.table_name,columns.table_alias)" cdkDrag [cdkDragDisabled]="canDrop" ># 

                                    <!-- <div class="example-box1 border m-0 ps-3 pe-0" ngbTooltip="{{measures.field_name}}" >#  -->
                                        {{ measures.field_name?.substr(0,18) }}{{ measures.field_name.length > 18 ? '...' : '' }}
                                        <div class="dashboard-option">
                                            <div class=" p-1" ngbDropdown>
                                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                aria-haspopup="true" aria-expanded="false" class="" (click)="editFilterCheck(measures.field_name)"><i
                                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                            </a>
                                                <div class="dropdown-menu" ngbDropdownMenu>
                                                    <button *ngIf="!filterAdded" class="dropdown-item" ngbDropdownItem  (click)="formatExtractType = ''; filterSearch = ''; activeTabId = 1; openSuperScaled(content,measures)"> Apply Filters </button>
                                                    <a *ngIf="filterAdded" class="dropdown-item" ngbDropdownItem  (click)="formatExtractType = ''; editFilterSearch = ''; openSuperScalededitFilter(contentedit,measures)"> Edit Filters </a>
                                                    <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="level1.open();isEditCalculatedField = true;fetchCalculatedFields(measures.id);level2.open();"> Edit Calculated Field </a>
                                                    <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="deleteCalculationField(measures.id)"> Delete </a>
                                                   <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                                    <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                                </div>
                                            </div>
                                          </div>
                                    <!-- </div> -->
                                    </div>
                                }
                                
                          }
                        </div>
                                </div>
                        }
                        }
                      </div>
                      <ng-template #content let-modal>
                        <div class="modal-header">
                          <h6 class="modal-title">Filters</h6>
                          <button type="button"class="btn-close"aria-label="Close"(click)="isAllSelected = false;modal.dismiss('Cross click')">
                          </button>
                        </div>
                       <!-- <div class="modal-body p-0">
                              <div class="table-responsive" style="max-height: 400px;">
                                <table class="table table-bordered text-nowrap mb-0 custom-table" >
                                    <tbody>
                                       <tr>
                                        <td>
                                        <div class="form-check">
                                            <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                        </div>
                                        </td>
                                        <td>
                                            <label for="selectAll" class="form-check-label">Select All</label>
                                        </td>
                                       </tr>
                                       @for(data of filterData;track data){
                                        @if(data?data:''){
                                         <tr class="border-bottom user-list" >
                                           
                                            <td style="width: 46px;">
                                                <div class="form-check">
                                                    <input type="checkbox" name="checkbox" id="defaultCheck1" [checked]="data.selected" class="form-check-input" (click)="filterCheck($event,data)">    
                                                </div>
                                            </td>
                                            <td>
                                                <label for="defaultCheck1" class="form-check-label"> {{data}} </label>
                                            </td>
                                         </tr>
                                          }
                                        }             
                                    </tbody>
                                </table>
                            </div>
                
                        </div>-->
                        <div class="modal-body" style="height: 500px; overflow: auto;">
                            @if(dateList.includes(filterType)){
                                <div class="card panel panel-primary">
                                    <div class="tab-menu-heading tab-menu-heading-boxed">
                                        <div class="tabs-menu-boxed">
                                            <ul ngbNav #nav="ngbNav" [(activeId)]="activeTabId" class="nav panel-tabs fs-14" >
                                                <li [ngbNavItem]="1" (click)="formatExtractType = ''; filterSearch = ''; filterDataGet()">
                                                    <a ngbNavLink class="p-3">General</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane active" id="activetabs">
                                                            <div style="display: flex;">
                                                                <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="filterSearch" (keyup.enter)="searchFilterList()" aria-describedby="button-addon2" >
                                                                <button class="btn btn-primary border me-2" (click)="searchFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                            </div>
                                                            <div *ngFor="let data of filterData | test: editFilterSearch : 'label'">
                                                            <!-- @for(data of filterData;track data){ -->
                                                                @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                <div class="form-check">
                                                                    <input type="checkbox" name="checkbox" id="defaultCheck1" [checked]="data.selected" class="form-check-input"
                                                                        (click)="filterCheck($event,data.label)">
                                                                    <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                </div>
                                                                <!-- } -->
                                                            }
                                                        </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                                <li [ngbNavItem]="2" (click)="formatExtractType = ''; filterSearch = ''; filterDataGet()">
                                                    <a ngbNavLink class="p-3">Range of dates</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane" id="linktabs">
                                                            <div class="card-body">
                                                                <div class="date-box">
                                                                    <input type="text" id="input" [(ngModel)]="minDate" class="form-control date-box-width">
                                                                    <input type="text" id="input" [(ngModel)]="maxDate" class="form-control date-box-width">
                                                                </div>
                                                                <div id="merging-tooltips">
                                                                  <ngx-slider 
                                                                  [(value)]="minValue"
                                                                  [(highValue)]="maxValue"
                                                                  [options]="options"
                                                                  (valueChange)="updateDateRange()"
                                                                  (highValueChange)="updateDateRange()"
                                                                ></ngx-slider>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                                <li [ngbNavItem]="3" (click)="filterSearch = '';">
                                                    <a ngbNavLink class="p-3">Extract</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane" id="linktabs">
                                                            <div class="card-body p-0">
                                                                <ul *ngIf="!formatExtractType" class="border-bottom mb-2">
                                                                  <li (click)="formatExtractType = 'year'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Years</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'quarter'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Quaters</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'month'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Months</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'day'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Days</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'week numbers'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Week numbers</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'weekdays'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Weekdays</label>
                                                                  </li>
                                                                </ul>
                                                                <ul *ngIf="!formatExtractType">
                                                                  <li (click)="formatExtractType = 'count'; filterDataGet()">
                                                                     <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Count</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'count_distinct'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                   <label for="defaultCheck1" class="form-check-label">Count (Distinct)</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'min'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                   <label for="defaultCheck1" class="form-check-label">Minimum</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'max'; filterDataGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                   <label for="defaultCheck1" class="form-check-label">Maximum</label>
                                                                  </li>
                                                                </ul>
                                                                @if(formatExtractType){
                                                                <div style="display: flex;">
                                                                    <button class="btn btn-primary" (click)="formatExtractType = '';"><i class="fa fa-long-arrow-left"></i></button>
                                                                    <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="filterSearch" (keyup.enter)="searchFilterList()" aria-describedby="button-addon2" >
                                                                    <button class="btn btn-primary border me-2" (click)="searchFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                                </div>
                                                                <div *ngFor="let data of filterData | test: editFilterSearch : 'label'">
                                                                    @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                    <div class="form-check">
                                                                        <input type="checkbox" name="checkbox" id="defaultCheck1" [checked]="data.selected" class="form-check-input"
                                                                            (click)="filterCheck($event,data.label)">
                                                                        <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                    </div>
                                                                    }
                                                                </div>
                                                                }
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                            </ul>
                                            <div class="panel-body tabs-menu-body p-1 panel-body-h">
                                                <div class="tab-content">
                                                    <div [ngbNavOutlet]="nav"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }@else{
                                <div style="display: flex;">
                                    <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="filterSearch" (keyup.enter)="searchFilterList()" aria-describedby="button-addon2" >
                                    <button class="btn btn-primary border me-2" (click)="searchFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                    <label for="defaultCheck1" class="form-check-label"> Select All </label>
                                </div>
                                <div *ngFor="let data of filterData | test: filterSearch : 'label'">
                                <!-- @for(data of filterData;track data){ -->
                                    @if(data? data : (boolList.includes(filterType)? true: '')){
                                        <div class="form-check">
                                            <input type="checkbox" name="checkbox" id="defaultCheck1" [checked]="data.selected"  [(ngModel)]="data.selected" class="form-check-input"
                                                (click)="filterCheck($event,data.label)">
                                            <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                        </div>
                                    }
                                    </div>
                                <!-- } -->
                            }
                        </div>
                        <div class="modal-footer">
                            <div class="col text-left p-0" *ngIf="activeTabId !== 3">
                                <input type="checkbox" id="exclude" [(ngModel)]="isExclude" class="form-check-input">
                                <label for="exclude" class="form-check-label">Exclude</label>
                            </div>
                            <div class="text-right">
                                <button [disabled]="!(filterDataArray?.length > 0 || filterDateRange.length > 0)" type="button"
                                    class="btn ripple btn-primary me-2" (click)="filterDataPut();isAllSelected = false; modal.dismiss('Cross click')">Apply</button>
                                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click');isAllSelected = false;">
                                    Close
                                </button>
                            </div>
                        </div>
                      </ng-template>

                      <ng-template #contentedit let-modal>
                        <div class="modal-header">
                          <h6 class="modal-title"> Edit Filter</h6>
                          <button type="button"class="btn-close"aria-label="Close"(click)="isAllSelected = false;modal.dismiss('Cross click')">
                          </button>
                        </div>
                        <div class="modal-body"  style="height: 500px; overflow: auto;">

                            @if(dateList.includes(filterType)){
                                <div class="card panel panel-primary">
                                    <div class="tab-menu-heading tab-menu-heading-boxed">
                                        <div class="tabs-menu-boxed">
                                            <ul ngbNav #nav="ngbNav" [(activeId)]="activeTabId" class="nav panel-tabs fs-14" >
                                                <li [ngbNavItem]="1" [class.disabled]="formatExtractType || (activeTabId !== 1)">
                                                    <a ngbNavLink class="p-3">General</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane active" id="activetabs">
                                                            <div style="display: flex;">
                                                                <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                                                <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                            </div>
                                                            @for(data of filterData;track data){
                                                                @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                    <div class="form-check">
                                                                        <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                        <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                    </div>
                                                                }
                                                            }
                                                        </div>
                                                    </ng-template>
                                                </li>
                                                <li [ngbNavItem]="2" [class.disabled]="formatExtractType || (activeTabId !== 2)">
                                                    <a ngbNavLink class="p-3">Range of dates</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane" id="linktabs">
                                                            <div class="card-body">
                                                                <div class="date-box">
                                                                    <input type="text" id="input" [(ngModel)]="minDate" class="form-control date-box-width">
                                                                    <input type="text" id="input" [(ngModel)]="maxDate" class="form-control date-box-width">
                                                                </div>
                                                                <div id="merging-tooltips">
                                                                  <ngx-slider 
                                                                  [(value)]="minValue"
                                                                  [(highValue)]="maxValue"
                                                                  [options]="options"
                                                                  (valueChange)="updateDateRange()"
                                                                  (highValueChange)="updateDateRange()"
                                                                ></ngx-slider>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                                <li [ngbNavItem]="3" [class.disabled]="!formatExtractType || (activeTabId !== 3)">
                                                    <a ngbNavLink class="p-3">Extract</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane" id="linktabs">
                                                            <div class="card-body p-0">
                                                                <ul *ngIf="!formatExtractType" class="border-bottom mb-2">
                                                                  <li (click)="formatExtractType = 'year'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Years</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'quarter'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Quaters</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'month'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Months</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'day'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Days</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'week number'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Week numbers</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'weekdays'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Weekdays</label>
                                                                  </li>
                                                                </ul>
                                                                <ul *ngIf="!formatExtractType">
                                                                  <li (click)="formatExtractType = 'count'; filterEditGet()">
                                                                     <i class="fa fa-calendar-o me-1"></i>
                                                                    <label for="defaultCheck1" class="form-check-label">Count</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'count_distinct'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                   <label for="defaultCheck1" class="form-check-label">Count (Distinct)</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'min'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                   <label for="defaultCheck1" class="form-check-label">Minimum</label>
                                                                  </li>
                                                                  <li (click)="formatExtractType = 'max'; filterEditGet()">
                                                                    <i class="fa fa-calendar-o me-1"></i>
                                                                   <label for="defaultCheck1" class="form-check-label">Maximum</label>
                                                                  </li>
                                                                </ul>
                                                                @if(formatExtractType){
                                                                    <div style="display: flex;">
                                                                        <!-- <button class="btn btn-primary" (click)="formatExtractType = '';"><i class="fa fa-long-arrow-left"></i></button> -->
                                                                        <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                                                        <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                                    </div>
                                                                    @for(data of filterData;track data){
                                                                        @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                            <div class="form-check">
                                                                                <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                                <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                            </div>
                                                                        }
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                            </ul>
                                            <div class="panel-body tabs-menu-body p-1" style="height: 578px;">
                                                <div class="tab-content">
                                                    <div [ngbNavOutlet]="nav"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }@else{
                                <div style="display: flex;">
                                    <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                    <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                    <label for="defaultCheck1" class="form-check-label"> Select All </label>
                                </div>
                                <div *ngFor="let data of filterData | test: editFilterSearch : 'label'">
                                <!-- @for(data of filterData;track data){ -->
                                    @if(data? data : (boolList.includes(filterType)? true: '')){
                                        <div class="form-check">
                                            <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                            <label for="defaultCheck1" class="form-check-label"> {{data.label}}</label>
                                        </div>
                                    }
                                    </div>
                                <!-- } -->
                            }

                            <!-- <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="searchFilterList()" aria-describedby="button-addon2" >
                            <button class="btn btn-primary border me-2" (click)="searchFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                            @for(data of filterData;track data){
                            <div class="form-check">
                                <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                            </div>
                        } -->
                        </div>
                        <div class="modal-footer">
                            <div class="col text-left p-0" *ngIf="activeTabId !== 3">
                                <input type="checkbox" id="exclude" [(ngModel)]="isExclude" class="form-check-input">
                                <label for="exclude" class="form-check-label">Exclude</label>
                            </div>
                            <div class="text-right">
                                <button [disabled]="!(filterDataArray?.length > 0)" type="button" class="btn ripple btn-primary me-2"
                                    (click)="filterDataEditPut();isAllSelected = false; modal.dismiss('Cross click')">Apply</button>
                                <button type="button" class="btn ripple btn-secondary" (click)="isAllSelected = false;modal.close('Save click');">
                                    Close
                                </button>
                            </div>
                        </div>
                      </ng-template>
                     
                     
                     
                </div>
                
            </div>
        </div>
        <div class="col-xxl-8 col-xl-8 col-lg-7 col-md-7 p-1 mt-3">
           <div class="card p-0 mb-1 border">
           
                <div class="card p-0 mb-1 bg-light" style="border: none !important;">
                    <div class="card-body title-padding">
                        <div class="row align-items-center">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12 maind-flex" >
                            <div class="col-lg-9 col-md-9 col-sm-9 p-1" >
                                <div class="title-container border rounded-2" *ngIf="!editor">
                                    <input *ngIf="!retriveDataSheet_id && titleShow && !editor" (click)="editor =true" id="inptele" type="text" placeholder="Sheet Name" aria-label="Sheet" class="form-control" [(ngModel)]="sheetTitle" (input)="sheetNameChange(sheetTitle,$event)">
                                    <span class="card mb-0" *ngIf="(retriveDataSheet_id || !titleShow) && !editor" (click)="titleShow =true; editor =true" id="htmlContent" [innerHtml]="sheetTagTitle" [ngStyle]="sheetTagName[0] === '<' ? {'padding-top': '1.5%', 'padding-left': '15px'} : {'padding': '1.5%'}" style="padding-left: 15px;cursor: text;"></span>
                                    <!-- <ckeditor *ngIf="editor" placeholder="Sheet Name" [editor]="Editor" [config]="editorConfig" [(ngModel)]="sheetTagName"></ckeditor> -->
                                    <span class="title-editor" (click)="toggleEditor()">
                                        <button class="btn btn-primary"><i class="fa fa-pencil"></i></button>
                                    </span>
                                </div> 
                                <ckeditor *ngIf="editor" placeholder="Sheet Name" (ready)="$event.editing.view.focus();" [editor]="Editor" [config]="editorConfig" [(ngModel)]="sheetTagName" (ngModelChange)="updateSheetName()"></ckeditor>
                                <!-- <ckeditor *ngIf="!editor" placeholder="Sheet Name" (click)="editor =true" [editor]="Editor" [config]="editorConfig1" [(ngModel)]="sheetTagName"></ckeditor> -->
                                <!-- <div *ngIf="editor" class="popup">
                                    <div class="popup-content">
                                    <ckeditor placeholder="Sheet Name" [editor]="Editor" [config]="editorConfig" [(ngModel)]="sheetTagName"></ckeditor>
                                    <div class="buttons">
                                        <button class="btn btn-danger" (click)="toggleEditor()">Close</button>
                                        <button class="btn btn-primary" (click)="updateSheetName(); toggleEditor(); titleShow = false">Update</button>
                                    </div>
                                    </div>
                                </div> -->
                            </div>

                            <div class="col-lg-3 col-md-3 col-sm-3 p-1" style="display: flex;justify-content: space-around;">
                                <div [class.disabled]="draggedColumnsData.length == 0 && draggedRowsData.length == 0">
                                    <!-- <button  class="btn btn-primary w-100" (click)="sheetSave()">Save </button>
                                    <button class="btn btn-primary w-100" (click)="sheetSave()">update </button> -->
                                    <app-insights-button *ngIf="!retriveDataSheet_id" [buttonName]="'Save'" [classesList]="'btn btn-primary update-btn '" [isIcon]="false" [previledgeId]="17" [isBtn]="true"
                                    (btnClickEvent)="(table || kpi) ? sheetSave() : this.isSheetSaveOrUpdate = true; editor=false"></app-insights-button>
                                    <app-insights-button *ngIf="retriveDataSheet_id" [buttonName]="'Update'" [classesList]="'btn btn-primary update-btn '" [isIcon]="false" [previledgeId]="18" [isBtn]="true"
                                    (btnClickEvent)="(table || kpi) ? sheetSave() : this.isSheetSaveOrUpdate = true; editor=false" [ngClass]="{'disabled': sheetTagName.length<1}"></app-insights-button>
                                </div>
                                <div [class.disabled]="draggedColumnsData.length == 0 && draggedRowsData.length == 0">
                                    <app-insights-button [classesList]="'viewQueryImg'" [previledgeId]="72" [isBtn]="true"
                                        (btnClickEvent)="viewQuery(viewQueryModal)"  [isIcon]="false" [toolTip]="' View Query'"
                                        [ngClass]="{'disabled': sheetTagName.length < 1}" [imageUrl]="'./assets/images/icons/view-query.png'">
                                    </app-insights-button>
                                </div>
                                <button [class.disabled]="draggedColumnsData.length == 0 && draggedRowsData.length == 0" ngbTooltip="clear sheet" placement="bottom" triggers="hover" style="margin-left: 5px;" type="button" class="btn btn-primary mt-0" (click)="clearSheetConfirmation();"><img src="./assets/images/icons/erase.png" alt="logo" class="w-4 h-4"></button>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
        
                <div class="card-body" style="padding: 2px 16px;" (click)="editor =false">
                    <div class="row align-items-center mb-1">
                        <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 p-0">
                            <div class="card-area d-flex gap-2">
                                <label for="inputName" class="form-control mb-0 column-text border">Columns</label>
                            </div>
                        </div>
                        <div class="col-lg-10 col-md-10 col-sm-10 col-xl-10 p-0" >
                            
                                <div cdkDropList cdkDropListOrientation="horizontal" class="example-list form-control border" 
                                style="position: relative;min-height: 33px; padding: 2px;" 
                                #columnList="cdkDropList" 
                                [cdkDropListData]="draggedColumns" 
                                (cdkDropListDropped)="columndrop($event)"
                                [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">
                                    @for(columns of draggedColumns;track columns;let index = $index){
                                    <div class="example-box  example-box-bg" (cdkDragStarted)="dragStartedColumn(index,columns.column)" cdkDrag >
                                        @if(columns.type){
                                            {{ columns.type }} ({{columns.column}})
                                        } @else if(columns.field_name) {
                                            {{ columns.field_name }}
                                        } @else {   
                                            {{ columns.column }}
                                            <!--  <input type="text" class="form-control example-box border-end" [(ngModel)]="columns.column" value="" (click)="rename(index,columns.column,$event)" (keydown)="renameColumn(index,columns.column,$event)" >-->
                                        }

                                     <div class="dropup" ngbDropdown style="line-height: 0;">
                                        <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                        <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                            <div  *ngIf="dateList.includes(columns.data_type)" class="dropup" ngbDropdown style="display: flex; align-items: center;">
                                                <li class="btn btn-primary-light dropdown-item" ngbDropdownItem style="display: inline-block;text-align: center !important;">Date</li>
                                                <i class="btn btn-primary-light fe fe-chevron-right fs-18 text-body-secondary dropdown-toggle" style="display: inline-block;" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                    <li><a [ngClass]="columns.type === 'year' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'year')">Year (2024)</a></li>
                                                    <li><a [ngClass]="columns.type === 'quarter' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'quarter')">Quarter</a></li>
                                                    <li><a [ngClass]="columns.type === 'month' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'month')">Month (January)</a></li>
                                                    <li><a [ngClass]="columns.type === 'day' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'day')">Day (1-31)</a></li>
                                                    <li><a [ngClass]="columns.type === 'weekdays' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'weekdays')">Week Day (1-7)</a></li>
                                                    <li><a [ngClass]="columns.type === 'week numbers' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'week numbers')">Week Number (0-52)</a></li>
                                                    <!-- <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'weekname')">Week Name (Mon-Sun)</a></li> -->
                                                    <li><a [ngClass]="columns.type === '' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'')">None</a></li>  
                                                </ul>
                                            </div>
                                            <div  *ngIf="dateList.includes(columns.data_type)" class="dropup" ngbDropdown style="display: flex; align-items: center;">
                                                <li class="btn btn-primary-light dropdown-item" ngbDropdownItem style="display: inline-block;text-align: center !important;">Measure</li>
                                                <i class="btn btn-primary-light fe fe-chevron-right fs-18 text-body-secondary dropdown-toggle" style="display: inline-block;" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                    <li><a [ngClass]="columns.type === 'min' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'min')">Min</a></li>
                                                    <li><a [ngClass]="columns.type === 'max' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'max')">Max</a></li>
                                                    <li><a [ngClass]="columns.type === 'count' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'count')">Count</a></li>
                                                    <li><a [ngClass]="columns.type === 'count_distinct' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'count_distinct')">Count (Distinct)</a></li>
                                                    <li><a [ngClass]="columns.type === '' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'')">None</a></li>  
                                                </ul>
                                            </div>
                                            <li><a class="btn btn-secondary-light mx-0" style="text-align: center !important;width: 100%;" (click)="dragStartedColumn(index,columns.column)"> Remove</a>  </li>
                                        </ul>
                                    </div>

                                        <!-- <div class="" ngbDropdown style="margin-top: 5px;">
                                            <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                aria-haspopup="true" aria-expanded="false" class=""><i class="fe fe-chevron-down fs-18 text-body-secondary"></i>
                                                
                                                <div class="dropdown-menu  cu" ngbDropdownMenu>
                                                    <a *ngIf="dateList.includes(columns.data_type)" class="btn btn-outline-light mx-0 mb-2" (click)="openDateFormatModal(dateFunctionsModal)" style="text-align: left !important;"> Date</a>
                                                    <a class="btn btn-secondary-light mx-0" style="text-align: left !important;" (click)="dragStartedColumn(index,columns.column)"> Remove</a> 
                                                    
                                                </div>

                                            </a>
                                        </div> -->
                                        <ng-template #dateFunctionsModal let-modal>
                                            <div class="modal-header">
                                                <h6 class="modal-title">Date Functions</h6>
                                                <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                                                </button>
                                            </div>
                                        
                                            <div class="modal-body" style="height: 500px; overflow: auto;">
                                                <div class="card-body p-0">
                                                    <div class="column-card">
                                                        <p class="fw-semibold mb-1 ">Row : {{columns.column}}</p>
                                                    </div>
                                                    <div class="aggregate-card mt-3">
                                                        <p class="fw-semibold mb-1 ">Date Extractions</p>
                                                        <select class="form-control" [(ngModel)]="dateValue" (change)="dateFormat(columns,index,dateValue)">
                                                            <option [selected] value="-Select-">-Select-</option>
                                                            <option value="year">Year (2024)</option>
                                                            <option value="month">Month (January)</option>
                                                            <option value="day">Day (1-31)</option>
                                                            <option value="weekdays">Week Day (1-7)</option>
                                                            <option value="week numbers">Week Number (0-52)</option>
                                                            <option value="weekname">Week Name (Mon-Sun)</option>
                                                            <option value="">None</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                                                    Close
                                                </button>
                                            </div>
                                        </ng-template>
                                    </div>
                                    }
                                </div> 
                                
                             <!--   <ul style=" bottom: 15px; left: -5px;  position: relative;" class="nav nav-pills fs-12 justify-content-end" role="tablist" id="footer-tab border-1" ngbnav="" >
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-right">
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-left" class="fa fa-caret-left"></i>
                                        </button>
                                    </li>
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-left" (click)="rightArrow()" >
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-right" class="fa fa-caret-right" > </i>
                                        </button>
                                    </li>
                                </ul>  -->                       
                            
                        </div>
                    </div>
                    <div class="row align-items-center mb-1">
                        <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 p-0" style="overflow: auto; white-space: nowrap;">
                            <div class="card-area d-flex gap-2">
                                <label for="inputName" class="form-control mb-0 row-text border">Rows</label>
                            </div> 
                        </div>
                        <div class="col-lg-10 col-md-10 col-sm-10 col-xl-10 p-0">
                           
                                <div cdkDropList cdkDropListOrientation="horizontal" class="example-list form-control border" style="
                                position: relative; min-height: 33px; padding: 2px;"
                                #rowList="cdkDropList" 
                                [cdkDropListData]="draggedRows" 
                                (cdkDropListDropped)="rowdrop($event)"
                                [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">
                                    @for(rows of draggedRows;track rows;let index = $index){
                                    <div class="example-box1  example-box1-bg" style="cursor: pointer;" (cdkDragStarted)="dragStartedRow(index,rows.column)"  cdkDrag>
                                        @if(rows.alias){
                                            {{ rows.alias }}
                                        } @else if(rows.field_name){
                                            {{ rows.field_name }}
                                        }
                                        @else if(rows.type){
                                            {{ rows.type }} ({{rows.column}})
                                        }@else{   
                                             {{ rows.column }}
                                        }
                                        <div class="dropup" ngbDropdown style="line-height: 0;">
                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                <div class="dropup" ngbDropdown >
                                                    <li  *ngIf="!isMeasureEdit" class="btn btn-primary-light" style="width: -webkit-fill-available">@if(rows.alias){
                                                        {{ rows.alias }}
                                                    }
                                                    @else if(rows.type){
                                                        {{ rows.type }} ({{rows.column}})
                                                    }@else if(rows.field_name){
                                                        {{ rows.field_name }}
                                                    }
                                                    @else{   
                                                         {{ rows.column }}
                                                    } <i (click)="isMeasureEdit = true;" class="fa fa-pencil ms-1" style="float: right; padding-top: 5px;"></i> </li>
                                                    <li  *ngIf="isMeasureEdit"><input (blur)="onAliasChange(rows, index)" type="text" placeholder="Enter Filter Name" [(ngModel)]="rows.alias" class="form-control checkbox-color">
                                                    </li>
                                                    <div class="d-flex" style="align-items: center;">
                                                    <li class="dropdown-item btn btn-primary-light" ngbDropdownItem style="display: inline-block;text-align: center !important;">Aggregation</li>
                                                    <i class="fe fe-chevron-right fs-18 text-body-secondary btn btn-primary-light dropdown-toggle" style="display: inline-block;" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                </div>
                                                    <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'sum' ? 'aggregation-select' : ''" class="dropdown-item border" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'sum')" style="padding: 15px !important;">Sum</a></li>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'avg' ? 'aggregation-select' : ''" class="dropdown-item border" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'avg')" style="padding: 15px !important;">Avg</a></li>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'min' ? 'aggregation-select' : ''" class="dropdown-item border" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'min')" style="padding: 15px !important;">Min</a></li>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'max' ? 'aggregation-select' : ''" class="dropdown-item border" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'max')" style="padding: 15px !important;">Max</a></li>
                                                        <li><a [ngClass]="rows.type === 'count' ? 'aggregation-select' : ''" class="dropdown-item border" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count')" style="padding: 15px !important;">Count</a></li>
                                                        <li><a [ngClass]="rows.type === 'count_distinct' ? 'aggregation-select' : ''" class="dropdown-item border" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count_distinct')" style="padding: 15px !important;">Count (Distinct)</a></li>
                                                        <li><a [ngClass]="rows.type === '' ? 'aggregation-select' : ''"class="dropdown-item border" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'')" style="padding: 15px !important;">None</a></li>  
                                                    </ul>
                                                </div>
                                                <li> <a class="btn btn-secondary-light mx-0" style="text-align: center !important;width: 100%;" (click)="dragStartedRow(index,rows.column)"> Remove</a> </li>
                                            </ul>
                                        </div>
                                        
                                        <ng-template #aggregateUserModal let-modal>
                                            <div class="modal-header">
                                                <h6 class="modal-title">Aggregated measures</h6>
                                                <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                                                </button>
                                            </div>
                                        
                                            <div class="modal-body" style="height: 500px; overflow: auto;">
                                                <div class="card-body p-0">
                                                    <div class="column-card">
                                                        <p class="fw-semibold mb-1 ">Row : {{rows.column}}</p>
                                                    </div>
                                                    <div class="aggregate-card mt-3">
                                                        <p class="fw-semibold mb-1 ">Aggregate</p>
                                                        <select class="form-control" [(ngModel)]="measureValue"
                                                            (change)="rowMeasuresCount(rows,index,measureValue)">
                                                            <option [selected] value="-Select-">-Select-</option>
                                                            <option value="sum">Sum</option>
                                                            <option value="avg">Avg</option>
                                                            <option value="min">Min</option>
                                                            <option value="max">Max</option>
                                                            <option value="count">Count</option>
                                                            <option value="count_distinct">Count(Distinct)</option>
                                                            <option value="">None</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                                                    Close
                                                </button>
                                            </div>
                                        </ng-template>
                                        
                                        
                                    </div>
                                    }
                                </div>  
                               <!-- <ul style=" bottom: 15px; left: -5px;  position: relative;" class="nav nav-pills fs-12 justify-content-end" role="tablist" id="footer-tab border-1" ngbnav="" >
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-right">
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-left" class="fa fa-caret-left"></i>
                                        </button>
                                    </li>
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-left">
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-right" class="fa fa-caret-right"> </i>
                                        </button>
                                    </li>
                                </ul> -->                         
                            
                        </div>
                    </div>
                    <div  [ngStyle]="{'display': ((bar || pie || donut || map) && draggedColumns && draggedColumns.length > 0 ? '' : 'none')}" class="row align-items-center">
                                                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 p-0" style="overflow: auto; white-space: nowrap;">
                                                   <div class="card-area d-flex gap-2">
                                                       <label for="inputName" class="form-control mb-0 border">Hierarchy</label>
                                                   </div> 
                                                </div>
                                            <div class="col-lg-10 col-md-10 col-sm-10 col-xl-10 p-0">
                                                    <div cdkDropList cdkDropListOrientation="horizontal" class="example-list form-control border" 
                                                    style="position: relative;min-height: 33px; padding: 2px;" 
                                                #drilldownList="cdkDropList" 
                                                    [cdkDropListData]="draggedDrillDownColumns" 
                                                    (cdkDropListDropped)="drillDownColumndrop($event)">
                                                        @for(columns of draggedDrillDownColumns;track columns;let index = $index){
                                                        <div class="example-box border-end" cdkDrag >
                                                            {{ columns }}
                                                            <div class="" ngbDropdown style="margin-top: 5px;">
                                                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                                    aria-haspopup="true" aria-expanded="false" class=""><i class="fe fe-chevron-down fs-18 text-body-secondary"></i>
                                                                <div class="dropdown-menu  cu" ngbDropdownMenu>
                                                                        <a class="btn btn-secondary-light mx-0" style="text-align: left !important;" (click)="removeDrillDownColumn(index,columns)"> Remove</a>     
                                                                    </div>
                                                                </a>
                                                        </div>
                                                       </div>
                                                        }
                                                    </div>             
                                                    
                                                </div>
                                            </div>
                </div>
            </div>
                    
            <div class="card mb-0 border" [ngClass]="(bar || pie || donut) ? 'show-chart-card' : 'show-chart-card-no-heirarchy'">
                @if(!(table || kpi)){
                    <div class="input-group">
                <!-- <div class="col-lg-3 col-md-3 p-1">
                    <select class="form-select form-select select2 fs-14" [(ngModel)]="selectedChartPlugin"
                        (change)="changeChartPlugin()">
                        <option *ngIf="!(radar || calendar || map)" value="apex">Apex</option>
                        <option *ngIf="!(guage)" value="echart">EChart</option>
                    </select>
                </div> -->
                @if((pie || bar || donut || map) && draggedDrillDownColumns && draggedDrillDownColumns.length > 0){
                                    <div class="col-lg-3 col-md-3 p-1">
                                        <button class="btn btn-primary " (click)="goDrillDownBack()" style="padding: 4px;">
                                            <img src="./assets/images/Tiled view sheet icons/Drill-Down.png" alt="logo" class="w-5 h-5"> </button>
                                   </div>
                                    @if(drillDownObject && drillDownObject.length > 0 && drillDownIndex > 0 && draggedDrillDownColumns && draggedDrillDownColumns.length > 0){
                                    <div class="col-lg-3 col-md-3 d-flex mt-2" >
                                        @for(column of drillDownObject;track column;let index = $index){
                                       <h6 class="ms-1 mb-0 p-1" > {{drillDownObject[index][draggedDrillDownColumns[index]]}}</h6> <span style="padding-top: 3px;">-></span>
                                   }
                                    </div>
                                }
                                }
                                   </div>
                }
                @if(table && chartId){
                <div class="sheet-search">
                    <div class="">
                    </div>
                    <div *ngIf="table &&(draggedRows.length > 0 || draggedColumns.length > 0 )" class="input-group mt-1 p-1 sheet-table-search">
                        <input type="text" placeholder="Search" aria-describedby="button-addon2" [(ngModel)]="tableChartSearch" (keyup.enter)="tableDisplayPaginationSearch()" class="form-control border-end-0 ">
                        <button type="button" id="button-addon2" class="btn btn-primary border me-2" (click)="tableDisplayPaginationSearch()" style="border-radius: 0px 4px 4px 0px;">
                        <i class="fe fe-search"></i></button>
                    </div>
                   </div>
                }
                 <div class="card-body p-1 border-bottom" style="display: flex; justify-content: center; align-items: center; overflow-y: auto;">
                    <!-- @for(tab of tabs;track tab; let index = $index){ -->
                       
                        <!-- @if((tab.sheet_name || tab) === sheetName){ -->
                          
                            <div class="body table-responsive" style="max-height:350px;padding: 0px;">
                                
                                @if(table && chartId){
                                <table>
                                    <thead>
                                      <tr>
                                        @for(column of tableColumnsDisplay;track column){
                                        <th [ngStyle]="{ 'font-family': headerFontFamily, 'font-style': headerFontStyle, 'text-decoration': headerFontDecoration, 
                                        'color': headerFontColor, 'text-align': headerFontAlignment, 'font-weight': headerFontWeight, 'font-size': headerFontSize }">{{ column }}
                                            <!-- <span class=" p-1" style="float: inline-end;" ngbDropdown>
                                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                  aria-haspopup="true" aria-expanded="false" class=""><i
                                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                                </a>
                                                <div class="dropdown-menu" ngbDropdownMenu>
                                                  <button class="dropdown-item" (click)="tableColumnSort('default', column)">Default</button>
                                                  <button class="dropdown-item" (click)="tableColumnSort('ascending', column)">Ascending</button>
                                                  <button class="dropdown-item" (click)="tableColumnSort('descending', column)">Descending</button>
                                                </div>
                                            </span> -->
                                        </th>
                                        }
                                      </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let row of (tableDataDisplay| paginate: { itemsPerPage: itemsPerPage,
                                                                currentPage: page,
                                                                totalItems: totalItems }) ; let i = index"
                                        [ngClass]="bandingSwitch ? (i % 2 === 0 ? 'even-row' : 'odd-row') : ''"
                                        [ngStyle]="{ 'background-color': (i % 2 === 0 ? color1 : color2) }">
                                        @for(column of tableColumnsDisplay;track column){
                                        <td [ngStyle]="{ 'font-family': tableDataFontFamily, 'font-weight': tableDataFontWeight, 'font-style': tableDataFontStyle, 'text-decoration': tableDataFontDecoration, 
                                        'color': tableDataFontColor, 'text-align': tableDataFontAlignment, 'font-size': tableDataFontSize }">{{ row[column] }}</td>
                                        }
                                    </tr>
                                    
                                    </tbody>
                                  </table>
                                  <pagination-controls *ngIf="table &&(draggedRows.length > 0 || draggedColumns.length > 0 )" previousLabel="Prev" nextLabel="Next" (pageChange)="pageChangeTableDisplay((page = $event))"></pagination-controls>
                                }
                                @if(kpi && chartId){
                                    <div class="big-number-container">
                                        <!-- @for(data of tablePreviewRow;track data){ -->
                                            <h1 class="big-number" [style.font-size]="getFontSize()" [style.color]="kpiColor">{{ KPINumber }}</h1>
                                        <!-- } -->
                                    </div>
                                }
                                @if(isApexCharts && !table && !kpi){
              <!-- @if(bar && chartId){ -->

                <app-insight-apex [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [dualAxisColumnData]="dualAxisColumnData" 
                [dualAxisRowData]="dualAxisRowData" [tablePreviewRow]="tablePreviewRow" [chartType]="chartType" [xGridSwitch]="xGridSwitch"
                [xLabelSwitch]="xLabelSwitch" [yLabelSwitch]="yLabelSwitch" [yGridSwitch]="yGridSwitch" [xLabelFontFamily]="xLabelFontFamily"
                [xLabelFontSize]="xLabelFontSize" [xlabelFontWeight]="xlabelFontWeight" [backgroundColor]="backgroundColor" [color]="color"
                [ylabelFontWeight]="ylabelFontWeight" [isBold]="isBold" [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize"
                [barColor]="barColor" [lineColor]="lineColor" [gridColor]="GridColor" [legendSwitch]="legendSwitch" [dataLabels]="dataLabels"
                [label]="label" [donutSize]="donutSize" [isDistributed]="isDistributed" [minValueGuage]="minValueGuage" [maxValueGuage]="maxValueGuage"
                [legendsAllignment]="legendsAllignment" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsFontSize]="dataLabelsFontSize"
                [dataLabelsFontPosition]="dataLabelsFontPosition" [dataLabelsColor]="dataLabelsColor" [measureAlignment]="measureAlignment" 
                [dimensionAlignment]="dimensionAlignment" [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix"
                [donutDecimalPlaces]="donutDecimalPlaces" [drillDownIndex]="drillDownIndex" [draggedDrillDownColumns]="draggedDrillDownColumns"
                [drillDownObject]="drillDownObject" [sortType]="sortType" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" [dataLabelsBarFontPosition]="dataLabelsBarFontPosition"
                [dataLabelsLineFontPosition]="dataLabelsLineFontPosition" [selectedColorScheme]="selectedColorScheme"
                (saveOrUpdateChart)="setChartOptions($event)" (setDrilldowns)="setDrilldowns($event)">
                </app-insight-apex>
    
            } @else {
            @if(bar && chartId){         
            <div class="card-body">
                <!-- <div >
                    <div echarts [options]="eBarChartOptions" class="echart-charts"></div>
                </div> -->

                <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [chartType]="chartType" [dataLabelsFontPosition]="dataLabelsFontPosition" [dimensionAlignment] = "dimensionAlignment" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                [backgroundColor]="backgroundColor" [xlabelAlignment]="xlabelAlignment" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" [xLabelColor]="xLabelColor"
                [xLabelSwitch]="xLabelSwitch" [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize" [xlabelFontWeight]="xlabelFontWeight" [yLabelColor]="yLabelColor"
                [yGridSwitch]="yGridSwitch" [yLabelSwitch]="yLabelSwitch" [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                [yGridColor]="yGridColor" [yGridSwitch]="yGridSwitch" [color]="color" [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontSize]="dataLabelsFontSize" 
                [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsColor]="dataLabelsColor" [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" [sortType]="sortType"
                [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" [drillDownIndex]="drillDownIndex" [draggedDrillDownColumns]="draggedDrillDownColumns"[drillDownObject]="drillDownObject"
                (setDrilldowns)="setDrilldowns($event)" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
            </div>          
            }
            @else if(funnel && chartId){         
                <div class="card-body">
                    <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                    [color]="color" [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsColor]="dataLabelsColor" [selectedColorScheme]="selectedColorScheme"
                    [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                </div>
                }
            @else if(stocked && chartId){         
                <div class="card-body">
                    <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment"  [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                    [backgroundColor]="backgroundColor" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" [xLabelColor]="xLabelColor" [xLabelSwitch]="xLabelSwitch"
                    [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize" [xlabelFontWeight]="xlabelFontWeight" [xlabelAlignment]="xlabelAlignment"
                    [xlabelAlignment]="xlabelAlignment" [yLabelColor]="yLabelColor" [yLabelSwitch]="yLabelSwitch" [yGridColor]="yGridColor" [yGridSwitch]="yGridSwitch" [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                    [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsFontSize]="dataLabelsFontSize" 
                    [dataLabelsColor]="dataLabelsColor"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" [selectedColorScheme]="selectedColorScheme"
                    [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                </div>
                }
            @else if(sidebyside && chartId){         
                    <div class="card-body">
                        <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                        [backgroundColor]="backgroundColor" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" [xLabelColor]="xLabelColor" [xLabelSwitch]="xLabelSwitch" [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                        [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize" [xlabelFontWeight]="xlabelFontWeight" [xlabelAlignment]="xlabelAlignment" [selectedColorScheme]="selectedColorScheme"
                        [yLabelColor]="yLabelColor" [yLabelSwitch]="yLabelSwitch" [yGridSwitch]="yGridSwitch" [color]="color" [yGridColor]="yGridColor" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                        [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsFontSize]="dataLabelsFontSize"
                        [dataLabelsColor]="dataLabelsColor"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix"
                        [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                    </div>
                    }
            @else if(grouped && chartId){         
                    <div class="card-body">
                        <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment"  [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                        [backgroundColor]="backgroundColor" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" [xLabelColor]="xLabelColor" [xLabelSwitch]="xLabelSwitch"  [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                        [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize" [xlabelFontWeight]="xlabelFontWeight" [xlabelAlignment]="xlabelAlignment"
                        [yLabelColor]="yLabelColor" [yLabelSwitch]="yLabelSwitch" [yGridColor]="yGridColor" [yGridSwitch]="yGridSwitch" [selectedColorScheme]="selectedColorScheme"
                        [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsFontSize]="dataLabelsFontSize" 
                        [dataLabelsColor]="dataLabelsColor"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix"
                        [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                    </div>
            }
            @else if(horizentalStocked && chartId){         
                <div class="card-body">
                    <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment"  [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                    [backgroundColor]="backgroundColor" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" [xLabelColor]="xLabelColor" [xLabelSwitch]="xLabelSwitch"  [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                    [xLabelSwitch]="xLabelSwitch" [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize" [xlabelFontWeight]="xlabelFontWeight" [xlabelAlignment]="xlabelAlignment" [selectedColorScheme]="selectedColorScheme"
                    [yLabelColor]="yLabelColor" [yGridColor]="yGridColor" [yLabelSwitch]="yLabelSwitch" [yGridSwitch]="yGridSwitch"  [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily"
                    [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix"
                    [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                </div>
        }
                
            @else if(area && chartId){
            <div class="card-body">
                <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                [backgroundColor]="backgroundColor" [xlabelAlignment]="xlabelAlignment" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" 
                [xLabelColor]="xLabelColor" [xLabelSwitch]="xLabelSwitch" [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize"
                [xlabelFontWeight]="xlabelFontWeight" [yLabelColor]="yLabelColor" [yLabelSwitch]="yLabelSwitch" [yGridColor]="yGridColor"
                [yGridSwitch]="yGridSwitch" [color]="color"  [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily" 
                [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor" [yLabelFontFamily]="yLabelFontFamily"  [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                [ylabelFontWeight]="ylabelFontWeight"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
            </div>
            }
            @else if(line && chartId){
            <div class="card-body">
                <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                [backgroundColor]="backgroundColor" [xlabelAlignment]="xlabelAlignment" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" 
                [xLabelColor]="xLabelColor" [xLabelSwitch]="xLabelSwitch" [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize"
                [xlabelFontWeight]="xlabelFontWeight" [yLabelColor]="yLabelColor" [yLabelSwitch]="yLabelSwitch" [yGridColor]="yGridColor"
                [yGridSwitch]="yGridSwitch" [color]="color" [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily"
                 [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor" [yLabelFontFamily]="yLabelFontFamily"  [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                 [ylabelFontWeight]="ylabelFontWeight"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" 
                 [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
            </div>
            }
            @else if(pie && chartId){
            <div class="card-body">
                <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                [backgroundColor]="backgroundColor" [legendSwitch]="legendSwitch" [dataLabels]="dataLabels"  [dataLabelsFontFamily]="dataLabelsFontFamily" [selectedColorScheme]="selectedColorScheme"
                [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor" [legendsAllignment]="legendsAllignment"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix"
                [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" [drillDownIndex]="drillDownIndex" [draggedDrillDownColumns]="draggedDrillDownColumns"[drillDownObject]="drillDownObject"
                (setDrilldowns)="setDrilldowns($event)" (saveOrUpdateChart)="setChartOptions($event)" [leftLegend]="leftLegend" [topLegend]="topLegend" [rightLegend]="rightLegend" [bottomLegend]="bottomLegend" [legendOrient]="legendOrient"></app-insight-echart>
            </div>
            }
            @else if(donut && chartId){
                <div class="card-body">
                    <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType" [donutSize]="donutSize" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                    [backgroundColor]="backgroundColor" [legendSwitch]="legendSwitch" [dataLabels]="dataLabels" [dataLabelsFontFamily]="dataLabelsFontFamily" [selectedColorScheme]="selectedColorScheme"
                    [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor" [legendsAllignment]="legendsAllignment"
                    [donutDecimalPlaces]="donutDecimalPlaces" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" [drillDownIndex]="drillDownIndex" [draggedDrillDownColumns]="draggedDrillDownColumns"[drillDownObject]="drillDownObject"
                    (setDrilldowns)="setDrilldowns($event)" (saveOrUpdateChart)="setChartOptions($event)" [leftLegend]="leftLegend" [topLegend]="topLegend" [rightLegend]="rightLegend" [bottomLegend]="bottomLegend" [legendOrient]="legendOrient"
                    ></app-insight-echart>
                </div>
                }
            @else if(barLine && chartId){
                <div class="card-body">
                    <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment" [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                    [backgroundColor]="backgroundColor" [xLabelColor]="xLabelColor" [xLabelFontSize]="xLabelFontSize" [xLabelFontFamily]="xLabelFontFamily" [xLabelSwitch]="xLabelSwitch" [yLabelSwitch]="yLabelSwitch"
                    [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" [yGridColor]="yGridColor" [yGridSwitch]="yGridSwitch" [barColor]="barColor" [lineColor]="lineColor"  [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                    [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor"
                    [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" [dataLabelsBarFontPosition]="dataLabelsBarFontPosition" [dataLabelsLineFontPosition]="dataLabelsLineFontPosition"
                    [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                </div>
                }
                @else if(multiLine && chartId){
                    <div class="card-body">
                        <app-insight-echart [isZoom]="isZoom" [isBold]="isBold" [dataLabelsFontPosition]="dataLabelsFontPosition" [chartType]="chartType"  [dimensionAlignment] = "dimensionAlignment" [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                        [backgroundColor]="backgroundColor" [xGridColor]="xGridColor" [xGridSwitch]="xGridSwitch" [xLabelColor]="xLabelColor" [xLabelSwitch]="xLabelSwitch"  [yLabelFontFamily]="yLabelFontFamily" [yLabelFontSize]="yLabelFontSize" [ylabelFontWeight]="ylabelFontWeight"
                        [xLabelFontFamily]="xLabelFontFamily" [xLabelFontSize]="xLabelFontSize" [xlabelFontWeight]="xlabelFontWeight" [xlabelAlignment]="xlabelAlignment"
                        [yLabelColor]="yLabelColor" [yLabelSwitch]="yLabelSwitch" [yGridColor]="yGridColor" [yGridSwitch]="yGridSwitch" [selectedColorScheme]="selectedColorScheme"
                        [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsFontSize]="dataLabelsFontSize" 
                        [dataLabelsColor]="dataLabelsColor"  [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix"
                        [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                    </div>
                    }
            @else if(radar && chartId){
                <div class="card-body">
                    <app-insight-echart  [chartType]="chartType" [radarRowData]="radarRowData" [dataLabelsFontPosition]="dataLabelsFontPosition" [dimensionAlignment] = "dimensionAlignment" [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                    [backgroundColor]="backgroundColor" [legendSwitch]="legendSwitch" [xLabelColor]="xLabelColor" [dataLabels]="dataLabels" [dataLabelsFontFamily]="dataLabelsFontFamily" 
                    [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor" [legendsAllignment]="legendsAllignment" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                    [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                </div>
                }
                @else if(map && chartId){
                    <div class="card-body">
                        <app-insight-echart  [isZoom]="isZoom" [isBold]="isBold"  [chartType]="chartType" [chartsColumnData]="chartsColumnData" [chartsRowData]="chartsRowData" [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                        [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" [drillDownIndex]="drillDownIndex" [draggedDrillDownColumns]="draggedDrillDownColumns"[drillDownObject]="drillDownObject"
                        (setDrilldowns)="setDrilldowns($event)" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                    </div>
                    }
                    
                @else if(calendar){
                    <div class="card-body">
                        <app-insight-echart [isZoom]="isZoom"  [chartType]="chartType" [chartsColumnData]="chartsColumnData" [chartsRowData]="chartsRowData" [selectedColorScheme]="selectedColorScheme"
                        [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                    </div>
                }
                @else if(heatMap){
                    <div class="card-body">
                        <app-insight-echart [isZoom]="isZoom" [isBold]="isBold"  [chartType]="chartType" [dataLabelsFontPosition]="dataLabelsFontPosition" [dimensionAlignment] = "dimensionAlignment" 
                        [decimalPlaces]="decimalPlaces" [displayUnits]="displayUnits"  [dualAxisRowData]="dualAxisRowData" [dualAxisColumnData]="dualAxisColumnData"
                        [backgroundColor]="backgroundColor" [xLabelSwitch]="xLabelSwitch" [xLabelColor]="xLabelColor" [xLabelFontSize]="xLabelFontSize" [xLabelFontFamily]="xLabelFontFamily" [selectedColorScheme]="selectedColorScheme"
                        [xlabelFontWeight]="xlabelFontWeight" [yLabelSwitch]="yLabelSwitch" [yLabelColor]="yLabelColor" [yLabelFontSize]="[yLabelFontSize]" [yLabelFontFamily]="yLabelFontFamily" [ylabelFontWeight]="ylabelFontWeight"
                        [measureColor]="measureColor" [dimensionColor]="dimensionColor" [dataLabelsFontFamily]="dataLabelsFontFamily" [dataLabelsFontSize]="dataLabelsFontSize" [dataLabelsColor]="dataLabelsColor"
                        [displayUnits]="displayUnits" [decimalPlaces]="decimalPlaces" [prefix]="prefix" [suffix]="suffix" [chartsRowData]="chartsRowData" [chartsColumnData]="chartsColumnData"
                        [isSheetSaveOrUpdate]="isSheetSaveOrUpdate" (saveOrUpdateChart)="setChartOptions($event)"></app-insight-echart>
                    </div>
                }
            }
            </div>
        <!-- } -->
        <!-- }-->
                 </div>
                    <div class="card-footer d-flex p-2" style="overflow-x: auto; overflow-y: hidden;">
                        <mat-tab-group [selectedIndex]="selectedTabIndex"
                        (selectedIndexChange)="selected.setValue($event)"
                        (selectedTabChange)="onChange($event);" 
                        >
                        @for(tab of tabs;track tab; let index = $index){
           <mat-tab  [label]="tab.sheet_name || tab">
          <!--  <br>  <br>
             Contents for {{tab}} tab
         
             <button mat-raised-button
                     class="example-delete-tab-button"
                     [disabled]="tabs.length === 1"
                     (click)="removeTab(index)">
               Delete Tab
             </button>
              <br> <br> <br>-->
           </mat-tab>
         }
         </mat-tab-group>
         
                        <ul ngbnav="" id="footer-tab border-1 " role="tablist" class="nav nav-pills fs-12 " style=" display: contents;">
                            
                            <div>
                                <li role="presentation" class="nav-item">
                                    <button type="button" ngbnavlink="" [class.disabled]="SheetSavePlusEnabled.length>0" data-bs-toggle="tab"
                                        role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1"
                                        class="nav-link BtnNewStyle" (click)="addSheet(false)" style="padding: 14px;">
                                        <i class="fa fa-plus-square-o"></i>
                                    </button>
                                </li>
                            </div>
                            <li role="presentation" class="nav-item">
                                <button type="button" ngbnavlink="" [class.disabled]="!retriveDataSheet_id" data-bs-toggle="tab" role="tab"
                                    aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle"
                                    (click)="removeTab()" style="padding: 14px;">
                                    <i class="fe fe-trash"></i>
                                </button>
                            </li>
                            <li role="presentation" class="nav-item">
                                <button type="button" ngbnavlink="" ngbtooltip="Duplicate Sheet" [class.disabled]="!retriveDataSheet_id" data-bs-toggle="tab" role="tab"
                                    aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle"
                                    (click)="sheetDuplicate()" style="padding: 14px;">
                                    <i class="fa fa-copy"></i>
                                </button>
                            </li>
                        </ul>
                        <div *ngIf="!sheetsDashboard && database_name" style="display: flex;justify-content: center;height: 50px;"><button (click)="openSelectDashboard(content)" class="nav-link BtnNewStyle px-2" style="width: max-content;">Move to Dashboard</button>
                            <ng-template #content let-modal>
                                <div class="modal-header">
                                    <h6 class="modal-title">Move to Dashboard</h6>
                                    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p>Add to Dashboard</p>
                                    <div class="form-group select2-sm">
                                        <select id="inputGroupSelect013" class="form-select form-select select2 fs-14"  [(ngModel)]="selectedDashboardId">
                                            <option value="0" disabled selected>Select a Dashboard</option>
                                            <option *ngFor="let dashboard of dashboardList" [value]="dashboard.dashboard_id">{{dashboard.dashboard_name}}</option>
                                        </select>
                                    </div>
                                    <button class="btn btn-primary " [disabled]="!retriveDataSheet_id" (click)="gotoDashboard(); modal.close('Save click')"> New Dashboard</button>
                                </div>
                            
                            
                                <div class="modal-footer">
                            
                                    <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                                        Cancel
                                    </button>
                                    <button type="button" class="btn ripple btn-primary" [disabled]="!retriveDataSheet_id || !selectedDashboardId" (click)="moveToDashboard(); modal.close('Save click')">Ok</button>
                                </div>
                            </ng-template>
                        </div>
                        <div *ngIf="sheetsDashboard" style="display: flex;justify-content: center;"><button (click)="moveToDashboard()" class="nav-link BtnNewStyle px-2">view Dashboard</button></div>        
                    </div>
                </div>

             </div>
             <div class="col-xxl-2 col-xl-2 col-lg-2 col-md-2 mt-3 p-1">
                <div class="card panel panel-primary border">
                    <div class="tab-menu-heading tab-menu-heading-boxed">
                        <div class="tabs-menu1">
                            <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav panel-tabs fs-14" style="justify-content: space-between;">

                                <li [ngbNavItem]="1">
                                    <a ngbNavLink class="p-1">Data</a>
                                    <ng-template ngbNavContent>
                                        <div class="tab-pane active" id="activetabs">
                                            <div class="border rounded-3 mb-1 filter-card-height" >
                                                <div class="card-header  bg-light justify-content-start align-items-center">
                                                    <div class="card-title fs-12">Filters </div>
                                                </div>
                                                <div class="card-body p-1">
                                                    @for(dimen of dimetionMeasure;track dimen;let index = $index){
                                                    <div class="example-box justify-content-start border-bottom" style="cursor: pointer;"> 
                                                       {{dimen.col_name}}
                                                       <div class="filter-icons">
                                                        <i class="fe fe-edit fs-12 text-body-secondary ms-2" (click)="openSuperScalededitFilter(contentedit,dimen)"></i>
                                                        <i class="fe fe-trash fs-12 text-body-secondary ms-1" (click)="filterDelete(index,dimen.filter_id)"></i>
                                                    </div>
                                                    </div>
                                                }
                                                </div>
                                                <ng-template #contentedit let-modal>
                                                    <div class="modal-header">
                                                      <h6 class="modal-title"> Edit Filter</h6>
                                                      <button type="button"class="btn-close"aria-label="Close"(click)="isAllSelected = false;modal.dismiss('Cross click')">
                                                      </button>
                                                    </div>
                                                    <div class="modal-body"  style="height: 500px; overflow: auto;">
                                                        <!-- <div class="input-group">
                                                            <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch"
                                                                (keyup.enter)="editFilterList()" aria-describedby="button-addon2">
                                                            <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2"
                                                                style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                        </div> -->
                                                        @if(dateList.includes(filterType)){
                                                            <div class="card panel panel-primary">
                                                                <div class="tab-menu-heading tab-menu-heading-boxed">
                                                                    <div class="tabs-menu-boxed">
                                                                        <ul ngbNav #nav="ngbNav" [(activeId)]="activeTabId" class="nav panel-tabs fs-14" >
                                                                            <li [ngbNavItem]="1" [class.disabled]="formatExtractType || (activeTabId !== 1)">
                                                                                <a ngbNavLink class="p-3">General</a>
                                                                                <ng-template ngbNavContent>
                                                                                    <div class="tab-pane active" id="activetabs">
                                                                                        <div style="display: flex;">
                                                                                            <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                                                                            <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                                                        </div>
                                                                                        @for(data of filterData;track data){
                                                                                            @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                                                <div class="form-check">
                                                                                                    <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                                                    <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                                                </div>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </ng-template>
                                                                            </li>
                                                                            <li [ngbNavItem]="2" [class.disabled]="formatExtractType || (activeTabId !== 2)">
                                                                                <a ngbNavLink class="p-3">Range of dates</a>
                                                                                <ng-template ngbNavContent>
                                                                                    <div class="tab-pane" id="linktabs">
                                                                                        <div class="card-body">
                                                                                            <div class="date-box">
                                                                                                <input type="text" id="input" [(ngModel)]="minDate" class="form-control date-box-width">
                                                                                                <input type="text" id="input" [(ngModel)]="maxDate" class="form-control date-box-width">
                                                                                            </div>
                                                                                            <div id="merging-tooltips">
                                                                                              <ngx-slider 
                                                                                              [(value)]="minValue"
                                                                                              [(highValue)]="maxValue"
                                                                                              [options]="options"
                                                                                              (valueChange)="updateDateRange()"
                                                                                              (highValueChange)="updateDateRange()"
                                                                                            ></ngx-slider>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </ng-template>
                                                                            </li>
                                                                            <li [ngbNavItem]="3" [class.disabled]="!formatExtractType || (activeTabId !== 3)">
                                                                                <a ngbNavLink class="p-3">Extract</a>
                                                                                <ng-template ngbNavContent>
                                                                                    <div class="tab-pane" id="linktabs">
                                                                                        <div class="card-body p-0">
                                                                                            <ul *ngIf="!formatExtractType" class="border-bottom mb-2">
                                                                                              <li (click)="formatExtractType = 'year'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                                <label for="defaultCheck1" class="form-check-label">Years</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'quarter'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                                <label for="defaultCheck1" class="form-check-label">Quaters</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'month'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                                <label for="defaultCheck1" class="form-check-label">Months</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'day'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                                <label for="defaultCheck1" class="form-check-label">Days</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'week number'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                                <label for="defaultCheck1" class="form-check-label">Week numbers</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'weekdays'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                                <label for="defaultCheck1" class="form-check-label">Weekdays</label>
                                                                                              </li>
                                                                                            </ul>
                                                                                            <ul *ngIf="!formatExtractType">
                                                                                              <li (click)="formatExtractType = 'count'; filterEditGet()">
                                                                                                 <i class="fa fa-calendar-o me-1"></i>
                                                                                                <label for="defaultCheck1" class="form-check-label">Count</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'count_distinct'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                               <label for="defaultCheck1" class="form-check-label">Count (Distinct)</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'min'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                               <label for="defaultCheck1" class="form-check-label">Minimum</label>
                                                                                              </li>
                                                                                              <li (click)="formatExtractType = 'max'; filterEditGet()">
                                                                                                <i class="fa fa-calendar-o me-1"></i>
                                                                                               <label for="defaultCheck1" class="form-check-label">Maximum</label>
                                                                                              </li>
                                                                                            </ul>
                                                                                            @if(formatExtractType){
                                                                                                <div style="display: flex;">
                                                                                                    <!-- <button class="btn btn-primary" (click)="formatExtractType = '';"><i class="fa fa-long-arrow-left"></i></button> -->
                                                                                                    <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                                                                                    <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                                                                </div>
                                                                                                @for(data of filterData;track data){
                                                                                                    @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                                                        <div class="form-check">
                                                                                                            <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                                                            <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                                                        </div>
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        </div>
                                                                                    </div>
                                                                                </ng-template>
                                                                            </li>
                                                                        </ul>
                                                                        <div class="panel-body tabs-menu-body p-1" style="height: 578px;">
                                                                            <div class="tab-content">
                                                                                <div [ngbNavOutlet]="nav"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }@else{
                                                            <div style="display: flex;">
                                                                <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch"  aria-describedby="button-addon2" >
                                                                <button class="btn btn-primary border me-2"  type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                            </div>
                                                            <div class="form-check">
                                                                <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                                                <label for="defaultCheck1" class="form-check-label"> Select All </label>
                                                            </div>
                                                            <!-- @for(data of filterData;track data | filter: editFilterSearch){ -->
                                                                <div *ngFor="let data of filterData | test: editFilterSearch : 'label'">
                                                                @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                    <div class="form-check">
                                                                        <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                        <label for="defaultCheck1" class="form-check-label"> {{data.label}}</label>
                                                                    </div>
                                                                }
                                                                </div>
                                                            <!-- } -->
                                                        }

                                                        <!-- @for(data of filterData;track data){
                                                        <div class="form-check">
                                                            <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                            <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                        </div>
                                                    } -->
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="col text-left p-0" *ngIf="activeTabId !== 3">
                                                            <input type="checkbox" id="exclude" [(ngModel)]="isExclude" class="form-check-input">
                                                            <label for="exclude" class="form-check-label">Exclude</label>
                                                        </div>
                                                        <div class="text-right">
                                                            <button [disabled]="!(filterDataArray?.length > 0 || filterDateRange.length > 0)" type="button"
                                                                class="btn ripple btn-primary me-2" (click)="filterDataEditPut(); isAllSelected = false;modal.dismiss('Cross click')">Apply</button>
                                                            <button type="button" class="btn ripple btn-secondary" (click)="isAllSelected = false;modal.close('Save click')">
                                                                Close
                                                            </button>
                                                        </div>
                                                    </div>
                                                  </ng-template>
                                            </div>
                                            <div class="border mb-1 rounded-3 charts-card-height">
                                                <div class="card-header  bg-light justify-content-between align-items-center">
                                                    <div class="card-title fs-12">Charts</div>
                                                </div>
                                                <div class="card-body" style=" padding: 2px 12px;">
                                                    <div class="row">
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': draggedRows.length<1 && draggedColumns.length<1}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Table" tooltipClass="tooltip-primary" (click)="chartDisplay(true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,1);tableDisplayPagination();"><img src="./assets/images/charts/Table-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': table}"></a>
                                                        </div>
                                                        <div class="card-title fs-12 mt-2 mb-1 border bg-light " style="text-align: center;">Single Axis</div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Bar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,6)"><img src="./assets/images/charts/Bar-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': bar}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)} ">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Area" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,17)"><img src="./assets/images/charts/area-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': area}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Line" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,13)"><img src="./assets/images/charts/Line-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': line}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Pie" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,24)"><img src="./assets/images/charts/pie-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon " [ngClass]="{'active': pie}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled':  (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Donut" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,10)"><img src="./assets/images/charts/doughnut-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon " [ngClass]="{'active': donut}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled':  (draggedRows.length>1 || draggedColumns.length>1) || draggedRows.length<1 || draggedColumns.length>0}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Kpi" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,25)"><img src="./assets/images/charts/kpi-icon.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': kpi}"></a>
                                                        </div>
                                                        <div *ngIf="isApexCharts" class="col-3 px-2 mt-2" [ngClass]="{'disabled':  (draggedRows.length>1 || draggedColumns.length>1) || draggedRows.length<1 || draggedColumns.length>0 || guagechartRowData > 1 }">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="guage" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,28)"><img src="./assets/images/charts/gauge-icon-new.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': guage}"></a>
                                                        </div>
                                                        <div *ngIf="isEChatrts" class="col-3 px-2 mt-2" [ngClass]="{'disabled': !dateList.includes(draggedColumnsData[0]?.[1]) && (draggedRows.length !== 1 || draggedColumns !== 1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Calendar Chart" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,11)"><img src="./assets/images/charts/calendar-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': calendar}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Funnel Chart" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,27)"><img src="./assets/images/charts/funnelChart-icon.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': funnel}"></a>
                                                        </div>
                                                        <div class="card-title fs-12 mt-2 mb-1 border bg-light " style="text-align: center;">Dual Axis</div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Side-Bar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,7)"><img src="./assets/images/charts/bar-bar.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': sidebyside}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Stacked-Bar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,5)"><img src="./assets/images/charts/stocked_bar.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon " [ngClass]="{'active': stocked}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': draggedRows.length !== 2 || draggedColumns.length<1}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Bar-Line" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,4)"><img src="./assets/images/charts/Bar-line.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': barLine}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="HStacked" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,2)"><img src="./assets/images/charts/horizental-stacked.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': horizentalStocked}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="HGrouped" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,3)"><img src="./assets/images/charts/Bar-bar-horizental.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': grouped}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Multi-Line" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,8)"><img src="./assets/images/charts/multi-line-new.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': multiLine}"></a>
                                                        </div>
                                                        <div *ngIf="isEChatrts" class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Radar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,12)"><img src="./assets/images/charts/spider.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': radar}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Heat Map" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,26)"><img src="./assets/images/charts/heatmap-new.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': heatMap}"></a>
                                                        </div>
                                                        <div *ngIf="isEChatrts" class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length!=1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="World Map" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,29)"><img src="./assets/images/charts/world-map.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': map}"></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                          
                                        </div>
                                    </ng-template>
                                </li>
                                <li [ngbNavItem]="2">
                                     <a ngbNavLink class="p-1">Customize</a>
                                        <ng-template ngbNavContent>
                                            <div class="tab-pane" id="linktabs">
                                                 <div ngbAccordion [closeOthers]="true" class="accordion" id="accordionExample">
                                                    <div *ngIf="((table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0))" ngbAccordionItem class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                            <button ngbAccordionButton class="accordion-button p-3 fw-500 border" type="button" data-bs-toggle="collapse"
                                                                data-bs-target="#collapse" aria-expanded="true" aria-controls="collapse">
                                                                Header
                                                            </button>
                                                    
                                                        </h6>
                                                        <div ngbAccordionCollapse id="collapse" class="accordion-collapse collapse" aria-labelledby="heading"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                                <ng-template>
                                                                    <div>
                                                                        <div class="sub-menu-item  p-2">
                                                                            <div class="row">
                                                                                <div class="">
                                                                                    <div class="font-color-card">
                                                                                        <p class="mb-0">Fonts</p>
                                                                                        <div class="dropup" ngbDropdown>
                                                                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle"
                                                                                                ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                <div class="dropup" ngbDropdown>
                                                                                                    <div class="form-group mb-0 p-1">
                                                                                                        <select class="form-select form-select select2 fs-14"
                                                                                                            [(ngModel)]="headerFontFamily">
                                                                                                            <option value="'Arial', sans-serif">Arial</option>
                                                                                                            <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                            <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                            <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                            <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                            <option value="'Georgia', serif">Georgia</option>
                                                                                                            <option value="'Merriweather', serif">Merriweather</option>
                                                                                                            <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                            <option value="Algerian">Algerian</option>
                                                                                                            <option value="Bahnschrift">Bahnschrift</option>
                                                                                                            <option value="sans-serif">Sans Serif</option>
                                                                                                            <option value="Calibri">Calibri</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <div class="bold-italic p-1">
                                                                                                        <div class="row">
                                                                                                            <div class="form-group mb-0 d-flex">
                                                                                                                <select class="form-select form-select select2 fs-14"
                                                                                                                    style="width: 100px;" [(ngModel)]="headerFontSize">
                                                                                                                    <option value="10px">10px</option>
                                                                                                                    <option value="11px">11px</option>
                                                                                                                    <option value="12px">12px</option>
                                                                                                                    <option value="13px">13px</option>
                                                                                                                    <option value="14px">14px</option>
                                                                                                                    <option value="15px">15px</option>
                                                                                                                    <option value="16px">16px</option>
                                                                                                                    <option value="17px">17px</option>
                                                                                                                    <option value="18px">18px</option>
                                                                                                                    <option value="19px">19px</option>
                                                                                                                    <option value="20px">20px</option>
                                                                                                                </select>
                                                                                                                <div class="bold-text"
                                                                                                                    [ngStyle]="{'background-color': headerFontWeight === 700 ? 'var(--primary-color)': '#fafcfc'}"
                                                                                                                    (click)="isTableHeaderBold = !isTableHeaderBold;headerFontWeight = isTableHeaderBold ? 700 : 400 ">
                                                                                                                    <p>B</p>
                                                                                                                </div>
                                                                                                                <div class="italic-text"
                                                                                                                    [ngStyle]="{'background-color': headerFontStyle === 'italic' ? 'var(--primary-color)': '#fafcfc'}"
                                                                                                                    (click)="isItalic = !isItalic;headerFontStyle = isItalic ? 'italic' : 'normal' ">
                                                                                                                    <p>I</p>
                                                                                                                </div>
                                                                                                                <div class="underline-text"
                                                                                                                    [ngStyle]="{'background-color': headerFontDecoration === 'underline' ? 'var(--primary-color)': '#fafcfc'}"
                                                                                                                    (click)="isUnderline = !isUnderline;headerFontDecoration = isUnderline ? 'underline' : 'none' ">
                                                                                                                    <p>U</p>
                                                                                                                </div>
                                                                                                            </div>
                                                        
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="color-shade-card p-1">
                                                                                                        <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                            <div *ngFor="let colorClass of row" [class]="colorClass"
                                                                                                                (click)="headerColorChange($event)">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                        
                                                                                                </div>
                                                                                                <li *ngIf="false">
                                                                                                    <p class="more-color-text">More colors...</p>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <span ngbTooltip=""></span>
                                                                            </div>
                                                                            <div class="sub-menu-item mb-0">
                                                                                <div class="row">
                                                                                  <div class="">
                                                                                      <div class="font-color-card">
                                                                                          <p class="mb-0">Alignments</p>
                                                                                          <div class="dropup" ngbDropdown>
                                                                                              <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                              <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                  <div class="dropup" ngbDropdown >
                                                                                                      <div class=" p-1">
                                                                                                              <div class="form-group mb-0 text-center" (click)="headerFontAlignment = 'left'">
                                                                                                                <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                              </div>
                                                                                                              <div class="form-group mb-0 alignment-sides">
                                                                                                                 <div class="align-left" [ngStyle]="{'background-color': headerFontAlignment == 'left' ? 'var(--primary-color)': '#fafcfc'}" (click)="headerFontAlignment = 'left'">
                                                                                                                    <i class="fa fa-align-left"></i>
                                                                                                                </div>
                                                                                                                <div  class="align-center" [ngStyle]="{'background-color': headerFontAlignment == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)="headerFontAlignment = 'center'">
                                                                                                                    <i class="fa fa-align-center"></i>
                                                                                                                </div>
                                                                                                                <div class="align-right" [ngStyle]="{'background-color': headerFontAlignment == 'right' ? 'var(--primary-color)': '#fafcfc'}" (click)="headerFontAlignment = 'right'">
                                                                                                                    <i class="fa fa-align-right"></i>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>                                                                                    
                                                                                                  </div>
                                                                                              </ul>
                                                                                          </div>
                                                                                  </div>
                                                                                </div>
                                                                              </div>
                                                                            </div>
                                                                            <span ngbTooltip=""></span>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="((table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0))" ngbAccordionItem class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                            <button ngbAccordionButton class="accordion-button p-3 fw-500 border" type="button" data-bs-toggle="collapse"
                                                                data-bs-target="#collapse" aria-expanded="true" aria-controls="collapse">
                                                                Table Data
                                                            </button>
                                                    
                                                        </h6>
                                                        <div ngbAccordionCollapse id="collapse" class="accordion-collapse collapse" aria-labelledby="heading"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                                <ng-template>
                                                                    <div>
                                                                        <div class="sub-menu-item  p-2">
                                                                            <div class="row">
                                                                                <div class="">
                                                                                    <div class="font-color-card">
                                                                                        <p class="mb-0">Fonts</p>
                                                                                        <div class="dropup" ngbDropdown>
                                                                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle"
                                                                                                ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                <div class="dropup" ngbDropdown>
                                                                                                    <div class="form-group mb-0 p-1">
                                                                                                        <select class="form-select form-select select2 fs-14"
                                                                                                            [(ngModel)]="tableDataFontFamily">
                                                                                                            <option value="'Arial', sans-serif">Arial</option>
                                                                                                            <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                            <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                            <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                            <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                            <option value="'Georgia', serif">Georgia</option>
                                                                                                            <option value="'Merriweather', serif">Merriweather</option>
                                                                                                            <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                            <option value="Algerian">Algerian</option>
                                                                                                            <option value="Bahnschrift">Bahnschrift</option>
                                                                                                            <option value="sans-serif">Sans Serif</option>
                                                                                                            <option value="Calibri">Calibri</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <div class="bold-italic p-1">
                                                                                                        <div class="row">
                                                                                                            <div class="form-group mb-0 d-flex">
                                                                                                                <select class="form-select form-select select2 fs-14"
                                                                                                                    style="width: 100px;" [(ngModel)]="tableDataFontSize">
                                                                                                                    <option value="10px">10px</option>
                                                                                                                    <option value="11px">11px</option>
                                                                                                                    <option value="12px">12px</option>
                                                                                                                    <option value="13px">13px</option>
                                                                                                                    <option value="14px">14px</option>
                                                                                                                    <option value="15px">15px</option>
                                                                                                                    <option value="16px">16px</option>
                                                                                                                    <option value="17px">17px</option>
                                                                                                                    <option value="18px">18px</option>
                                                                                                                    <option value="19px">19px</option>
                                                                                                                    <option value="20px">20px</option>
                                                                                                                </select>
                                                                                                                <div class="bold-text"
                                                                                                                    [ngStyle]="{'background-color': tableDataFontWeight === 700 ? 'var(--primary-color)': '#fafcfc'}"
                                                                                                                    (click)="isTableDataBold = !isTableDataBold;tableDataFontWeight = isTableDataBold ? 700 : 400 ">
                                                                                                                    <p>B</p>
                                                                                                                </div>
                                                                                                                <div class="italic-text"
                                                                                                                    [ngStyle]="{'background-color': tableDataFontStyle === 'italic' ? 'var(--primary-color)': '#fafcfc'}"
                                                                                                                    (click)="isItalic = !isItalic;tableDataFontStyle = isItalic ? 'italic' : 'normal' ">
                                                                                                                    <p>I</p>
                                                                                                                </div>
                                                                                                                <div class="underline-text"
                                                                                                                    [ngStyle]="{'background-color': tableDataFontDecoration === 'underline' ? 'var(--primary-color)': '#fafcfc'}"
                                                                                                                    (click)="isUnderline = !isUnderline;tableDataFontDecoration = isUnderline ? 'underline' : 'none' ">
                                                                                                                    <p>U</p>
                                                                                                                </div>
                                                                                                            </div>
                                                        
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="color-shade-card p-1">
                                                                                                        <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                            <div *ngFor="let colorClass of row" [class]="colorClass"
                                                                                                                (click)="tableDataColorChange($event)">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                        
                                                                                                </div>
                                                                                                <li *ngIf="false">
                                                                                                    <p class="more-color-text">More colors...</p>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <span ngbTooltip=""></span>
                                                                            </div>
                                                                            <div class="sub-menu-item mb-0">
                                                                                <div class="row">
                                                                                  <div class="">
                                                                                      <div class="font-color-card">
                                                                                          <p class="mb-0">Alignments</p>
                                                                                          <div class="dropup" ngbDropdown>
                                                                                              <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                              <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                  <div class="dropup" ngbDropdown >
                                                                                                      <div class=" p-1">
                                                                                                              <div class="form-group mb-0 text-center" (click)="tableDataFontAlignment = 'left'">
                                                                                                                <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                              </div>
                                                                                                              <div class="form-group mb-0 alignment-sides">
                                                                                                                 <div class="align-left" [ngStyle]="{'background-color': tableDataFontAlignment == 'left' ? 'var(--primary-color)': '#fafcfc'}" (click)="tableDataFontAlignment = 'left'">
                                                                                                                    <i class="fa fa-align-left"></i>
                                                                                                                </div>
                                                                                                                <div  class="align-center" [ngStyle]="{'background-color': tableDataFontAlignment == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)="tableDataFontAlignment = 'center'">
                                                                                                                    <i class="fa fa-align-center"></i>
                                                                                                                </div>
                                                                                                                <div class="align-right" [ngStyle]="{'background-color': tableDataFontAlignment == 'right' ? 'var(--primary-color)': '#fafcfc'}" (click)="tableDataFontAlignment = 'right'">
                                                                                                                    <i class="fa fa-align-right"></i>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>                                                                                    
                                                                                                  </div>
                                                                                              </ul>
                                                                                          </div>
                                                                                  </div>
                                                                                </div>
                                                                              </div>
                                                                            </div>
                                                                            <span ngbTooltip=""></span>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="!(table || kpi)" ngbAccordionItem class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                            <button ngbAccordionButton class="accordion-button p-3 fw-500" type="button" data-bs-toggle="collapse"
                                                                data-bs-target="#collapse" aria-expanded="true" aria-controls="collapse">
                                                                Chart Plugin
                                                            </button>
                                                    
                                                        </h6>
                                                        <div ngbAccordionCollapse id="collapse" class="accordion-collapse collapse" aria-labelledby="heading"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                                <ng-template>
                                                                    <div>
                                                                        <div class="sub-menu-item  p-2">
                                                                            <div class="form-group mb-0 p-1">
                                                                                <select class="form-select form-select select2 fs-14" [(ngModel)]="selectedChartPlugin"
                                                                                    (change)="customizechangeChartPlugin()">
                                                                                    <option *ngIf="!(radar || calendar || map)" value="apex">Basic</option>
                                                                                    <option *ngIf="!(guage)" value="echart">Advanced</option>
                                                                                </select>
                                                                            </div>
                                                    
                                                                            <span ngbTooltip=""></span>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || kpi || funnel || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                          <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                            <button
                                                              ngbAccordionButton
                                                              class="accordion-button p-3 fw-500"
                                                              type="button"
                                                              data-bs-toggle="collapse"
                                                              data-bs-target="#collapse"
                                                              aria-expanded="true"
                                                              aria-controls="collapse"
                                                              >
                                                              Dimensions
                                                            </button>
                                                            
                                                          </h6>
                                                          <div
                                                            ngbAccordionCollapse
                                                            id="collapse"
                                                            class="accordion-collapse collapse" 
                                                            aria-labelledby="heading"
                                                            data-bs-parent="#accordionExample"
                                                             >
                                                            <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                              <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                  <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                              </button> -->
                                                              <ng-template>
                                                                <div >
                                                                  <div class="sub-menu-item  p-2" >
                                                                          <div class="row">
                                                                            <div class="" >
                                                                                <div class="font-color-card">
                                                                                    <p class="mb-0">Fonts</p>
                                                                                    <div class="dropup" ngbDropdown>
                                                                                        <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                        <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                            <div class="dropup" ngbDropdown >
                                                                                                <div class="form-group mb-0 p-1">
                                                                                                    <select class="form-select form-select select2 fs-14" [(ngModel)]="xLabelFontFamily">
                                                                                                        <option value="'Arial', sans-serif">Arial</option>
                                                                                                        <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                        <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                        <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                        <option value="'Georgia', serif">Georgia</option>
                                                                                                        <option value="'Merriweather', serif">Merriweather</option>
                                                                                                        <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                        <option value="Algerian">Algerian</option>
                                                                                                        <option value="Bahnschrift">Bahnschrift</option>
                                                                                                        <option value="sans-serif">Sans Serif</option>
                                                                                                        <option value="Calibri">Calibri</option>
                                                                                                    </select>
                                                                                                </div>
                                                                                                <div class="bold-italic p-1">
                                                                                                    <div class="row">
                                                                                                        <div class="form-group mb-0 d-flex">
                                                                                                            <select class="form-select form-select select2 fs-14" style="width: 100px;" [(ngModel)]="xLabelFontSize">
                                                                                                                <option value="10">10px</option>
                                                                                                                <option value="11">11px</option>
                                                                                                                <option value="12">12px</option>
                                                                                                                <option value="13">13px</option>
                                                                                                                <option value="14">14px</option>
                                                                                                                <option value="15">15px</option>
                                                                                                                <option value="16">16px</option>
                                                                                                                <option value="17">17px</option>
                                                                                                                <option value="18">18px</option>
                                                                                                                <option value="19">19px</option>
                                                                                                                <option value="20">20px</option>
                                                                                                             </select>
                                                                                                             <div class="bold-text" [ngStyle]="{'background-color': isXlabelBold ? 'var(--primary-color)': '#fafcfc'}" (click)="isXlabelBold = !isXlabelBold;xlabelFontWeight = isXlabelBold ? 700 : 400 ;">
                                                                                                                <p>B</p>
                                                                                                            </div>
                                                                                                            <div *ngIf="false" class="italic-text" [ngStyle]="{'background-color': isItalic ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontStyle('I')">
                                                                                                                <p>I</p>
                                                                                                            </div>
                                                                                                            <div *ngIf="false" class="underline-text" [ngStyle]="{'background-color': isUnderline ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontStyle('U')">
                                                                                                                <p>U</p>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                       
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="color-shade-card p-1" *ngIf="isEChatrts">
                                                                                                    <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                      <div
                                                                                                        *ngFor="let colorClass of row"
                                                                                                        [class]="colorClass"
                                                                                                        (click)="dimensionsColorChange($event)">
                                                                                                      </div>
                                                                                                    </div>
                                                                                                  </div>
                                                                                              
                                                                                            </div>
                                                                                            <li *ngIf="false"> <p class="more-color-text">More colors...</p></li>
                                                                                        </ul>
                                                                                    </div>
                                                                            </div>
                                                                          </div>
                                                                          <span ngbTooltip=""></span>
                                                                        </div>
                                                                        <div class="sub-menu-item mb-0">
                                                                            <div class="row">
                                                                              <div class="">
                                                                                  <div class="font-color-card">
                                                                                      <p class="mb-0">Alignments</p>
                                                                                      <div class="dropup" ngbDropdown>
                                                                                          <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                          <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                              <div class="dropup" ngbDropdown >
                                                                                                  <div class=" p-1">
                                                                                                          <div class="form-group mb-0 text-center" (click)="allignmentChange('center','dimension')">
                                                                                                            <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                          </div>
                                                                                                          <div class="form-group mb-0 alignment-sides">
                                                                                                             <div class="align-left" [ngStyle]="{'background-color': dimensionAlignment == 'left' ? 'var(--primary-color)': '#fafcfc'}" (click)="allignmentChange('left','dimension')">
                                                                                                                <i class="fa fa-align-left"></i>
                                                                                                            </div>
                                                                                                            <div  class="align-center" [ngStyle]="{'background-color': dimensionAlignment == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)="allignmentChange('center','dimension')">
                                                                                                                <i class="fa fa-align-center"></i>
                                                                                                            </div>
                                                                                                            <div class="align-right" [ngStyle]="{'background-color': dimensionAlignment == 'right' ? 'var(--primary-color)': '#fafcfc'}" (click)="allignmentChange('right','dimension')">
                                                                                                                <i class="fa fa-align-right"></i>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>                                                                                    
                                                                                              </div>
                                                                                          </ul>
                                                                                      </div>
                                                                              </div>
                                                                            </div>
                                                                          </div>
                                                                        </div>
                                                                   
                                                                    <span ngbTooltip=""></span>
                                                                  </div>
                                                                </div>
                                                              </ng-template>
                                                            </div>
                                                          </div>
                                                    </div>

                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || funnel || kpi || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                            <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                              <button
                                                                ngbAccordionButton
                                                                class="accordion-button p-3 fw-500 border"
                                                                type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#collapse"
                                                                aria-expanded="true"
                                                                aria-controls="collapse"
                                                                >
                                                                Measures
                                                              </button>
                                                              
                                                            </h6>
                                                            <div
                                                              ngbAccordionCollapse
                                                              id="collapse"
                                                              class="accordion-collapse collapse" 
                                                              aria-labelledby="heading"
                                                              data-bs-parent="#accordionExample"
                                                               >
                                                              <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            
                                                                <ng-template>
                                                                  <div >
                                                                    <div class="sub-menu-item  p-2" >
                                                                        <div class="row">
                                                                            
                                                                        </div>
                                                                      
                                                                      <div class="row">
                                                                        <div class="" >
                                                                            <div class="font-color-card">
                                                                                <p class="mb-0">Fonts</p>
                                                                                <div class="dropup" ngbDropdown>
                                                                                    <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                    <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                        <div class="dropup" ngbDropdown >
                                                                                            <div class="form-group mb-0 p-1">
                                                                                                <select class="form-select form-select select2 fs-14" [(ngModel)]="yLabelFontFamily">
                                                                                                    <option value="'Arial', sans-serif">Arial</option>
                                                                                                    <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                    <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                    <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                    <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                    <option value="'Georgia', serif">Georgia</option>
                                                                                                    <option value="'Merriweather', serif">Merriweather</option>
                                                                                                    <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                    <option value="Algerian">Algerian</option>
                                                                                                    <option value="Bahnschrift">Bahnschrift</option>
                                                                                                    <option value="sans-serif">Sans Serif</option>
                                                                                                    <option value="Calibri">Calibri</option>
                                                                                                </select>
                                                                                            </div>
                                                                                            <div class="bold-italic p-1">
                                                                                                <div class="row">
                                                                                                    <div class="form-group mb-0 d-flex">
                                                                                                        <select class="form-select form-select select2 fs-14" style="width: 100px;" [(ngModel)]="yLabelFontSize">
                                                                                                            <option value="10">10px</option>
                                                                                                            <option value="11">11px</option>
                                                                                                            <option value="12">12px</option>
                                                                                                            <option value="13">13px</option>
                                                                                                            <option value="14">14px</option>
                                                                                                            <option value="15">15px</option>
                                                                                                            <option value="16">16px</option>
                                                                                                            <option value="17">17px</option>
                                                                                                            <option value="18">18px</option>
                                                                                                            <option value="19">19px</option>
                                                                                                            <option value="20">20px</option>
                                                                                                         </select>
                                                                                                         <div class="bold-text" [ngStyle]="{'background-color': isYlabelBold ? 'var(--primary-color)': '#fafcfc'}" (click)="isYlabelBold = !isYlabelBold;ylabelFontWeight = isYlabelBold ? 700 : 400 ;">
                                                                                                            <p>B</p>
                                                                                                        </div>
                                                                                                        <div *ngIf="false" class="italic-text" [ngStyle]="{'background-color': isItalic ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontStyle('I')">
                                                                                                            <p>I</p>
                                                                                                        </div>
                                                                                                        <div *ngIf="false" class="underline-text" [ngStyle]="{'background-color': isUnderline ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontStyle('U')">
                                                                                                            <p>U</p>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                   
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="color-shade-card p-1" *ngIf="isEChatrts">
                                                                                                <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                  <div
                                                                                                    *ngFor="let colorClass of row"
                                                                                                    [class]="colorClass"
                                                                                                    (click)="measuresColorChange($event)">
                                                                                                  </div>
                                                                                                </div>
                                                                                              </div>

                                                                                        </div>
                                                                                        <li *ngIf="false"> <p class="more-color-text">More colors...</p></li>
                                                                                    </ul>
                                                                                </div>
                                                                        </div>
                                                                      </div>
                                                                      <span ngbTooltip=""></span>
                                                                    </div>
                                                                    <div *ngIf="isApexCharts" class="sub-menu-item mb-0">
                                                                        <div class="row">
                                                                          <div class="">
                                                                              <div class="font-color-card">
                                                                                  <p class="mb-0">Alignments</p>
                                                                                  <div class="dropup" ngbDropdown>
                                                                                      <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                      <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                          <div class="dropup" ngbDropdown >
                                                                                                <div class=" p-1 mt-2 mb-2">
                                                                                                    <div class="form-group mb-0 text-center" (click)="allignmentChange('center','measure')">
                                                                                                      <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                    </div>
                                                                                                    <div class="form-group mb-0 alignment-sides">
                                                                                                       <div class="justify-bottom" [ngStyle]="{'background-color': measureAlignment == 'bottom' ? 'var(--primary-color)': '#fafcfc'}" (click)="allignmentChange('bottom','measure')">
                                                                                                          <i class="fa fa-align-justify"></i>
                                                                                                      </div>
                                                                                                      <div  class="justify-middle" [ngStyle]="{'background-color': measureAlignment == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)="allignmentChange('center','measure')">
                                                                                                          <i class="fa fa-align-justify"></i>
                                                                                                      </div>
                                                                                                      <div class="justify-top" [ngStyle]="{'background-color': measureAlignment == 'top' ? 'var(--primary-color)': '#fafcfc'}" (click)="allignmentChange('top','measure')">
                                                                                                          <i class="fa fa-align-justify"></i>
                                                                                                      </div>
                                                                                                  </div>
                                                                                              </div>                                                                                  
                                                                                          </div>
                                                                                      </ul>
                                                                                  </div>
                                                                          </div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                     
                                                                      <span ngbTooltip=""></span>
                                                                    </div>
                                                                  </div>
                                                                </ng-template>
                                                              </div>
                                                            </div>
                                                    </div>

                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || calendar || map)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border "
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Measure Values
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="sub-menu-item  p-2 mb-0" *ngIf="!kpi">
                                                                  <div class="row">
                                                                    <div class="" >
                                                                        <div class="font-color-card">
                                                                            <p class="mb-0">Fonts</p>
                                                                            <div class="dropup" ngbDropdown>
                                                                                <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                    <div class="dropup" ngbDropdown >
                                                                                        <div class="form-group mb-0 p-1">
                                                                                            <select class="form-select form-select select2 fs-14" [(ngModel)]="dataLabelsFontFamily" >
                                                                                                <option value="0" selected disabled>family</option>
                                                                                                <option value="'Arial', sans-serif">Arial</option>
                                                                                                <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                <option value="'Georgia', serif">Georgia</option>
                                                                                                <option value="'Merriweather', serif">Merriweather</option>
                                                                                                <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                <option value="Algerian">Algerian</option>
                                                                                                <option value="Bahnschrift">Bahnschrift</option>
                                                                                                <option value="sans-serif">Sans Serif</option>
                                                                                                <option value="Calibri">Calibri</option>
                                                                                            </select>
                                                                                        </div>
                                                                                        <div class="bold-italic p-1">
                                                                                            <div class="row">
                                                                                                <div class="form-group mb-0 d-flex">
                                                                                                    <select class="form-select form-select select2 fs-14" style="width: 100px;" [(ngModel)]="dataLabelsFontSize">
                                                                                                        <option value="0" selected disabled>size</option>
                                                                                                        <option value="10px">10px</option>
                                                                                                        <option value="11px">11px</option>
                                                                                                        <option value="12px">12px</option>
                                                                                                        <option value="13px">13px</option>
                                                                                                        <option value="14px">14px</option>
                                                                                                        <option value="15px">15px</option>
                                                                                                        <option value="16px">16px</option>
                                                                                                        <option value="17px">17px</option>
                                                                                                        <option value="18px">18px</option>
                                                                                                        <option value="19px">19px</option>
                                                                                                        <option value="20px">20px</option>
                                                                                                     </select>
                                                                                                     <div class="bold-text" [ngStyle]="{'background-color': isBold ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontStyle('B')">
                                                                                                        <p>B</p>
                                                                                                    </div>
                                                                                                    <div *ngIf="false" class="italic-text" [ngStyle]="{'background-color': isItalic ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontStyle('I')">
                                                                                                        <p>I</p>
                                                                                                    </div>
                                                                                                    <div *ngIf="false" class="underline-text" [ngStyle]="{'background-color': isUnderline ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontStyle('U')">
                                                                                                        <p>U</p>
                                                                                                    </div>
                                                                                                </div>
                                                                                               
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="color-shade-card p-1">
                                                                                            <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                              <div
                                                                                                *ngFor="let colorClass of row"
                                                                                                [class]="colorClass"
                                                                                                (click)="dataLabelsFontColor($event)">
                                                                                              </div>
                                                                                            </div>
                                                                                          </div>

                                                                                      
                                                                                    </div>
                                                                                    <li> <p class="more-color-text">More colors...</p></li>
                                                                                </ul>
                                                                            </div>
                                                                    </div>
                                                                  </div>
                                                                  <span ngbTooltip=""></span>
                                                                </div>
                                                              </div>
                                                              <div class="sub-menu-item  p-2 mb-0" *ngIf="!(kpi || guage || calendar || map || radar || barLine || (isApexCharts && (heatMap)))">
                                                                <div class="row">
                                                                  <div class="">
                                                                      <div class="font-color-card">
                                                                          <p class="mb-0">Alignments</p>
                                                                          <div class="dropup" ngbDropdown>
                                                                              <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                              <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                  <div class="dropup" ngbDropdown >
                                                                                    <div class=" p-1" *ngIf="horizentalStocked || grouped || funnel">
                                                                                        <div class="form-group mb-0 text-center" (click)="setDataLabelsFontPosition('top')">
                                                                                          <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                        </div>
                                                                                        <div class="form-group mb-0 alignment-sides">
                                                                                           <div class="align-left" [ngStyle]="{'background-color': dataLabelsFontPosition == 'bottom' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontPosition('bottom')">
                                                                                              <i class="fa fa-align-left"></i>
                                                                                          </div>
                                                                                          <div  class="align-center" [ngStyle]="{'background-color': dataLabelsFontPosition == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontPosition('center')">
                                                                                              <i class="fa fa-align-center"></i>
                                                                                          </div>
                                                                                          <div class="align-right" [ngStyle]="{'background-color': dataLabelsFontPosition == 'top' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontPosition('top')">
                                                                                              <i class="fa fa-align-right"></i>
                                                                                          </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class=" p-1 mt-2 mb-2" *ngIf="!(horizentalStocked || grouped || funnel)">
                                                                                        <div class="form-group mb-0 text-center" (click)="setDataLabelsFontPosition('top')">
                                                                                            <button class="btn btn-blue-light Automatic-btn">Automatic</button>
                                                                                        </div>
                                                                                        <div class="form-group mb-0 alignment-sides">
                                                                                            <div class="justify-bottom" [ngStyle]="{'background-color': dataLabelsFontPosition == 'bottom' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontPosition('bottom')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                            <div class="justify-middle" [ngStyle]="{'background-color': dataLabelsFontPosition == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)=" setDataLabelsFontPosition('center')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                            <div class="justify-top" [ngStyle]="{'background-color': dataLabelsFontPosition == 'top' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsFontPosition('top')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                   
                                                                                  </div>
                                                                              </ul>
                                                                          </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>

                                                            <div class="sub-menu-item  p-2 mb-0" *ngIf="barLine && isEChatrts">
                                                                <div class="row">
                                                                  <div class="">
                                                                      <div class="font-color-card">
                                                                          <p class="mb-0">Bar Alignments</p>
                                                                          <div class="dropup" ngbDropdown>
                                                                              <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                              <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                  <div class="dropup" ngbDropdown >
                                                                                    
                                                                                    <div class=" p-1 mt-2 mb-2" *ngIf="barLine">
                                                                                        <div class="form-group mb-0 text-center" (click)="setDataLabelsBarFontPosition('top')">
                                                                                            <button class="btn btn-blue-light Automatic-btn">Automatic</button>
                                                                                        </div>
                                                                                        <div class="form-group mb-0 alignment-sides">
                                                                                            <div class="justify-bottom" [ngStyle]="{'background-color': dataLabelsBarFontPosition == 'bottom' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsBarFontPosition('bottom')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                            <div class="justify-middle" [ngStyle]="{'background-color': dataLabelsBarFontPosition == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsBarFontPosition('center')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                            <div class="justify-top" [ngStyle]="{'background-color': dataLabelsBarFontPosition == 'top' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsBarFontPosition('top')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                   
                                                                                  </div>
                                                                              </ul>
                                                                          </div>
                                                                  </div>                                                 
                                                                </div>
                                                              </div>
                                                            </div>
                                                            <div class="sub-menu-item  p-2 mb-0" *ngIf="barLine && isEChatrts">
                                                                <div class="row">
                                                                  <div class="">
                                                                    <div class="font-color-card">
                                                                        <p class="mb-0">Line Alignments</p>
                                                                        <div class="dropup" ngbDropdown>
                                                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                <div class="dropup" ngbDropdown >
                                                                                  
                                                                                  <div class=" p-1 mt-2 mb-2" *ngIf="barLine">
                                                                                      <div class="form-group mb-0 text-center" (click)="setDataLabelsLineFontPosition('top')">
                                                                                          <button class="btn btn-blue-light Automatic-btn">Automatic</button>
                                                                                      </div>
                                                                                      <div class="form-group mb-0 alignment-sides">
                                                                                          <div class="justify-bottom" [ngStyle]="{'background-color': dataLabelsLineFontPosition == 'bottom' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsLineFontPosition('bottom')">
                                                                                              <i class="fa fa-align-justify"></i>
                                                                                          </div>
                                                                                          <div class="justify-middle" [ngStyle]="{'background-color': dataLabelsLineFontPosition == 'center' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsLineFontPosition('center')">
                                                                                              <i class="fa fa-align-justify"></i>
                                                                                          </div>
                                                                                          <div class="justify-top" [ngStyle]="{'background-color': dataLabelsLineFontPosition == 'top' ? 'var(--primary-color)': '#fafcfc'}" (click)="setDataLabelsLineFontPosition('top')">
                                                                                              <i class="fa fa-align-justify"></i>
                                                                                          </div>
                                                                                      </div>
                                                                                  </div>
                                                                                 
                                                                                </div>
                                                                            </ul>
                                                                        </div>
                                                                </div>                                                 
                                                                </div>
                                                              </div>
                                                            </div>
                                                       
                                                              @if(kpi){
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="col-md-4 form-label px-1 fs-14">Decimal places and Round:</label>
                                                                  <input type="number" class="form-control fs-14" id="decimal-places" style="width: auto;"[(ngModel)]="KPIDecimalPlaces" (change)="formatKPINumber()" min="0">
                                                                  </div>
                                                                  <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="display-units">Display Units:</label>
                                                                  <select id="display-units" class="form-select select2 fs-14" style="width: auto;" [(ngModel)]="KPIDisplayUnits" (change)="formatKPINumber()">
                                                                    <option value="none">None</option>
                                                                    <option value="K">Thousands (K)</option>
                                                                    <option value="M">Millions (M)</option>
                                                                    <option value="B">Billions (B)</option>
                                                                    <option value="G">Billions (G)</option>
                                                                  </select>
                                                                  </div>
                                                                  <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="prefix">Prefix:</label>
                                                                  <input type="text" class="form-control fs-14" id="prefix" style="width: auto;" [(ngModel)]="KPIPrefix" (input)="formatKPINumber()">
                                                                  </div>
                                                                  <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="suffix">Suffix:</label>
                                                                  <input type="text" class="form-control fs-14" id="suffix" style="width: auto;" [(ngModel)]="KPISuffix" (input)="formatKPINumber()">
                                                                </div>
                                                              }
                                                                <div *ngIf="!(kpi || guage)" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                                    <label>Numbers</label>
                                                                    <div class="btn-group my-2" ngbDropdown>
                                                                        <button type="button" ngbDropdownToggle class="btn btn-primary-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                                            123.456 &nbsp;<i class="fa fa-chevron-down"></i>
                                                                        </button>
                                                                        <ul class="dropdown-menu" ngbDropdownMenu>
                                                                            <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="numberPopupTrigger()">Number(custom)</a></li>
                                                                        </ul>
                                                                    </div>
                                                                 
                                                                </div>
                                                              
                                                                @if(numberPopup){
                                                                  <div class="number-formatting number-popup popup-content">
                                                                      <label for="decimal-places">Decimal places:</label>
                                                                      <input type="number" id="decimal-places" [(ngModel)]="decimalPlaces" min="0">
                                                                      
                                                                      <label for="display-units">Display Units:</label>
                                                                      <select id="display-units" [(ngModel)]="displayUnits">
                                                                        <option value="none">None</option>
                                                                        <option value="K">Thousands (K)</option>
                                                                        <option value="M">Millions (M)</option>
                                                                        <option value="B">Billions (B)</option>
                                                                        <option value="G">Billions (G)</option>
                                                                      </select>
                                                                      
                                                                      <label for="prefix">Prefix:</label>
                                                                      <input type="text" id="prefix" [(ngModel)]="prefix">
                                                                      
                                                                      <label for="suffix">Suffix:</label>
                                                                      <input type="text" id="suffix" [(ngModel)]="suffix">
                                                                      
                                                                      <div class="buttons">
                                                                          <button class="btn btn-danger" (click)="numberPopupTrigger()">Close</button>
                                                                          <!-- <button class="btn btn-primary" (click)="updateNumberFormat(); numberPopupTrigger()">Update</button> -->
                                                                      </div>
                                                                    </div>
                                                                }
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                  </div>

                                                    <div *ngIf="(table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0)" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Banding </p>
                                                        </div>
                                                        <div *ngIf="bandingSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('banding')">
                                                            <span></span>
                                                        </div>
                                                        <div *ngIf="!bandingSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('banding')">
                                                            <span></span>
                                                        </div>
                                                    </div>
                                             
                                                    <div *ngIf="(table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0)" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                        <div  style="font-size: 15px;">
                                                            <label>Page Length</label>
                                                            <select  [(ngModel)]="itemsPerPage" (ngModelChange)="tableDisplayPagination()" class="form-control cursor">
                                                                <option  [ngValue]="''" disabled> select page length</option>
                                                                  <option  [ngValue]="10"> 10</option>
                                                                  <option  value="50"> 50</option>
                                                                  <option  value="100"> 100</option>
                                                                  <option  value="500"> 500</option>
                                                                  <option  value="1000"> 1000</option>
                                                            </select>
                                                         </div>
                                                    </div>
                                                    <div *ngIf="!isApexCharts && isEChatrts && !(pie || donut || funnel || calendar || radar || kpi || table)" class="d-flex align-items-center justify-content-between  mb-1 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Zoom </p>
                                                        </div>
                                                        <div *ngIf="isZoom" class="toggle toggle-sm on mb-0" (click)="enableZoom()">
                                                            <span></span>
                                                        </div>
                                                        <div *ngIf="!isZoom" class="toggle toggle-sm off mb-0" (click)="enableZoom()">
                                                            <span></span>
                                                        </div>
                                                    </div>
                                                  
                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || kpi || funnel || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            X-Axis
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >X-label </p>
                                                                    </div>
                                                                    <div *ngIf="xLabelSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('xlabel')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!xLabelSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('xlabel')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>

                                                                <div *ngIf="!heatMap" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Grid Line </p>
                                                                    </div>
                                                                    <div *ngIf="xGridSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('xgrid')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!xGridSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('xgrid')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
                                                           
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || kpi || funnel || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Y-Axis
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Y-label </p>
                                                                    </div>
                                                                    <div *ngIf="yLabelSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('ylabel')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!yLabelSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('ylabel')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
 
                                                                <div *ngIf="!heatMap" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Grid Line </p>
                                                                    </div>
                                                                    <div *ngIf="yGridSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('ygrid')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!yGridSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('ygrid')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
     
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="((table && bandingSwitch && (draggedColumns.length !== 0 || draggedRows.length !==0)) || (((kpi || guage) && draggedRows.length === 1) || !(calendar || map || table)))" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Color Palettes
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <ng-template>
                                                                <div *ngIf="!((table && chartId) || kpi || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p>Background</p>
                                                                    </div>
                                                                    <div *ngIf="backgroundColorSwitch" class="toggle toggle-sm on mb-0" (click)="backgroundColorSwitch = !backgroundColorSwitch; resetBackgroundColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!backgroundColorSwitch" class="toggle toggle-sm off mb-0" (click)="backgroundColorSwitch = !backgroundColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="backgroundColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="backgroundColor"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>

                                                                <div *ngIf="!((table && chartId) || (pie && chartId)||donut||kpi||barLine||sidebyside||stocked||horizentalStocked||grouped||multiLine||heatMap||funnel || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p>Chart</p>
                                                                    </div>
                                                                    <div *ngIf="chartColorSwitch" class="toggle toggle-sm on mb-0" (click)="chartColorSwitch = !chartColorSwitch; resetChartColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!chartColorSwitch" class="toggle toggle-sm off mb-0" (click)="chartColorSwitch = !chartColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="chartColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="color" 
                                                                    (ngModelChange)="marksColor2($event)"
                                                                    [format]="'hex'"></ngx-colors>
                                                                </div>

                                                                <div 
                                                                class="dropdown" 
                                                                *ngIf="pie || donut || sidebyside || stocked || horizentalStocked || grouped || multiLine || heatMap || funnel || calendar">
                                                                <!-- Dropdown Button -->
                                                                <button class="dropdown-button" (click)="toggleDropdownColorScheme()">
                                                                  <div class="selected-colors" *ngIf="selectedColorScheme.length > 0">
                                                                    <div
                                                                      *ngFor="let color of selectedColorScheme.slice(0, 9)"
                                                                      class="color-box"
                                                                      [style.background]="color"
                                                                    ></div>
                                                                  </div>
                                                                  <span *ngIf="selectedColorScheme.length === 0">Select Color Scheme</span>
                                                                  <span class="arrow-down"></span>
                                                                </button>
                                                              
                                                                <!-- Dropdown Content -->
                                                                <div class="dropdown-content" [class.show]="isColorSchemeDropdownOpen">
                                                                  <div
                                                                    *ngFor="let scheme of colorSchemes"
                                                                    class="dropdown-item"
                                                                    (click)="selectColorScheme(scheme)">
                                                                    <div class="color-row">
                                                                      <div
                                                                        *ngFor="let color of scheme"
                                                                        class="color-box"
                                                                        [style.background]="color">
                                                                      </div>
                                                                    </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                              
                                                                  
                                                                  

                                                                <div *ngIf="barLine" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >bar</p>
                                                                    </div>
                                                                    <div *ngIf="barColorSwitch" class="toggle toggle-sm on mb-0" (click)="barColorSwitch = !barColorSwitch; resetChartColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!barColorSwitch" class="toggle toggle-sm off mb-0" (click)="barColorSwitch = !barColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="barColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="barColor" 
                                                                    (ngModelChange)="marksColor2($event)" 
                                                                    [format]="'hex'">
                                                                    </ngx-colors>
                                                                </div>
                                                                <div *ngIf="barLine" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >line</p>
                                                                    </div>
                                                                    <div *ngIf="lineColorSwitch" class="toggle toggle-sm on mb-0" (click)="lineColorSwitch = !lineColorSwitch; resetChartColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!lineColorSwitch" class="toggle toggle-sm off mb-0" (click)="lineColorSwitch = !lineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="lineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="lineColor" 
                                                                    (ngModelChange)="marksColor2($event)" 
                                                                    [format]="'hex'">
                                                                    </ngx-colors>
                                                                </div>
                                                                <div *ngIf="isApexCharts && (xGridSwitch || yGridSwitch) && !((table && chartId) || (pie && chartId) || donut || kpi || funnel || heatMap || guage)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Grid Line</p>
                                                                    </div>
                                                                    <div *ngIf="gridLineColorSwitch" class="toggle toggle-sm on mb-0" (click)="gridLineColorSwitch = !gridLineColorSwitch; resetGridColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!gridLineColorSwitch" class="toggle toggle-sm off mb-0" (click)="gridLineColorSwitch = !gridLineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="gridLineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="GridColor" 
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>

                                                                
                                                                <div *ngIf="!isApexCharts && xGridSwitch && !(pie || donut || calendar || kpi)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >X-Grid Line Color </p>
                                                                    </div>
                                                                    <div *ngIf="xGridLineColorSwitch" class="toggle toggle-sm on mb-0" (click)="xGridLineColorSwitch = !xGridLineColorSwitch; resetEchartXGridColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!xGridLineColorSwitch" class="toggle toggle-sm off mb-0" (click)="xGridLineColorSwitch = !xGridLineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="xGridLineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="xGridColor"  (ngModelChange)="marksColor($event,1)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                               
                                                                <div *ngIf="!isApexCharts && yGridSwitch && !(pie || donut || calendar || kpi || radar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Y-Grid Line Color </p>
                                                                    </div>
                                                                    <div *ngIf="yGridLineColorSwitch" class="toggle toggle-sm on mb-0" (click)="yGridLineColorSwitch = !yGridLineColorSwitch; resetEchartYGridColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!yGridLineColorSwitch" class="toggle toggle-sm off mb-0" (click)="yGridLineColorSwitch = !yGridLineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="yGridLineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="yGridColor"  (ngModelChange)="marksColor($event,3)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                                <div *ngIf="(table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0) && bandingSwitch" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Banding color </p>
                                                                    </div>
                                                                    <div *ngIf="bandingColorSwitch" class="toggle toggle-sm on mb-0" (click)="bandingColorSwitch = !bandingColorSwitch; resetBandingColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!bandingColorSwitch" class="toggle toggle-sm off mb-0" (click)="bandingColorSwitch = !bandingColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="bandingColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="color1"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                     <ngx-colors *ngIf="bandingColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="color2"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                                <div *ngIf="kpi" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <label for="color">Color</label>
                                                                    <div *ngIf="kpiColorSwitch" class="toggle toggle-sm on mb-0" (click)="kpiColorSwitch = !kpiColorSwitch; resetKpiColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!kpiColorSwitch" class="toggle toggle-sm off mb-0" (click)="kpiColorSwitch = !kpiColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="kpiColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="kpiColor"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                      
     
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="(draggedColumns.length !== 0 || draggedRows.length !==0) && !(kpi || guage)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Sort
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <ng-template>
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <label for="columnName">Column</label>
                                                                    <select id="columnName" [(ngModel)]="sortColumn" style="width: 50%;" (change)="sortType = 0; changeSelectedColumn();">
                                                                        <option value="select" selected disabled>select</option>
                                                                        <option *ngFor="let column of columnNamesForSort; let i = index" [ngValue]="column">
                                                                            @if(column.alias){
                                                                            {{ column.alias }}
                                                                            } @else if(column.field_name){
                                                                            {{ column.field_name }}
                                                                            }
                                                                            @else if(column.type){
                                                                            {{ column.type }} ({{column.column}})
                                                                            }@else{
                                                                            {{ column.column }}
                                                                            }</option>
                                                                    </select>
                                                                </div>
                                                                <div *ngIf="sortColumn != 'select'" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <label for="sorting">Sort by</label>
                                                                    <select id="sorting" [(ngModel)]="sortType" style="width: 50%;" (change)="sortColumns()">
                                                                        <option value="0" selected disabled>select</option>
                                                                        <option value="none">Default</option>
                                                                        <option value="asc">Ascending</option>
                                                                        <option value="desc">Descending</option>
                                                                    </select>
                                                                </div>
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="((pie && chartId) || donut || radar)">
                                                        <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class=""> 
                                                                <p >Legends </p>
                                                            </div>
                                                            <div *ngIf="legendSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('legend')">
                                                                <span></span>
                                                            </div>
                                                            <div *ngIf="!legendSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('legend')">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="legendSwitch" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class="">Allignment</div>
                                                            <div class="btn-group my-2" ngbDropdown>
                                                                <button type="button" ngbDropdownToggle class="btn btn-primary-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                                    {{legendsAllignment}}
                                                                </button>
                                                                <ul class="dropdown-menu" ngbDropdownMenu>
                                                                    <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('top')">Top</a></li>
                                                                    <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('bottom')">Bottom</a></li>
                                                                    <li><a  ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('left')">Left</a></li>
                                                                    <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('right')">Right</a></li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class=""> 
                                                                <p >Data Labels </p>
                                                            </div>
                                                            <div *ngIf="dataLabels" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('dataLabels')">
                                                                <span></span>
                                                            </div>
                                                            <div *ngIf="!dataLabels" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('dataLabels')">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="donut && !isEChatrts" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class="" > 
                                                                <p >Label </p>
                                                            </div>
                                                            <div *ngIf="label" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('label')">
                                                                <span></span>
                                                            </div>
                                                            <div *ngIf="!label" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('label')">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="donut" sclass="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div style="display: flex;justify-content: space-between;">
                                                                <label>Donut Size</label>
                                                                <input type="number" [(ngModel)]="donutSize" min="1" max="100" step="5">
                                                            </div>
                                                        </div>
                                                        <div *ngIf="donut && label && !isEChatrts" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div style="display: flex;justify-content: space-between;">
                                                                <label for="decimalInput">Decimal Places: </label>
                                                            <input style="height: 30px;" type="number" id="decimalInput" [(ngModel)]="donutDecimalPlaces" min="0" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                    
                                                    <div *ngIf="kpi" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <label for="font-size" step="1" >Font Size</label>
                                                        <input type="number" [(ngModel)]="kpiFontSize" style="width: 30%;">
                                                        <!-- <ngx-slider [(ngModel)]="kpiFontSize" [options]="sliderOptions"></ngx-slider> -->
                                                    </div>
                                                   
                                                    <div *ngIf="(((pie && chartId) || donut || bar))  && draggedColumns && draggedColumns.length == 1 && dateList.includes(draggedColumns[0]['data_type'])" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Drilldown
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Date Field </p>
                                                                    </div>
                                                                    <div *ngIf="dateDrillDownSwitch" class="toggle toggle-sm on mb-0" (click)="toggleDateSwitch()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!dateDrillDownSwitch" class="toggle toggle-sm off mb-0" (click)="toggleDateSwitch()">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
                                                                <div cdkDropList cdkDropListOrientation="horizontal" class="example-list" 
                                                                style="position: relative;min-height: 33px; padding: 2px;" 
                                                                #drilldownList="cdkDropList" 
                                                                [cdkDropListData]="draggedDrillDownColumns" 
                                                                (cdkDropListDropped)="drillDownColumndrop($event)">
                                                                    @for(columns of draggedDrillDownColumns;track columns;let index = $index){
                                                                    <div class="example-box border-end" (cdkDragStarted)="dragStartedColumn(index,columns.column)" cdkDrag >
                                                                       
                                                                        {{ columns.column }}
                                                                     <!--  <input type="text" class="form-control example-box border-end" [(ngModel)]="columns.column" value="" (click)="rename(index,columns.column,$event)" (keydown)="renameColumn(index,columns.column,$event)" >-->
                                
                                                                        
                                                                    </div>
                                                                    }
                                                                </div>                                                            
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="guage" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div>
                                                            <label for="minValue">Enter Minimum Value:</label>
                                                            <input type="number" class="form-control fs-14" [(ngModel)]="minValueGuage" id="minValue"  />
                                                          
                                                            <label for="maxValue">Enter Maximum Value:</label>
                                                            <input type="number" class="form-control fs-14" [(ngModel)]="maxValueGuage" id="maxValue"  />
                                                        </div>
                                                    </div>
                                                    <!-- <div *ngIf="bar || funnel && isApexCharts" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <label for="sorting">Sort by: </label>
                                                        <select id="sorting" [(ngModel)]="sortType">
                                                            <option value="0" selected disabled>select</option>
                                                            <option value="none">None</option>
                                                            <option value="ascending">Ascending</option>
                                                            <option value="descending">Descending</option>
                                                        </select>
                                                    </div> -->
                                                </div>
                                            </div>
                                        </ng-template>
                                </li>

                                <li [ngbNavItem]="3">
                                    <a ngbNavLink class="p-1" (click)="getChartSuggestions()">
                                        <button class="copilot-button">
                                            <img src="./assets/images/copilot.gif" alt="Copilot" class="copilot-icon border rounded-5" />
                                        </button>
                                    </a>
                                    <ng-template ngbNavContent>
                                        <div class="tab-pane" id="linktabs">
                                            <div class="copilot-container p-2">
                                                <h6 style="text-align: center;font-weight:900;background-image: linear-gradient(to right, #ff69b4, #00bfff); background-size: 100% 1px; background-position: 0% 100%; color: #fff; padding: 5px;">Genie AIQ</h6>
                                                <div *ngIf="chartSuggestions && chartSuggestions.length > 0" class="chart-suggestions mt-3">
                                                    <button *ngFor="let chart of chartSuggestions" type="button"
                                                        class="btn ripple btn-primary inp-btn d-flex align-items-center"
                                                        (click)="fetchChartData(chart)"
                                                        matTooltip="{{ chart.description }}" matTooltipPosition="above">
                                                        <span class="avatar avatar rounded-circle-copilot mr-2 me-2">
                                                            <img *ngIf="chart.chart_id === 1"
                                                                src="./assets/images/Tiled view sheet icons/table-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 6"
                                                                src="./assets/images/Tiled view sheet icons/bar-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 17"
                                                                src="./assets/images/Tiled view sheet icons/area-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 13"
                                                                src="./assets/images/Tiled view sheet icons/line-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 24"
                                                                src="./assets/images/Tiled view sheet icons/pie-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 7"
                                                                src="./assets/images/Tiled view sheet icons/sideBar-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 5"
                                                                src="./assets/images/Tiled view sheet icons/Stacked-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 4"
                                                                src="./assets/images/Tiled view sheet icons/BarLine-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 2"
                                                                src="./assets/images/Tiled view sheet icons/Hstacked-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 3"
                                                                src="./assets/images/Tiled view sheet icons/HGrouped-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 8"
                                                                src="./assets/images/Tiled view sheet icons/multiline-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 10"
                                                                src="./assets/images/Tiled view sheet icons/donut-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                        </span>
                                                        <span>{{ chart.chart_title }}</span>
                                                    </button>
                                                </div>
                                                <div class="error-mgs" *ngIf="!chartSuggestions || chartSuggestions.length === 0">
                                                    <a *ngIf="!qrySetId" (click)="goToConnections()" style="cursor: pointer;"><span
                                                        class="add-txt text-info">Connect to DataSource</span></a>
                                                    <p *ngIf="errorMessage" [innerHTML]="errorMessage">{{ errorMessage }}</p>
                                                    <p *ngIf="errorMessage1">{{ errorMessage1 }} <a style="cursor: pointer;color: #05aff8;" (click)="routeConfigure()">Add GPT API KEY</a>to proceed.</p>
                                                </div>
                                                <div class="input-group mt-3 inp">
                                                    <input type="text" class="form-control" [(ngModel)]="userPrompt" placeholder="Enter your prompt">
                                                    <div class="input-group-append">
                                                        <!-- <button (click)="startVoiceRecognition()" style="height: 33px; width:33px"> <img
                                                                src="./assets/images/microphone.svg" alt="Micro Phone" /> </button>
                                                        <button class="btn btn-primary inp-send" (click)="sendPrompt()">></button> -->
                                                        <button type="button" class="btn  btn-icon btn-primary-light rounded-pill" (click)="startVoiceRecognition()">
                                                            <i class="fe fe-mic"></i>
                                                        </button>
                                                        <button type="button" class="btn btn-icon btn-primary brround" (click)="sendPrompt()">
                                                                <i class="fa fa-paper-plane-o"></i>
                                                            </button>
                                                    </div>
                                                    <p></p>
                                                    <p style="font-size: 0.6rem;">The art of chart suggestion: not magic, but data-driven</p>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-template>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="panel-body tabs-menu-body p-1 panel-body-h" >
                        <div class="tab-content">
                            <div [ngbNavOutlet]="nav"></div>

                        </div>
                    </div>
                </div>
            </div>
           
        </div>
        <ng-template #viewQueryModal let-modal>
            <div id="largemodal" tabindex="-1" role="dialog">
                <div class=" modal-lg " role="document">
                <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title">Query</h6>
            </div>
            <div class="modal-body viewQuery-hgt">
                
                <div class="form-group select2-sm">
                   <p>{{tablePaginationCustomQuery}}</p>
                </div>
            </div>
            <div class="modal-footer">
                            
                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                    close
                </button>
                <button type="button" class="btn ripple btn-primary" (click)="copyQuery(); modal.close('Save click')">Copy <i class="fa fa-copy"></i></button>
            </div>
            </div>
        </div>
        </div>
        </ng-template>
    </div>