<div class="main-container container-fluid mt-5"> 
    <div class="row" style="position: fixed; width: -webkit-fill-available; padding-right: 25px; padding-left: 9px;">
        <div class="col-xxl-2 col-xl-2 col-lg-3 col-md-3 p-1 mt-3">
            <div class="card mb-0" >
                <div class="card-body p-0 ">
                    <div class="border mb-0 p-3 br-0 border-bottom">
                        <div class="d-flex align-items-center justify-content-between ">
                            <h6 class="mb-0">Connections</h6>
                            <app-insights-button *ngIf="qrySetId" [buttonName]="'Edit'" [classesList]="'add-txt text-info'" [previledgeId]="2" [isBtn]="false"
                            (btnClickEvent)="goToDataSource()" [isIcon]="false"></app-insights-button>
                            <app-insights-button *ngIf="!qrySetId" [buttonName]="'Add'" [classesList]="'add-txt text-info'" [isIcon]="false" [previledgeId]="1" [isBtn]="false"
                            (btnClickEvent)="goToConnections()"></app-insights-button>
                        </div>
                        </div>
                        <div class="border mb-0 p-3 br-0 border-bottom">
                            <h6 class="mb-0">Database</h6>
                            <p class=" mb-0" ngbTooltip="{{database_name}}">{{database_name}}</p> 
                        </div>
                </div>
                <div class="card-body p-1">
                    <div class="input-group justify-content-between">
                    <h6 class="fw-600  mb-0 p-2">Tables</h6>

                    <div class="dashboard-option">
                        <div class=" p-1" ngbDropdown [autoClose]="false" #level1="ngbDropdown">
                            <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                aria-haspopup="true" aria-expanded="false" class="" ><i
                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                            </a>
                            <div class="dropdown-menu" ngbDropdownMenu>
                                <div class=" p-1" ngbDropdown [autoClose]="false" #level2="ngbDropdown">
                                <a class="dropdown-item" ngbDropdownToggle href="javascript:void(0);" > {{isEditCalculatedField ? "Edit Calculated Field" : "Add Calculated Field"}} </a>
                                <div class="dropdown-menu Semantic-layer-card" ngbDropdownMenu>
                                    <!-- <div class="col-lg-12 col-md-10 col-sm-10 col-xl-10 p-0"> -->
                                        <div cdkDropList cdkDropListOrientation="horizontal" class="form-control" 
                                        style="position: relative;min-height: 100px; padding: 2px;" 
                                    #calculatedfields="cdkDropList" 
                                      
                                        (cdkDropListDropped)="calculatedFieldsDrop($event)">
                                            
                                            <div style="max-height: 382px; overflow: scroll; padding: 10px;">
                                                <div class="col-lg-12 col-md-12 p-0 m-0">
                                                        <div class="form-group p-0 mb-0">
                                                            <label class="form-label mb-2">Calculated Field Name <span class="text-red">*</span></label>
                                                            <div class="d-flex">
                                                                <div class="col-6 p-0">
                                                                    <input type="text" placeholder="Enter Field Name" [(ngModel)]="calculatedFieldName"
                                                                    class="mb-2 form-control checkbox-color">
                                                                    <div class="input-group mb-2">
                                                                        <div class="col-lg-6 col-md-6 p-0">
                                                                            <select class="form-select form-select select2 fs-14" [(ngModel)]="calculatedFieldFunction"
                                                                                (change)="calculatedFieldData()">
                                                                                <option value="number">Number</option>
                                                                                <option value="string">String</option>
                                                                                <option value="arithematic">Arithmetic operation</option>
                                                                                <option value="date">Date</option>
                                                                                <option value="logical">Logical</option>
                                                                                <option value="aggregation">Aggregate</option>
                                                                            </select>
                                                                        </div>
                                                                        <div *ngIf="calculatedFieldFunction === 'logical' || calculatedFieldFunction === 'number' || calculatedFieldFunction === 'string' || calculatedFieldFunction === 'date' || calculatedFieldFunction === 'aggregation'" class="col-lg-6 col-md-6 p-0">
                                                                            <select class="form-select form-select select2 fs-14" [(ngModel)]="nestedCalculatedFieldData"
                                                                                (change)="nestedCalculatedFieldFunction()">
                                                                                <option [disabled]="true" value="">select function</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="abs">ABS</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="ceiling">CEILING</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="floor">FLOOR</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'number'" value="round">ROUND</option>

                                                                                <option *ngIf="calculatedFieldFunction === 'logical'" value="ifnull">IF NULL</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'logical'" value="case">CASE</option>
                                                    
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="average">AVG</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="count">COUNT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="countd">COUNTD</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="max">MAX</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="min">MIN</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'aggregation'" value="sum">SUM</option>
                                                    
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="left">LEFT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="right">RIGHT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="mid">MID</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="length">LENGTH</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="trim">TRIM</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="upper">UPPER</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="lower">LOWER</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="replace">REPLACE</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="split">SPLIT</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'string'" value="find">FIND</option>
                                                    
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="dateadd">DATEADD</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="datediff">DATEDIFF</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="datepart">DATEPART</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="now">NOW</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="today">TODAY</option>
                                                                                <option *ngIf="calculatedFieldFunction === 'date'" value="parse">PARSE</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <textarea [readonly]="nestedCalculatedFieldData == 'now' || nestedCalculatedFieldData == 'today'"
                                                                        *ngIf="((calculatedFieldFunction == 'aggregation' || calculatedFieldFunction == 'logical' || calculatedFieldFunction == 'date' || calculatedFieldFunction == 'string' || calculatedFieldFunction == 'number') &&  nestedCalculatedFieldData) || calculatedFieldFunction == 'arithematic'"
                                                                        class="query-text mb-2 px-3" [(ngModel)]="calculatedFieldLogic"
                                                                        placeholder="Drop Column or Enter Logic"></textarea>
                                                                    <div *ngIf="validationMessage" class="alert"
                                                                        [ngClass]="{'alert-success': isValidCalculatedField, 'alert-danger': !isValidCalculatedField}">
                                                                        {{ validationMessage }}
                                                                    </div>
                                                                </div>
                                                                <div class="col-6 p-0" style="margin-left: 8px;">
                                                                        <p class="mb-0  p-2 bg-light mb-3 border rounded-2 description-text" >
                                                                            @if(nestedCalculatedFieldData == 'abs'){
                                                                                <span > <p class="fw-600 mb-0">ABS(number) :<br> </p> Returns the absolute value.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> ABS("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  ABS(-2) = 2 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'ceiling'){
                                                                                <span > <p class="fw-600 mb-0">CEILING(number) :<br> </p> Rounds up to the nearest integer.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> CEILING("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  CEILING(2.63) = 3 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'floor'){
                                                                                <span > <p class="fw-600 mb-0">FLOOR(number) :<br> </p> Rounds down to the nearest integer.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> FLOOR("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  FLOOR(2.65) = 2 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'round'){
                                                                                <span > <p class="fw-600 mb-0">ROUND(number, [decimals]) :<br> </p> Rounds to a specified number of decimals.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> ROUND("tablename"."column_name", [decimals])</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  ROUND(2.65,1) = 2.6 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'ifnull'){
                                                                                <span > <p class="fw-600 mb-0">IFNULL(expression1, expression2) :<br> </p> Returns the first non-null expression.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> COALESCE("tablename"."column_name", 0)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  COALESCE("finance"."Amount", 0) </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'case'){
                                                                                <span > <p class="fw-600 mb-0">CASE :<br> </p> executes conditional logical expression.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> CASE expression WHEN value THEN result ELSE default END</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  case  when "finance"."Amount" > 0 then 1 else 0 end </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'average'){
                                                                                <span > <p class="fw-600 mb-0">AVG(expression) :<br> </p> Returns the average.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> AVG("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  AVG("finance"."Amount") </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'countd'){
                                                                                <span > <p class="fw-600 mb-0">COUNTD(string) :<br> </p> Counts distinct values.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> COUNT( DISTINCT "tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  COUNT(DISTINCT "finance"."Name") </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'max'){
                                                                                <span > <p class="fw-600 mb-0">MAX(expression) :<br> </p> Returns the maximum value.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> MAX("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  MAX("finance"."Amount")  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'min'){
                                                                                <span > <p class="fw-600 mb-0">MIN(expression) :<br> </p> Returns the minimum value.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> MIN("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  MIN("finance"."Amount")  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'sum'){
                                                                                <span > <p class="fw-600 mb-0">SUM(expression) :<br> </p> Returns the total sum.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> SUM("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  SUM("finance"."Amount")  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'left'){
                                                                                <span > <p class="fw-600 mb-0">LEFT(string, number) :<br> </p> Returns the specified number of characters from left part of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LEFT("Tablename"."column_name", number)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  Left('Electronics',3)=Ele </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'right'){
                                                                                <span > <p class="fw-600 mb-0">RIGHT(string, number) :<br> </p> Returns the specified number of characters from right part of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LEFT("Tablename"."column_name", number)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  Left('Electronics',3)=ics </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'mid'){
                                                                                <span > <p class="fw-600 mb-0">substring(string, [from int], [for int]) :<br> </p> Extracts part of a string by giving starting position and the length of the string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> substring("Tablename"."column_name" from [int] for [int])</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  substring('electronics' from 1 for 3)=ele </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'length'){
                                                                                <span > <p class="fw-600 mb-0">LENGTH(string) :<br> </p> Returns the length of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LENGTH("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  Length('electronics') = 12 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'trim'){
                                                                                <span > <p class="fw-600 mb-0">TRIM(string) :<br> </p> Removes spaces at the beginning and end of a string.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> TRIM("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  TRIM('   electronics   ') = 'electronics' </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'upper'){
                                                                                <span > <p class="fw-600 mb-0">UPPER(number) :<br> </p>  Converts a string to uppercase.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> UPPER("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  UPPER('electronics') = ELECTRONICS </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'lower'){
                                                                                <span > <p class="fw-600 mb-0">LOWER(number) :<br> </p>  Converts a string to lowercase.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> LOWER("tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  LOWER('ELECTRONICS') = electronics </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'replace'){
                                                                                <span > <p class="fw-600 mb-0">REPLACE(string, substring, replacement) :<br> </p> Replaces occurrences of substring with replacement.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> REPLACE("tablename"."column_name", substring, replacement)</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  REPLACE('I will do it', 'will do', 'did') = I did it </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'split'){
                                                                                <span > <p class="fw-600 mb-0">split_part(string text, delimiter text, field int) :<br> </p> Splits a given string at a specified character and returns the requested part.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> split_part("Tablename"."column_name", '$',[int])</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  split_part('I will$do it', '$',2) = do it </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'find'){
                                                                                <span > <p class="fw-600 mb-0">position(substring in string) :<br> </p> Returns the position of the first occurrence of substring.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> POSITION([string] in "tablename"."column_name")</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p> POSITION('ctr' IN 'electronics') = 4 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'dateadd'){
                                                                                <span > <p class="fw-600 mb-0">DATEADD (date_field + interval date) :<br> </p> Adds a time interval to a date.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> "tablename"."columnname" + INTERVAL '[int] days' (days/months/years) </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  current_date + INTERVAL '5 days'(days/months/years)  </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'datediff'){
                                                                                <span > <p class="fw-600 mb-0">ABS(number) :<br> </p> Returns the difference between two dates.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> "tablename"."column_name" - "tablename"."column_name"</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  CURRENT_DATE - '2024-10-03' </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'datepart'){
                                                                                <span > <p class="fw-600 mb-0">DATEPART(date_part, date) :<br> </p> Returns a part of the date (year, month, day, etc.).</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> DATE_PART('year', "tablename"."column_name")/DATE_PART('month', "tablename"."column_name")/DATE_PART('date', "tablename"."column_name")
                                                                                    </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  DATE_PART('year', current_timestamp)/DATE_PART('month', current_timestamp)/DATE_PART('date', current_timestamp)
                                                                                 </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'now'){
                                                                                <span > <p class="fw-600 mb-0">Current_timestamp :<br> </p> Returns the current date and time.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> current_timestamp()</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p> current_timestamp() </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'today'){
                                                                                <span > <p class="fw-600 mb-0">Current_date :<br> </p> Returns the current date without the time.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> CURRENT_DATE </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p> CURRENT_DATE </span>
                                                                            }
                                                                            @if(nestedCalculatedFieldData == 'parse'){
                                                                                <span > <p class="fw-600 mb-0">dateparse :<br> </p> converts string to date in specific format .</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> TO_CHAR(Tablename.column_name, 'dd-mm-yyyy') </span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example :<br> </p>  TO_CHAR('2024-12-02', 'dd-mm-yyyy') </span>
                                                                            }
                                                                            @if(calculatedFieldFunction == 'arithematic'){
                                                                                <span > <p class="fw-600 mb-0">expression :<br> </p> evaluate the basic mathematical calculations.</span> <br><br>
                                                                                <span > <p class="fw-600 mb-0">Syntax :<br> </p> "tablename"."column_name" + "tablename"."column_name"</span><br><br>
                                                                                <span > <p class="fw-600 mb-0">Example : 2 + 2 = 4<br> </p>   </span>
                                                                            }
                                                                </div>
                                                            </div>
                                                        </div>
                                            
                                                        <div class="mt-0 d-flex gap-2">
                                                            <button
                                                                [disabled]="!(calculatedFieldLogic  && calculatedFieldName && (calculatedFieldLogic.length > 0 || calculatedFieldName.length > 0))"
                                                                class="btn btn-primary mt-0" (click)="applyCalculatedFields(level2,level1);">Apply </button>
                                                            <button class="btn btn-primary mt-0"
                                                                (click)="isEditCalculatedField = false;level1.close();level2.close()">Close </button>
                                                        </div>
                                                </div>
                                            </div>
                                        </div>             
                                        
                                    <!-- </div> -->
                                    <!-- <button class="dropdown-item filtersBtnWidth" ngbDropdownItem  (click)="test(calculatedfield)"> Create Calculated Field </button> -->
                                   <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                    <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                </div>
                                </div>
                               <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                            </div>
                        </div>
                      </div>
                        
                      
                      </div>
                    <div class="input-group">
                        <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="tableSearch"
                            (keyup.enter)="columnsData()" aria-describedby="button-addon2">
                        <button class="btn btn-primary border me-2" (click)="columnsData()" type="button" id="button-addon2"
                            style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                    </div>
                    <div class="sheet-table-h">
                        @for(columns of tableColumnsData; track columns){
                            @if(!columns.calculated_fields){
                            <div  class="menu-item mb-1">
                                
                            
                            <div class="menu-title" class="example-box border w-100" style=" font-weight: 700;" (click)="toggleSubMenu(columns)">
                                <span class="arrow"> {{ columns.expanded ? '▲' : '▼' }}
                                    {{columns.table_alias}} </span>

                              </div>
                              
                              @if(columns.expanded){
                            <div  cdkDropList 
                            #originList="cdkDropList"
                            [cdkDropListData]="columns.dimensions"
                            [cdkDropListConnectedTo]="[calculatedfields,columnList,rowList,drilldownList]"
                            (cdkDropListDropped)="columndrop($event)"
                            [cdkDropListDisabled]="canDrop" [ngClass]="{'drag-disabled': canDrop}">
                            
                           @for(dimensions of columns.dimensions; track dimensions){
                               <div class="d-flex justify-content-between border border-bottom">
                                <li class="example-box" ngbTooltip="{{dimensions.column}}"
                                (cdkDragStarted)="tableNameMethod(columns.schema,columns.table_name,columns.table_alias)" cdkDrag [cdkDragDisabled]="canDrop" >
                                <span *ngIf="!dateList.includes(dimensions.data_type) && !boolList.includes(dimensions.data_type)" class="abc-txt">abc</span>
                                <span *ngIf="dateList.includes(dimensions.data_type)" class="date-dtype"><i class="fa fa-clock-o"></i></span>
                                <span *ngIf="boolList.includes(dimensions.data_type)" class="date-dtype" style="font-family: 'Times New Roman', Times, serif; font-style: italic;">T|F</span>
                                {{ dimensions.column?.substr(0,15) }}{{ dimensions.column.length > 15 ? '...' : '' }}
                                </li>
                                <div class="dashboard-option">
                                    <div class=" p-1" ngbDropdown>
                                        <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                            aria-haspopup="true" aria-expanded="false" class="" (click)="editFilterCheck(dimensions.column)"><i
                                                class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                        </a>
                                        <div class="dropdown-menu filtersDropDown" ngbDropdownMenu>
                                            <button *ngIf="!filterAdded" class="dropdown-item filtersBtnWidth" ngbDropdownItem  (click)="openSuperScaled(content,dimensions)"> Apply Filters </button>
                                            <a *ngIf="filterAdded" class="dropdown-item" ngbDropdownItem  (click)="openSuperScalededitFilter(contentedit,dimensions)"> Edit Filters </a>
                                           <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                            <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                        </div>
                                    </div>
                                  </div>
                               </div>
                            }
                        </div>
                            <div cdkDropList
                            #originList="cdkDropList"
                            [cdkDropListData]="columns.measures"
                            [cdkDropListConnectedTo]="[calculatedfields,columnList,drilldownList]"
                            (cdkDropListDropped)="rowdrop($event)"
                            [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">
                            
                            @for(measures of columns.measures; track measures){ 
                                <div class="example-box1 border m-0 ps-3 pe-0" ngbTooltip="{{measures.column}}" (cdkDragStarted)="tableNameMethod(columns.schema,columns.table_name,columns.table_alias)" cdkDrag [cdkDragDisabled]="canDrop" ># 
                                    {{ measures.column?.substr(0,18) }}{{ measures.column.length > 18 ? '...' : '' }}
                                    <div class="dashboard-option">
                                        <div class=" p-1" ngbDropdown>
                                            <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                aria-haspopup="true" aria-expanded="false" class="" (click)="editFilterCheck(measures.column)"><i
                                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                            </a>
                                            <div class="dropdown-menu" ngbDropdownMenu>
                                                <a *ngIf="!filterAdded" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="openSuperScaled(content,measures)"> Apply Filters </a>
                                                <a *ngIf="filterAdded" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="openSuperScalededitFilter(contentedit,measures)"> Edit Filters </a>
                                               <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                                <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                            </div>
                                        </div>
                                      </div>
                                </div>
                            }
                            </div>
                      }
                            </div>
                        } @else if(columns.calculated_fields?.length){
                            <div  class="menu-item mb-1">
                                
                            
                                <div class="menu-title" class="example-box border w-100" style=" font-weight: 700;" (click)="toggleSubMenu(columns)">
                                    <span class="arrow"> {{ columns.expanded ? '▲' : '▼' }}
                                        Calculated Fields </span>
    
                                  </div>
                                  <div cdkDropList
                                  #originList="cdkDropList"
                                  [cdkDropListData]="columns.calculated_fields"
                                  [cdkDropListConnectedTo]="[calculatedfields,columnList,rowList,drilldownList]"
                                  (cdkDropListDropped)="rowdrop($event)"
                                  [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">  
                                  @if(columns.expanded){    
                                                            
                                @for(measures of columns.calculated_fields; track measures){ 
                                    <div class="example-box1 border m-0 ps-3 pe-0" ngbTooltip="{{measures.field_name}}" (cdkDragStarted)="tableNameMethod(columns.schema,columns.table_name,columns.table_alias)" cdkDrag [cdkDragDisabled]="canDrop" ># 

                                    <!-- <div class="example-box1 border m-0 ps-3 pe-0" ngbTooltip="{{measures.field_name}}" >#  -->
                                        {{ measures.field_name?.substr(0,18) }}{{ measures.field_name.length > 18 ? '...' : '' }}
                                        <div class="dashboard-option">
                                            <div class=" p-1" ngbDropdown>
                                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                aria-haspopup="true" aria-expanded="false" class="" (click)="editFilterCheck(measures.field_name)"><i
                                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                            </a>
                                                <div class="dropdown-menu" ngbDropdownMenu>
                                                    <button *ngIf="!filterAdded" class="dropdown-item filtersBtnWidth" ngbDropdownItem  (click)="openSuperScaled(content,measures)"> Apply Filters </button>
                                                    <a *ngIf="filterAdded" class="dropdown-item" ngbDropdownItem  (click)="openSuperScalededitFilter(contentedit,measures)"> Edit Filters </a>
                                                    <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="level1.open();isEditCalculatedField = true;fetchCalculatedFields(measures.id);level2.open();"> Edit Calculated Field </a>
                                                   <!-- <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Export</a>
                                                    <a class="dropdown-item" ngbDropdownItem href="javascript:void(0);"> Delete</a>-->
                                                </div>
                                            </div>
                                          </div>
                                    <!-- </div> -->
                                    </div>
                                }
                                
                          }
                        </div>
                                </div>
                        }
                        }
                      </div>
                      <ng-template #content let-modal>
                        <div class="modal-header">
                          <h6 class="modal-title">Filters</h6>
                          <button type="button"class="btn-close"aria-label="Close"(click)="isAllSelected = false;modal.dismiss('Cross click')">
                          </button>
                        </div>
                       <!-- <div class="modal-body p-0">
                              <div class="table-responsive" style="max-height: 400px;">
                                <table class="table table-bordered text-nowrap mb-0 custom-table" >
                                    <tbody>
                                       <tr>
                                        <td>
                                        <div class="form-check">
                                            <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                        </div>
                                        </td>
                                        <td>
                                            <label for="selectAll" class="form-check-label">Select All</label>
                                        </td>
                                       </tr>
                                       @for(data of filterData;track data){
                                        @if(data?data:''){
                                         <tr class="border-bottom user-list" >
                                           
                                            <td style="width: 46px;">
                                                <div class="form-check">
                                                    <input type="checkbox" name="checkbox" id="defaultCheck1" [checked]="data.selected" class="form-check-input" (click)="filterCheck($event,data)">    
                                                </div>
                                            </td>
                                            <td>
                                                <label for="defaultCheck1" class="form-check-label"> {{data}} </label>
                                            </td>
                                         </tr>
                                          }
                                        }             
                                    </tbody>
                                </table>
                            </div>
                
                        </div>-->
                        <div class="modal-body" style="height: 500px; overflow: scroll;">
                            @if(dateList.includes(filterType)){
                                <div class="card panel panel-primary">
                                    <div class="tab-menu-heading tab-menu-heading-boxed">
                                        <div class="tabs-menu-boxed">
                                            <ul ngbNav #nav="ngbNav" [(activeId)]="activeTabId" class="nav panel-tabs fs-14" >
                                                <li [ngbNavItem]="1">
                                                    <a ngbNavLink class="p-3">General</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane active" id="activetabs">
                                                            <div style="display: flex;">
                                                                <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="filterSearch" (keyup.enter)="searchFilterList()" aria-describedby="button-addon2" >
                                                                <button class="btn btn-primary border me-2" (click)="searchFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                            </div>
                                                            <div *ngFor="let data of filterData | test: editFilterSearch : 'label'">
                                                            <!-- @for(data of filterData;track data){ -->
                                                                @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                <div class="form-check">
                                                                    <input type="checkbox" name="checkbox" id="defaultCheck1" [checked]="data.selected" class="form-check-input"
                                                                        (click)="filterCheck($event,data.label)">
                                                                    <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                </div>
                                                                <!-- } -->
                                                            }
                                                        </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                                <li [ngbNavItem]="2">
                                                    <a ngbNavLink class="p-3">Range of dates</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane" id="linktabs">
                                                            <div class="card-body">
                                                                <div class="date-box">
                                                                    <input type="text" id="input" [(ngModel)]="minDate" class="form-control date-box-width">
                                                                    <input type="text" id="input" [(ngModel)]="maxDate" class="form-control date-box-width">
                                                                </div>
                                                                <div id="merging-tooltips">
                                                                  <ngx-slider 
                                                                  [(value)]="minValue"
                                                                  [(highValue)]="maxValue"
                                                                  [options]="options"
                                                                  (valueChange)="updateDateRange()"
                                                                  (highValueChange)="updateDateRange()"
                                                                ></ngx-slider>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                            </ul>
                                            <div class="panel-body tabs-menu-body p-1 panel-body-h">
                                                <div class="tab-content">
                                                    <div [ngbNavOutlet]="nav"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }@else{
                                <div style="display: flex;">
                                    <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="filterSearch" (keyup.enter)="searchFilterList()" aria-describedby="button-addon2" >
                                    <button class="btn btn-primary border me-2" (click)="searchFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                    <label for="defaultCheck1" class="form-check-label"> Select All </label>
                                </div>
                                <div *ngFor="let data of filterData | test: filterSearch : 'label'">
                                <!-- @for(data of filterData;track data){ -->
                                    @if(data? data : (boolList.includes(filterType)? true: '')){
                                        <div class="form-check">
                                            <input type="checkbox" name="checkbox" id="defaultCheck1" [checked]="data.selected"  [(ngModel)]="data.selected" class="form-check-input"
                                                (click)="filterCheck($event,data.label)">
                                            <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                        </div>
                                    }
                                    </div>
                                <!-- } -->
                            }
                        </div>
                        <div class="modal-footer">
                            <div class="col text-left p-0">
                                <input type="checkbox" id="exclude" [(ngModel)]="isExclude" class="form-check-input">
                                <label for="exclude" class="form-check-label">Exclude</label>
                            </div>
                            <div class="text-right">
                                <button [disabled]="!(filterDataArray?.length > 0 || filterDateRange.length > 0)" type="button"
                                    class="btn ripple btn-primary me-2" (click)="filterDataPut();isAllSelected = false; modal.dismiss('Cross click')">Apply</button>
                                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click');isAllSelected = false;">
                                    Close
                                </button>
                            </div>
                        </div>
                      </ng-template>

                      <ng-template #contentedit let-modal>
                        <div class="modal-header">
                          <h6 class="modal-title"> Edit Filter</h6>
                          <button type="button"class="btn-close"aria-label="Close"(click)="isAllSelected = false;modal.dismiss('Cross click')">
                          </button>
                        </div>
                        <div class="modal-body"  style="height: 500px; overflow: scroll;">

                            @if(dateList.includes(filterType)){
                                <div class="card panel panel-primary">
                                    <div class="tab-menu-heading tab-menu-heading-boxed">
                                        <div class="tabs-menu-boxed">
                                            <ul ngbNav #nav="ngbNav" [(activeId)]="activeTabId" class="nav panel-tabs fs-14" >
                                                <li [ngbNavItem]="1">
                                                    <a ngbNavLink class="p-3">General</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane active" id="activetabs">
                                                            <div style="display: flex;">
                                                                <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                                                <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                            </div>
                                                            @for(data of filterData;track data){
                                                                @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                    <div class="form-check">
                                                                        <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                        <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                    </div>
                                                                }
                                                            }
                                                        </div>
                                                    </ng-template>
                                                </li>
                                                <li [ngbNavItem]="2">
                                                    <a ngbNavLink class="p-3">Range of dates</a>
                                                    <ng-template ngbNavContent>
                                                        <div class="tab-pane" id="linktabs">
                                                            <div class="card-body">
                                                                <div class="date-box">
                                                                    <input type="text" id="input" [(ngModel)]="minDate" class="form-control date-box-width">
                                                                    <input type="text" id="input" [(ngModel)]="maxDate" class="form-control date-box-width">
                                                                </div>
                                                                <div id="merging-tooltips">
                                                                  <ngx-slider 
                                                                  [(value)]="minValue"
                                                                  [(highValue)]="maxValue"
                                                                  [options]="options"
                                                                  (valueChange)="updateDateRange()"
                                                                  (highValueChange)="updateDateRange()"
                                                                ></ngx-slider>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-template>
                                                </li>
                                            </ul>
                                            <div class="panel-body tabs-menu-body p-1" style="height: 578px;">
                                                <div class="tab-content">
                                                    <div [ngbNavOutlet]="nav"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }@else{
                                <div style="display: flex;">
                                    <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                    <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                    <label for="defaultCheck1" class="form-check-label"> Select All </label>
                                </div>
                                <div *ngFor="let data of filterData | test: editFilterSearch : 'label'">
                                <!-- @for(data of filterData;track data){ -->
                                    @if(data? data : (boolList.includes(filterType)? true: '')){
                                        <div class="form-check">
                                            <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                            <label for="defaultCheck1" class="form-check-label"> {{data.label}}</label>
                                        </div>
                                    }
                                    </div>
                                <!-- } -->
                            }

                            <!-- <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="searchFilterList()" aria-describedby="button-addon2" >
                            <button class="btn btn-primary border me-2" (click)="searchFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                            @for(data of filterData;track data){
                            <div class="form-check">
                                <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                            </div>
                        } -->
                        </div>
                        <div class="modal-footer">
                            <div class="col text-left p-0">
                                <input type="checkbox" id="exclude" [(ngModel)]="isExclude" class="form-check-input">
                                <label for="exclude" class="form-check-label">Exclude</label>
                            </div>
                            <div class="text-right">
                                <button [disabled]="!(filterDataArray?.length > 0)" type="button" class="btn ripple btn-primary me-2"
                                    (click)="filterDataEditPut();isAllSelected = false; modal.dismiss('Cross click')">Apply</button>
                                <button type="button" class="btn ripple btn-secondary" (click)="isAllSelected = false;modal.close('Save click');">
                                    Close
                                </button>
                            </div>
                        </div>
                      </ng-template>
                     
                     
                     
                </div>
                
            </div>
        </div>
        <div class="col-xxl-8 col-xl-8 col-lg-7 col-md-7 p-1 mt-3">
           <div class="card p-0 mb-1">
           
                <div class="card p-0 mb-1">
                    <div class="card-body title-padding" style="padding: 4px 4px 4px 17px;">
                        <div class="row align-items-center">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12 maind-flex" >
                            <div class="col-lg-10 col-md-10 col-sm-10 col-xl-10 p-1" >
                                <div class="title-container" *ngIf="!editor">
                                    <input *ngIf="!retriveDataSheet_id && titleShow && !editor" (click)="editor =true" id="inptele" type="text" placeholder="Sheet Name" aria-label="Sheet" class="form-control" [(ngModel)]="sheetTitle" (input)="sheetNameChange(sheetTitle,$event)">
                                    <span *ngIf="(retriveDataSheet_id || !titleShow) && !editor" (click)="titleShow =true; editor =true" id="htmlContent" [innerHtml]="sheetTagTitle" [ngStyle]="{'padding-top': sheetTagName[0] === '<' ? '1.5%' : '0'}"></span>
                                    <!-- <ckeditor *ngIf="editor" placeholder="Sheet Name" [editor]="Editor" [config]="editorConfig" [(ngModel)]="sheetTagName"></ckeditor> -->
                                    <span class="title-editor" (click)="toggleEditor()">
                                        <button class="btn btn-primary"><i class="fa fa-pencil"></i></button>
                                    </span>
                                </div> 
                                <ckeditor *ngIf="editor" placeholder="Sheet Name" (ready)="$event.editing.view.focus();" [editor]="Editor" [config]="editorConfig" [(ngModel)]="sheetTagName" (ngModelChange)="updateSheetName()"></ckeditor>
                                <!-- <ckeditor *ngIf="!editor" placeholder="Sheet Name" (click)="editor =true" [editor]="Editor" [config]="editorConfig1" [(ngModel)]="sheetTagName"></ckeditor> -->
                                <!-- <div *ngIf="editor" class="popup">
                                    <div class="popup-content">
                                    <ckeditor placeholder="Sheet Name" [editor]="Editor" [config]="editorConfig" [(ngModel)]="sheetTagName"></ckeditor>
                                    <div class="buttons">
                                        <button class="btn btn-danger" (click)="toggleEditor()">Close</button>
                                        <button class="btn btn-primary" (click)="updateSheetName(); toggleEditor(); titleShow = false">Update</button>
                                    </div>
                                    </div>
                                </div> -->
                            </div>

                            <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 p-1" style="display: flex;justify-content: space-evenly;">
                                <div [class.disabled]="draggedColumnsData.length == 0 && draggedRowsData.length == 0">
                                    <!-- <button  class="btn btn-primary w-100" (click)="sheetSave()">Save </button>
                                    <button class="btn btn-primary w-100" (click)="sheetSave()">update </button> -->
                                    <app-insights-button *ngIf="!retriveDataSheet_id" [buttonName]="'Save'" [classesList]="'btn btn-primary update-btn '" [isIcon]="false" [previledgeId]="17" [isBtn]="true"
                                    (btnClickEvent)="sheetSave(); editor=false"></app-insights-button>
                                    <app-insights-button *ngIf="retriveDataSheet_id" [buttonName]="'Update'" [classesList]="'btn btn-primary update-btn '" [isIcon]="false" [previledgeId]="18" [isBtn]="true"
                                    (btnClickEvent)="sheetSave(); editor=false" [ngClass]="{'disabled': sheetTagName.length<1}"></app-insights-button>
                                </div>
                                <div [class.disabled]="draggedColumnsData.length == 0 && draggedRowsData.length == 0">
                                    <app-insights-button [classesList]="'viewQueryImg'" [previledgeId]="72" [isBtn]="true"
                                        (btnClickEvent)="viewQuery(viewQueryModal)"  [isIcon]="false" [toolTip]="' View Query'"
                                        [ngClass]="{'disabled': sheetTagName.length < 1}" [imageUrl]="'./assets/images/icons/view-query.png'">
                                    </app-insights-button>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
        
                <div class="card-body" style="padding: 2px 16px;" (click)="editor =false">
                    <div class="row align-items-center mb-1">
                        <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 p-0">
                            <div class="card-area d-flex gap-2">
                                <label for="inputName" class="form-control mb-0 column-text">Columns</label>
                            </div>
                        </div>
                        <div class="col-lg-10 col-md-10 col-sm-10 col-xl-10 p-0" >
                            
                                <div cdkDropList cdkDropListOrientation="horizontal" class="example-list form-control" 
                                style="position: relative;min-height: 33px; padding: 2px;" 
                                #columnList="cdkDropList" 
                                [cdkDropListData]="draggedColumns" 
                                (cdkDropListDropped)="columndrop($event)"
                                [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">
                                    @for(columns of draggedColumns;track columns;let index = $index){
                                    <div class="example-box border-end" (cdkDragStarted)="dragStartedColumn(index,columns.column)" cdkDrag >
                                        @if(columns.type){
                                            {{ columns.type }} ({{columns.column}})
                                        } @else if(columns.field_name) {
                                            {{ columns.field_name }}
                                        } @else {   
                                            {{ columns.column }}
                                            <!--  <input type="text" class="form-control example-box border-end" [(ngModel)]="columns.column" value="" (click)="rename(index,columns.column,$event)" (keydown)="renameColumn(index,columns.column,$event)" >-->
                                        }

                                     <div class="dropup" ngbDropdown>
                                        <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                        <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                            <div  *ngIf="dateList.includes(columns.data_type)" class="dropup" ngbDropdown style="display: flex; align-items: center;">
                                                <li class="dropdown-item" ngbDropdownItem style="display: inline-block;text-align: center !important;">Date</li>
                                                <i class="fe fe-chevron-right fs-18 text-body-secondary dropdown-toggle" style="display: inline-block;" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                    <li><a [ngClass]="columns.type === 'year' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'year')">Year (2024)</a></li>
                                                    <li><a [ngClass]="columns.type === 'quarter' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'quarter')">Quarter</a></li>
                                                    <li><a [ngClass]="columns.type === 'month' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'month')">Month (January)</a></li>
                                                    <li><a [ngClass]="columns.type === 'day' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'day')">Day (1-31)</a></li>
                                                    <li><a [ngClass]="columns.type === 'weekdays' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'weekdays')">Week Day (1-7)</a></li>
                                                    <li><a [ngClass]="columns.type === 'week numbers' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'week numbers')">Week Number (0-52)</a></li>
                                                    <!-- <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'weekname')">Week Name (Mon-Sun)</a></li> -->
                                                    <li><a [ngClass]="columns.type === '' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateFormat(columns,index,'')">None</a></li>  
                                                </ul>
                                            </div>
                                            <div  *ngIf="dateList.includes(columns.data_type)" class="dropup" ngbDropdown style="display: flex; align-items: center;">
                                                <li class="dropdown-item" ngbDropdownItem style="display: inline-block;text-align: center !important;">Measure</li>
                                                <i class="fe fe-chevron-right fs-18 text-body-secondary dropdown-toggle" style="display: inline-block;" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                    <li><a [ngClass]="columns.type === 'min' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'min')">Min</a></li>
                                                    <li><a [ngClass]="columns.type === 'max' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'max')">Max</a></li>
                                                    <li><a [ngClass]="columns.type === 'count' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'count')">Count</a></li>
                                                    <li><a [ngClass]="columns.type === 'count_distinct' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'count_distinct')">Count (Distinct)</a></li>
                                                    <li><a [ngClass]="columns.type === '' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="dateAggregation(columns,index,'')">None</a></li>  
                                                </ul>
                                            </div>
                                            <li><a class="btn btn-secondary-light mx-0" style="text-align: center !important;width: 100%;" (click)="dragStartedColumn(index,columns.column)"> Remove</a>  </li>
                                        </ul>
                                    </div>

                                        <!-- <div class="" ngbDropdown style="margin-top: 5px;">
                                            <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                aria-haspopup="true" aria-expanded="false" class=""><i class="fe fe-chevron-down fs-18 text-body-secondary"></i>
                                                
                                                <div class="dropdown-menu  cu" ngbDropdownMenu>
                                                    <a *ngIf="dateList.includes(columns.data_type)" class="btn btn-outline-light mx-0 mb-2" (click)="openDateFormatModal(dateFunctionsModal)" style="text-align: left !important;"> Date</a>
                                                    <a class="btn btn-secondary-light mx-0" style="text-align: left !important;" (click)="dragStartedColumn(index,columns.column)"> Remove</a> 
                                                    
                                                </div>

                                            </a>
                                        </div> -->
                                        <ng-template #dateFunctionsModal let-modal>
                                            <div class="modal-header">
                                                <h6 class="modal-title">Date Functions</h6>
                                                <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                                                </button>
                                            </div>
                                        
                                            <div class="modal-body" style="height: 500px; overflow: scroll;">
                                                <div class="card-body p-0">
                                                    <div class="column-card">
                                                        <p class="fw-semibold mb-1 ">Row : {{columns.column}}</p>
                                                    </div>
                                                    <div class="aggregate-card mt-3">
                                                        <p class="fw-semibold mb-1 ">Date Extractions</p>
                                                        <select class="form-control" [(ngModel)]="dateValue" (change)="dateFormat(columns,index,dateValue)">
                                                            <option [selected] value="-Select-">-Select-</option>
                                                            <option value="year">Year (2024)</option>
                                                            <option value="month">Month (January)</option>
                                                            <option value="day">Day (1-31)</option>
                                                            <option value="weekdays">Week Day (1-7)</option>
                                                            <option value="week numbers">Week Number (0-52)</option>
                                                            <option value="weekname">Week Name (Mon-Sun)</option>
                                                            <option value="">None</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                                                    Close
                                                </button>
                                            </div>
                                        </ng-template>
                                    </div>
                                    }
                                </div> 
                                
                             <!--   <ul style=" bottom: 15px; left: -5px;  position: relative;" class="nav nav-pills fs-12 justify-content-end" role="tablist" id="footer-tab border-1" ngbnav="" >
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-right">
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-left" class="fa fa-caret-left"></i>
                                        </button>
                                    </li>
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-left" (click)="rightArrow()" >
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-right" class="fa fa-caret-right" > </i>
                                        </button>
                                    </li>
                                </ul>  -->                       
                            
                        </div>
                    </div>
                    <div class="row align-items-center mb-1">
                        <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 p-0" style="overflow: auto; white-space: nowrap;">
                            <div class="card-area d-flex gap-2">
                                <label for="inputName" class="form-control mb-0 row-text">Rows</label>
                            </div> 
                        </div>
                        <div class="col-lg-10 col-md-10 col-sm-10 col-xl-10 p-0">
                           
                                <div cdkDropList cdkDropListOrientation="horizontal" class="example-list form-control" style="
                                position: relative; min-height: 33px; padding: 2px;"
                                #rowList="cdkDropList" 
                                [cdkDropListData]="draggedRows" 
                                (cdkDropListDropped)="rowdrop($event)"
                                [cdkDropListDisabled]="canDrop"  [ngClass]="{'drag-disabled': canDrop}">
                                    @for(rows of draggedRows;track rows;let index = $index){
                                    <div class="example-box1 border-end" style="cursor: pointer;" (cdkDragStarted)="dragStartedRow(index,rows.column)"  cdkDrag>
                                        @if(rows.alias){
                                            {{ rows.alias }}
                                        } @else if(rows.field_name){
                                            {{ rows.field_name }}
                                        }
                                        @else if(rows.type){
                                            {{ rows.type }} ({{rows.column}})
                                        }@else{   
                                             {{ rows.column }}
                                        }
                                        <div class="dropup" ngbDropdown>
                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                <div class="dropup" ngbDropdown >
                                                    <li  *ngIf="!isMeasureEdit" style="    padding: 0.5rem 0.5rem 0.5rem 2.8rem !important;">@if(rows.alias){
                                                        {{ rows.alias }}
                                                    }
                                                    @else if(rows.type){
                                                        {{ rows.type }} ({{rows.column}})
                                                    }@else if(rows.field_name){
                                                        {{ rows.field_name }}
                                                    }
                                                    @else{   
                                                         {{ rows.column }}
                                                    } <i (click)="isMeasureEdit = true;" class="fa fa-pencil ms-1" style="float: right; padding-top: 5px;"></i> </li>
                                                    <li  *ngIf="isMeasureEdit"><input (blur)="onAliasChange(rows, index)" type="text" placeholder="Enter Filter Name" [(ngModel)]="rows.alias" class="form-control checkbox-color">
                                                    </li>
                                                    <div class="d-flex" style="align-items: center;">
                                                    <li class="dropdown-item" ngbDropdownItem style="display: inline-block;text-align: center !important;">Aggregation</li>
                                                    <i class="fe fe-chevron-right fs-18 text-body-secondary dropdown-toggle" style="display: inline-block;" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                </div>
                                                    <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'sum' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'sum')">Sum</a></li>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'avg' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'avg')">Avg</a></li>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'min' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'min')">Min</a></li>
                                                        <li *ngIf="!stringList.includes(rows.data_type)"><a [ngClass]="rows.type === 'max' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'max')">Max</a></li>
                                                        <li><a [ngClass]="rows.type === 'count' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count')">Count</a></li>
                                                        <li><a [ngClass]="rows.type === 'count_distinct' ? 'aggregation-select' : ''" class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count_distinct')">Count (Distinct)</a></li>
                                                        <li><a [ngClass]="rows.type === '' ? 'aggregation-select' : ''"class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'')">None</a></li>  
                                                    </ul>
                                                </div>
                                                <li> <a class="btn btn-secondary-light mx-0" style="text-align: center !important;width: 100%;" (click)="dragStartedRow(index,rows.column)"> Remove</a> </li>
                                            </ul>
                                        </div>
                                        <!-- <div class="dropup" ngbDropdown>
                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                <div class="dropup" ngbDropdown>
                                                   
                                                    <li  *ngIf="!isMeasureEdit" class=" text-center">@if(rows.alias){
                                                        {{ rows.alias }}
                                                    }
                                                    @else if(rows.type){
                                                        {{ rows.type }} ({{rows.column}})
                                                    }@else{   
                                                         {{ rows.column }}
                                                    }  <i (click)="isMeasureEdit = true;" class="fa fa-pencil "></i> 
                                                    </li>
                                                   
                                               
                                                    <li  *ngIf="isMeasureEdit"><input  type="text" placeholder="Enter Filter Name" [(ngModel)]="rows.alias" class=" dropdown-item form-control checkbox-color" style="cursor: auto;">
                                                    </li>
                                                    <div class="d-flex" style="align-items: center;">
                                                        <li class="dropdown-item" ngbDropdownItem style="display: inline-block;text-align: center !important;">Aggregation</li>
                                                        <i class="fe fe-chevron-right fs-18 text-body-secondary dropdown-toggle" style="display: inline-block;" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                    </div>
                                                    <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                        <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'sum')">Sum</a></li>
                                                        <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'avg')">Avg</a></li>
                                                        <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'min')">Min</a></li>
                                                        <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'max')">Max</a></li>
                                                        <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count')">Count</a></li>
                                                        <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count_distinct')">Count (Distinct)</a></li>
                                                        <li><a class="dropdown-item" ngbDropdownItem href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'')">None</a></li>  
                                                    </ul>
                                                </div>
                                                <li> <a class="btn btn-secondary-light mx-0" style="text-align: center !important;width: 100%;" (click)="dragStartedRow(index,rows.column)"> Remove</a> </li>
                                            </ul>
                                        </div> -->

                                        <!-- <div class="" ngbDropdown>
                                            <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                aria-haspopup="true" aria-expanded="false" class=""><i class="fe fe-chevron-down fs-18 text-body-secondary"></i>
                                                
                                                <div class="dropdown-menu  cu" ngbDropdownMenu style="float: right;">
                                                    <div class="d-inline-block float-right" ngbDropdown>
                                                        <a class="btn btn-outline-light mx-0 " data-bs-toggle="dropdown" ngbDropdownToggle  style="text-align: left !important; width: 65%;"> Aggregation
                                                            <i class="fe fe-chevron-right fs-18 text-body-secondary"></i>
                                                            <div class="dropdown-menu  cu" ngbDropdownMenu>
                                                                <a class="dropdown-item" href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'sum')">Sum</a>
                                                                <a class="dropdown-item" href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'avg')">Avg</a>
                                                                <a class="dropdown-item" href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'min')">Min</a>
                                                                <a class="dropdown-item" href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'max')">Max</a>
                                                                <a class="dropdown-item" href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count')">Count</a>
                                                                <a class="dropdown-item" href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'count_distinct')">Count (Distinct)</a>
                                                                <a class="dropdown-item" href="javascript:void(0);" (click)="rowMeasuresCount(rows,index,'')">None</a>
                                                            </div>
                                                        </a> 
                                                    </div>
                                                    <a class="btn btn-secondary-light mx-0" style="text-align: left !important;width: 65%;" (click)="dragStartedRow(index,rows.column)"> Remove</a> 
                                                </div>

                                            </a>
                                        </div> -->
                                        <ng-template #aggregateUserModal let-modal>
                                            <div class="modal-header">
                                                <h6 class="modal-title">Aggregated measures</h6>
                                                <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                                                </button>
                                            </div>
                                        
                                            <div class="modal-body" style="height: 500px; overflow: scroll;">
                                                <div class="card-body p-0">
                                                    <div class="column-card">
                                                        <p class="fw-semibold mb-1 ">Row : {{rows.column}}</p>
                                                    </div>
                                                    <div class="aggregate-card mt-3">
                                                        <p class="fw-semibold mb-1 ">Aggregate</p>
                                                        <select class="form-control" [(ngModel)]="measureValue"
                                                            (change)="rowMeasuresCount(rows,index,measureValue)">
                                                            <option [selected] value="-Select-">-Select-</option>
                                                            <option value="sum">Sum</option>
                                                            <option value="avg">Avg</option>
                                                            <option value="min">Min</option>
                                                            <option value="max">Max</option>
                                                            <option value="count">Count</option>
                                                            <option value="count_distinct">Count(Distinct)</option>
                                                            <option value="">None</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                                                    Close
                                                </button>
                                            </div>
                                        </ng-template>
                                        <!-- <i class="fe fe-more-vertical fs-18 text-body-secondary" (click)="openSuperScaledModal(aggregateModal)"></i> -->
                                       <!--  <i class="fe fe-more-vertical fs-18 text-body-secondary" (click)="toggleDropdown()"></i>
                                        <select  class="form-control" [(ngModel)]="measureValue" [class.show]="isDropdownVisible" (change)="rowMeasuresCount(rows,index,measureValue)">
                                            <option value="sum">Sum</option>
                                            <option value="avg">Avg</option>
                                            <option value="min">Min</option>
                                            <option value="max">Max</option>
                                            <option value="count">Count</option>
                                          </select>
                                         <div class="dropdown">
                                            <button (click)="toggleDropdown()" class="dropdown-button">
                                              <span>▼</span> 
                                            </button>
                                            <div class="dropdown-content" [class.show]="isDropdownVisible">
                                                <select  class="form-control" [(ngModel)]="measureValue"  (change)="rowMeasuresCount(rows,index,measureValue)">
                                                    <option value="sum">Sum</option>
                                                    <option value="avg">Avg</option>
                                                    <option value="min">Min</option>
                                                    <option value="max">Max</option>
                                                    <option value="count">Count</option>
                                                  </select>
                                            </div>
                                          </div>-->
                                        
                                    </div>
                                    }
                                </div>  
                               <!-- <ul style=" bottom: 15px; left: -5px;  position: relative;" class="nav nav-pills fs-12 justify-content-end" role="tablist" id="footer-tab border-1" ngbnav="" >
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-right">
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-left" class="fa fa-caret-left"></i>
                                        </button>
                                    </li>
                                    <li role="presentation" class="nav-item">
                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnRowStyle span-left">
                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-right" class="fa fa-caret-right"> </i>
                                        </button>
                                    </li>
                                </ul> -->                         
                            
                        </div>
                    </div>
                    <div  [ngStyle]="{'display': ((bar || pie || donut) && draggedColumns && draggedColumns.length > 0 ? '' : 'none')}" class="row align-items-center">
                                                <div class="col-lg-2 col-md-2 col-sm-2 col-xl-2 p-0" style="overflow: auto; white-space: nowrap;">
                                                   <div class="card-area d-flex gap-2">
                                                       <label for="inputName" class="form-control mb-0">Hierarchy</label>
                                                   </div> 
                                                </div>
                                            <div class="col-lg-10 col-md-10 col-sm-10 col-xl-10 p-0">
                                                    <div cdkDropList cdkDropListOrientation="horizontal" class="example-list form-control" 
                                                    style="position: relative;min-height: 33px; padding: 2px;" 
                                                #drilldownList="cdkDropList" 
                                                    [cdkDropListData]="draggedDrillDownColumns" 
                                                    (cdkDropListDropped)="drillDownColumndrop($event)">
                                                        @for(columns of draggedDrillDownColumns;track columns;let index = $index){
                                                        <div class="example-box border-end" cdkDrag >
                                                            {{ columns }}
                                                            <div class="" ngbDropdown style="margin-top: 5px;">
                                                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                                    aria-haspopup="true" aria-expanded="false" class=""><i class="fe fe-chevron-down fs-18 text-body-secondary"></i>
                                                                <div class="dropdown-menu  cu" ngbDropdownMenu>
                                                                        <a class="btn btn-secondary-light mx-0" style="text-align: left !important;" (click)="removeDrillDownColumn(index,columns)"> Remove</a>     
                                                                    </div>
                                                                </a>
                                                        </div>
                                                       </div>
                                                        }
                                                    </div>             
                                                    
                                                </div>
                                            </div>
                </div>
            </div>
                    
            <div class="card mb-0 show-chart-card">
                @if(!(table || kpi)){
                    <div class="input-group">
                <div class="col-lg-3 col-md-3 p-1">
                    <select class="form-select form-select select2 fs-14" [(ngModel)]="selectedChartPlugin"
                        (change)="changeChartPlugin()">
                        <option *ngIf="!(radar || calendar || map)" value="apex">Apex</option>
                        <option *ngIf="!(guage)" value="echart">EChart</option>
                    </select>
                </div>
                @if((pie || bar || donut) && draggedDrillDownColumns && draggedDrillDownColumns.length > 0){
                                    <div class="col-lg-3 col-md-3 p-1">
                                        <button class="btn btn-primary " (click)="goDrillDownBack()" style="padding: 4px;">
                                            <img src="./assets/images/Tiled view sheet icons/Drill-Down.png" alt="logo" class="w-5 h-5"> </button>
                                   </div>
                                    @if(drillDownObject && drillDownObject.length > 0 && drillDownIndex > 0 && draggedDrillDownColumns && draggedDrillDownColumns.length > 0){
                                    <div class="col-lg-3 col-md-3 d-flex mt-2" >
                                        @for(column of drillDownObject;track column;let index = $index){
                                       <h6 class="ms-1 mb-0 p-1" > {{drillDownObject[index][draggedDrillDownColumns[index]]}}</h6> <span style="padding-top: 3px;">-></span>
                                   }
                                    </div>
                                }
                                }
                                   </div>
                }
                @if(table && chartId){
                <div class="sheet-search">
                    <div class="">
                    </div>
                    <div *ngIf="table &&(draggedRows.length > 0 || draggedColumns.length > 0 )" class="input-group mt-1 p-1 sheet-table-search">
                        <input type="text" placeholder="Search" aria-describedby="button-addon2" [(ngModel)]="tableChartSearch" (keyup.enter)="tableDisplayPaginationSearch()" class="form-control border-end-0 ">
                        <button type="button" id="button-addon2" class="btn btn-primary border me-2" (click)="tableDisplayPaginationSearch()" style="border-radius: 0px 4px 4px 0px;">
                        <i class="fe fe-search"></i></button>
                    </div>
                   </div>
                }
                 <div class="card-body p-1" style="display: flex; justify-content: center; align-items: center; overflow-y: scroll;">
                    <!-- @for(tab of tabs;track tab; let index = $index){ -->
                       
                        <!-- @if((tab.sheet_name || tab) === sheetName){ -->
                          
                            <div class="body table-responsive" style="max-height:385px;padding: 0px;">
                                
                                @if(table && chartId){
                                <table>
                                    <thead>
                                      <tr [ngStyle]="{ 'font-family': headerFontFamily, 'font-size': headerFontSize, 
                                      'font-style': headerFontStyle, 'text-decoration': headerFontDecoration, 'color': headerFontColor }">
                                        @for(column of tableColumnsDisplay;track column){
                                        <th [ngStyle]="{ 'text-align': headerFontAlignment, 'font-weight': headerFontWeight }">{{ column }}
                                            <!-- <span class=" p-1" style="float: inline-end;" ngbDropdown>
                                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                  aria-haspopup="true" aria-expanded="false" class=""><i
                                                    class="fe fe-more-vertical fs-18 text-body-secondary"></i>
                                                </a>
                                                <div class="dropdown-menu" ngbDropdownMenu>
                                                  <button class="dropdown-item" (click)="tableColumnSort('default', column)">Default</button>
                                                  <button class="dropdown-item" (click)="tableColumnSort('ascending', column)">Ascending</button>
                                                  <button class="dropdown-item" (click)="tableColumnSort('descending', column)">Descending</button>
                                                </div>
                                            </span> -->
                                        </th>
                                        }
                                      </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let row of (tableDataDisplay| paginate: { itemsPerPage: itemsPerPage,
                                                                currentPage: page,
                                                                totalItems: totalItems }) ; let i = index"
                                        [ngClass]="bandingSwitch ? (i % 2 === 0 ? 'even-row' : 'odd-row') : ''"
                                        [ngStyle]="{'background-color': (i % 2 === 0 ? color1 : color2)}"
                                        [ngStyle]="{ 'font-family': tableDataFontFamily, 'font-size': tableDataFontSize, 'font-weight': tableDataFontWeight,
                                        'font-style': tableDataFontStyle, 'text-decoration': tableDataFontDecoration, 'color': tableDataFontColor }">
                                        @for(column of tableColumnsDisplay;track column){
                                        <td [ngStyle]="{ 'text-align': tableDataFontAlignment }">{{ row[column] }}</td>
                                        }
                                    </tr>
                                    
                                    </tbody>
                                  </table>
                                  <pagination-controls *ngIf="table &&(draggedRows.length > 0 || draggedColumns.length > 0 )" previousLabel="Prev" nextLabel="Next" (pageChange)="pageChangeTableDisplay((page = $event))"></pagination-controls>
                                }
                                @if(kpi && chartId){
                                    <div class="big-number-container">
                                        <!-- @for(data of tablePreviewRow;track data){ -->
                                            <h1 class="big-number" [style.font-size]="getFontSize()" [style.color]="kpiColor">{{ KPINumber }}</h1>
                                        <!-- } -->
                                    </div>
                                }
                                @if(isApexCharts){
              @if(bar && chartId){
              <!--<h6>Bar Chart</h6>
              <figure id="bar"></figure>-->

              <div class="card-body">
                <div id="bar-chart" class="chartfit">
                    <apx-chart #barChart 
                    [series]="chartOptions3.series"
                    [chart]="chartOptions3.chart" 
                    [title]="chartOptions3.title"
                    [xaxis]="chartOptions3.xaxis"
                    [yaxis]="chartOptions3.yaxis"
                    [grid]="chartOptions3.grid"
                    [plotOptions]="chartOptions3.plotOptions"
                    [dataLabels]="chartOptions3.dataLabels"
                    [fill]="chartOptions3.fill"
                    [colors]="chartOptions3.colors">
                    </apx-chart>
                </div>
            </div>
              }
              @if(area && chartId){
                <div class="card-body">
                    <div id="area-chart">
                        <apx-chart #areaChart
                        [series]="chartOptions1.series" [chart]="chartOptions1.chart"
                        [xaxis]="chartOptions1.xaxis" [stroke]="chartOptions1.stroke"
                        [dataLabels]="chartOptions1.dataLabels" [yaxis]="chartOptions1.yaxis"
                        [labels]="chartOptions1.labels" [legend]="chartOptions1.legend"  [grid]="chartOptions1.grid"
                        [title]="chartOptions1.title" [subtitle]="chartOptions1.subtitle"[colors]="chartOptions1.colors"></apx-chart>
                    </div>
                </div>
              }
              @if(line && chartId){
                <div class="card-body">
                    <div id="line-chart">
                        <apx-chart #lineChart
                        [series]="chartOptions.series || []" [chart]="chartOptions.chart"
                        [xaxis]="chartOptions.xaxis" [dataLabels]="chartOptions.dataLabels" [yaxis]="chartOptions.yaxis"
                        [grid]="chartOptions.grid" [stroke]="chartOptions.stroke"
                        [title]="chartOptions.title" [colors]="chartOptions.colors"></apx-chart>
                    </div>
                </div>
              }
              @if(pie && chartId){
             <!-- <h6>Pie Chart</h6>
             <figure id="pie"></figure>-->
             <div class="card-body">
                <div id="pie-basic">
                    <apx-chart #piechart
                    [series]="chartOptions4.series" [chart]="chartOptions4.chart" [legend]="chartOptions4.legend"
                    [labels]="chartOptions4.labels" [responsive]="chartOptions4.responsive" [colors]="chartOptions4.colors" [dataLabels]="chartOptions4.dataLabels"></apx-chart>
                </div>
            </div>
              }
              
             
              @if(sidebyside && chartId){
                <div class="card-body">
                    <div id="column-chart">
                        <apx-chart #sidebyside
                        [series]="chartOptions2.series" [chart]="chartOptions2.chart"
                        [dataLabels]="chartOptions2.dataLabels" [plotOptions]="chartOptions2.plotOptions"
                        [yaxis]="chartOptions2.yaxis" [legend]="chartOptions2.legend" [fill]="chartOptions2.fill"
                        [stroke]="chartOptions2.stroke" [tooltip]="chartOptions2.tooltip" [colors]="chartOptions2.colors" [grid]="chartOptions2.grid"
                        [xaxis]="chartOptions2.xaxis"></apx-chart>
                    </div>
                </div>
              }
              @if(stocked){
                <div id="chart">
                    <apx-chart #stocked
                      [series]="chartOptions6.series"
                      [chart]="chartOptions6.chart"
                      [dataLabels]="chartOptions6.dataLabels"
                      [plotOptions]="chartOptions6.plotOptions"
                      [responsive]="chartOptions6.responsive"
                      [xaxis]="chartOptions6.xaxis"
                      [yaxis]="chartOptions6.yaxis"
                      [legend]="chartOptions6.legend"
                      [fill]="chartOptions6.fill"
                      [grid]="chartOptions6.grid"
                    ></apx-chart>
                  </div>
              }
             @if(barLine){
                <div class="card-body">
                    <div id="mixed-linecolumn">
                        <apx-chart #barline
                        [series]="chartOptions5.series" [chart]="chartOptions5.chart"
                        [yaxis]="chartOptions5.yaxis" [xaxis]="chartOptions5.xaxis" [labels]="chartOptions5.labels"
                        [stroke]="chartOptions5.stroke" [title]="chartOptions5.title"  [grid]="chartOptions5.grid"
                        [dataLabels]="chartOptions5.dataLabels" [fill]="chartOptions5.fill"
                        [tooltip]="chartOptions5.tooltip"[colors]="chartOptions5.colors"></apx-chart>
                    </div>
                </div>
             }
             @if(horizentalStocked){
                <div id="chart">
                    <apx-chart #horizentalstocked
                      [series]="chartOptions7.series"
                      [chart]="chartOptions7.chart"
                      [dataLabels]="chartOptions7.dataLabels"
                      [plotOptions]="chartOptions7.plotOptions"
                      [responsive]="chartOptions7.responsive"
                      [xaxis]="chartOptions7.xaxis"
                      [yaxis]="chartOptions7.yaxis"
                      [grid]="chartOptions7.grid"
                      [legend]="chartOptions7.legend"
                      [fill]="chartOptions7.fill"
                    ></apx-chart>
                  </div>
              }
              @if(grouped){
                <div id="chart">
                    <apx-chart #grouped
                      [series]="chartOptions8.series"
                      [chart]="chartOptions8.chart"
                      [dataLabels]="chartOptions8.dataLabels"
                      [plotOptions]="chartOptions8.plotOptions"
                      [responsive]="chartOptions8.responsive"
                      [xaxis]="chartOptions8.xaxis"
                      [yaxis]="chartOptions8.yaxis"
                      [grid]="chartOptions8.grid"
                      [legend]="chartOptions8.legend"
                      [fill]="chartOptions8.fill"
                    ></apx-chart>
                  </div>
              }
              @if(multiLine){
                <div id="chart">
                    <apx-chart #multiline
                    [series]="chartOptions9.series"
                    [chart]="chartOptions9.chart"
                    [xaxis]="chartOptions9.xaxis"
                    [stroke]="chartOptions9.stroke"
                    [tooltip]="chartOptions9.tooltip"
                    [dataLabels]="chartOptions9.dataLabels"
                    [legend]="chartOptions9.legend"
                    [markers]="chartOptions9.markers"
                    [grid]="chartOptions9.grid"
                    [yaxis]="chartOptions9.yaxis"
                    [title]="chartOptions9.title"
                  ></apx-chart>
                  </div>
              }
              @if(donut){
                <div id="donutchart">
                <apx-chart #donutchart
                    [series]="chartOptions10.series"
                    [chart]="chartOptions10.chart"
                    [labels]="chartOptions10.labels"
                    [responsive]="chartOptions10.responsive"
                    [plotOptions] = "chartOptions10.plotOptions"
                    [dataLabels]="chartOptions10.dataLabels"
                    [legend]="chartOptions10.legend" >
                </apx-chart>
                  </div>
              }
              @if(heatMap){
                <div id="chart">
                    <apx-chart #heatmapchart
                      [series]="heatMapChartOptions.series"
                      [chart]="heatMapChartOptions.chart"   
                      [xaxis]="heatMapChartOptions.xaxis"
                      [yaxis]="heatMapChartOptions.yaxis"
                      [plotOptions]="heatMapChartOptions.plotOptions"
                      [dataLabels]="heatMapChartOptions.dataLabels"
                      [legend]="heatMapChartOptions.legend"
                      [grid]="heatMapChartOptions.grid"
                    ></apx-chart>
                  </div>
              }
              @if(funnel){
                <div id="chart">
                    <apx-chart #funnelChart
                      [series]="funnelChartOptions.series"
                      [chart]="funnelChartOptions.chart"
                      [dataLabels]="funnelChartOptions.dataLabels"
                      [plotOptions]="funnelChartOptions.plotOptions"
                      [xaxis]="funnelChartOptions.xaxis"
                      [colors]="funnelChartOptions.colors"
                      [title]="funnelChartOptions.title"
                      [legend]="funnelChartOptions.legend"></apx-chart>
                      </div>
                    }
              @if(guage){
                <div id="chart">
                    <apx-chart #guageChart
                      [series]="guageChartOptions.series"
                      [chart]="guageChartOptions.chart"   
                      [xaxis]="guageChartOptions.xaxis"
                      [yaxis]="guageChartOptions.yaxis"
                      [plotOptions]="guageChartOptions.plotOptions"
                      [dataLabels]="guageChartOptions.dataLabels"
                      [legend]="guageChartOptions.legend"
                      [grid]="guageChartOptions.grid"
                      [labels]="guageChartOptions.labels"
                       [tooltip]="guageChartOptions.tooltip"
                         [fill]="guageChartOptions.fill"
                        [stroke]="guageChartOptions.stroke"
                    ></apx-chart>
                  </div>
              }
            } @else {
            @if(bar && chartId){         
            <div class="card-body">
                <div >
                    <div echarts [options]="eBarChartOptions" class="echart-charts"></div>
                </div>
            </div>          
            }
            @if(funnel && chartId){         
                <div class="card-body">
                    <div id="bar-chart">
                        <div id="echartsBar" echarts [options]="eFunnelChartOptions" class="echart-charts"></div>
                    </div>
                </div>
                }
            @if(stocked && chartId){         
                <div class="card-body">
                    <div id="stockedbar-chart">
                        <div id="echartsBar" echarts [options]="eStackedBarChartOptions" class="echart-charts"></div>
                    </div>
                </div>
                }
                @if(sidebyside && chartId){         
                    <div class="card-body">
                        <div id="sidebysidebar-chart">
                            <div id="echartsBar" echarts [options]="eSideBySideBarChartOptions" class="echart-charts"></div>
                        </div>
                    </div>
                    }
            @if(grouped && chartId){         
                    <div class="card-body">
                        <div id="groupedbar-chart">
                            <div id="echartsBar" echarts [options]="eGroupedBarChartOptions" class="echart-charts"></div>
                        </div>
                    </div>
            }
            @if(horizentalStocked && chartId){         
                <div class="card-body">
                    <div id="bhstockedar-chart">
                        <div id="echartsBar" echarts [options]="ehorizontalStackedBarChartOptions" class="echart-charts"></div>
                    </div>
                </div>
        }
                
            @if(area && chartId){
            <div class="card-body">
                <div id="area-chart">
                    <div id="echartsBar" echarts [options]="eAreaChartOptions" class="echart-charts"></div>
                </div>
            </div>
            }
            @if(line && chartId){
            <div class="card-body">
                <div id="line-chart">
                    <div id="echartsBar" echarts [options]="eLineChartOptions" class="echart-charts"></div>
                </div>
            </div>
            }
            @if(pie && chartId){
            <div class="card-body">
                <div id="pie-chart">
                    <div id="echartsBar" echarts [options]="ePieChartOptions" class="echart-charts"></div>
                </div>
            </div>
            }
            @if(donut && chartId){
                <div class="card-body">
                    <div id="donut-chart">
                        <div id="echartsBar" echarts [options]="eDonutChartOptions" class="echart-charts"></div>
                    </div>
                </div>
                }
            @if(barLine && chartId){
                <div class="card-body">
                    <div id="barline-chart">
                        <div id="echartsBar" echarts [options]="eBarLineChartOptions" class="echart-charts"></div>
                    </div>
                </div>
                }
                @if(multiLine && chartId){
                    <div class="card-body">
                        <div id="multiline-chart">
                            <div id="echartsBar" echarts [options]="eMultiLineChartOptions" class="echart-charts"></div>
                        </div>
                    </div>
                    }
            @if(radar && chartId){
                <div class="card-body">
                    <div id="radar-chart">
                        <div id="echartsBar" echarts [options]="eRadarChartOptions" class="echart-charts"></div>
                    </div>
                </div>
                }
                @if(map && chartId){
                    <div class="card-body">
                        <div id="map-chart">
                            <!-- <app-map-echart  [chartRowData]="chartsRowData" [chartColumnData]="chartsColumnData"></app-map-echart> -->
                            <div id="echartsBar" echarts [options]="eMapChartOptions" class="echart-charts"></div>  
                        </div>
                    </div>
                    }
                    
                @if(calendar){
                    <div class="card-body">
                        <div id="calender-chart" style="height: 100vh; overflow-y: scroll;">
                            <div id="echartsBar" echarts [options]="eCalendarChartOptions" class="chart-container"></div>  
                        </div>
                    </div>
                }
                @if(heatMap){
                    <div class="card-body">
                        <div id="heatmap-chart">
                            <div id="echartsBar" echarts [options]="eHeatMapChartOptions" class="echart-charts">
                            </div>
                        </div>
                    </div>
                }
            }
            </div>
        <!-- } -->
        <!-- }-->
                 </div>
                    <div class="card-footer d-flex p-2" style="overflow-x: scroll; overflow-y: hidden;">
                        <mat-tab-group [selectedIndex]="selectedTabIndex"
                        (selectedIndexChange)="selected.setValue($event)"
                        (selectedTabChange)="onChange($event);" 
                        >
                        @for(tab of tabs;track tab; let index = $index){
           <mat-tab  [label]="tab.sheet_name || tab">
          <!--  <br>  <br>
             Contents for {{tab}} tab
         
             <button mat-raised-button
                     class="example-delete-tab-button"
                     [disabled]="tabs.length === 1"
                     (click)="removeTab(index)">
               Delete Tab
             </button>
              <br> <br> <br>-->
           </mat-tab>
         }
         </mat-tab-group>
         
                        <ul ngbnav="" id="footer-tab border-1 " role="tablist" class="nav nav-pills fs-12 " style=" display: contents;">
                            <!--  <li role="presentation" class="nav-item">
                                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle span-right">
                                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-left" class="fa fa-caret-left"></i>
                                                        </button>
                                                    </li>
                                                    <li role="presentation" class="nav-item">
                                                       <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle span-left">
                                                            <i data-bs-toggle="tooltip" ngbtooltip="fa fa-caret-right" class="fa fa-caret-right"></i>
                                                        </button>
                                                    </li>
                                                    <li role="presentation" class="nav-item">
                                                        <button type="button " ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-23" aria-disabled="false" aria-controls="ngb-nav-23-panel" class="nav-link BtnNewStyle active"> Sheet 1</button>
                                                    </li>
                                                    <li role="presentation" class="nav-item">
                                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle">Sheet 2</button>
                                                    </li>
                                                    <li role="presentation" class="nav-item">
                                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle">Sheet 3</button>
                                                    </li>
                                                    <li role="presentation" class="nav-item">
                                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle">Sheet 4</button>
                                                    </li>
                                                    <li role="presentation" class="nav-item">
                                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle">Sheet 5</button>
                                                    </li>
                                                    <li role="presentation" class="nav-item">
                                                        <button type="button" ngbnavlink="" data-bs-toggle="tab" role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle">Sheet 6</button>
                                                    </li>-->
                            <div>
                                <li role="presentation" class="nav-item">
                                    <button type="button" ngbnavlink="" [class.disabled]="SheetSavePlusEnabled.length>0" data-bs-toggle="tab"
                                        role="tab" aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1"
                                        class="nav-link BtnNewStyle" (click)="addSheet(false)" style="padding: 14px;">
                                        <i class="fa fa-plus-square-o"></i>
                                    </button>
                                </li>
                            </div>
                            <li role="presentation" class="nav-item">
                                <button type="button" ngbnavlink="" [class.disabled]="!retriveDataSheet_id" data-bs-toggle="tab" role="tab"
                                    aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle"
                                    (click)="removeTab()" style="padding: 14px;">
                                    <i class="fe fe-trash"></i>
                                </button>
                            </li>
                            <li role="presentation" class="nav-item">
                                <button type="button" ngbnavlink="" ngbtooltip="Duplicate Sheet" [class.disabled]="!retriveDataSheet_id" data-bs-toggle="tab" role="tab"
                                    aria-selected="true" id="ngb-nav-24" aria-disabled="false" tabindex="-1" class="nav-link BtnNewStyle"
                                    (click)="sheetDuplicate()" style="padding: 14px;">
                                    <i class="fa fa-copy"></i>
                                </button>
                            </li>
                        </ul>
                        <div *ngIf="!sheetsDashboard && database_name" style="display: flex;justify-content: center;height: 50px;"><button (click)="openSelectDashboard(content)" class="nav-link BtnNewStyle px-2" style="width: max-content;">Move to Dashboard</button>
                            <ng-template #content let-modal>
                                <div class="modal-header">
                                    <h6 class="modal-title">Move to Dashboard</h6>
                                    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p>Add to Dashboard</p>
                                    <div class="form-group select2-sm">
                                        <select id="inputGroupSelect013" class="form-select form-select select2 fs-14"  [(ngModel)]="selectedDashboardId">
                                            <option value="0" disabled selected>Select a Dashboard</option>
                                            <option *ngFor="let dashboard of dashboardList" [value]="dashboard.dashboard_id">{{dashboard.dashboard_name}}</option>
                                        </select>
                                    </div>
                                    <button class="btn btn-primary " (click)="gotoDashboard(); modal.close('Save click')"> New Dashboard</button>
                                </div>
                            
                            
                                <div class="modal-footer">
                            
                                    <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                                        Cancel
                                    </button>
                                    <button type="button" class="btn ripple btn-primary" [disabled]="!selectedDashboardId" (click)="moveToDashboard(); modal.close('Save click')">Ok</button>
                                </div>
                            </ng-template>
                        </div>
                        <div *ngIf="sheetsDashboard" style="display: flex;justify-content: center;"><button (click)="moveToDashboard()" class="nav-link BtnNewStyle px-2">view Dashboard</button></div>        
                    </div>
                </div>

             </div>
             <div class="col-xxl-2 col-xl-2 col-lg-2 col-md-2 mt-3 p-1">
                <div class="card panel panel-primary">
                    <div class="tab-menu-heading tab-menu-heading-boxed">
                        <div class="tabs-menu1">
                            <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav panel-tabs fs-14" style="justify-content: space-between;">

                                <li [ngbNavItem]="1">
                                    <a ngbNavLink class="p-1">Data</a>
                                    <ng-template ngbNavContent>
                                        <div class="tab-pane active" id="activetabs">
                                            <div class="border  mb-1 filter-card-height" >
                                                <div class="card-header justify-content-start align-items-center">
                                                    <div class="card-title fs-12">Filters </div>
                                                </div>
                                                <div class="card-body p-1">
                                                    @for(dimen of dimetionMeasure;track dimen;let index = $index){
                                                    <div class="example-box justify-content-start border-bottom" style="cursor: pointer;"> 
                                                       {{dimen.col_name}}
                                                       <div class="filter-icons">
                                                        <i class="fe fe-edit fs-12 text-body-secondary ms-2" (click)="openSuperScalededitFilter(contentedit,dimen)"></i>
                                                        <i class="fe fe-trash fs-12 text-body-secondary ms-1" (click)="filterDelete(index,dimen.filter_id)"></i>
                                                    </div>
                                                    </div>
                                                }
                                                </div>
                                                <ng-template #contentedit let-modal>
                                                    <div class="modal-header">
                                                      <h6 class="modal-title"> Edit Filter</h6>
                                                      <button type="button"class="btn-close"aria-label="Close"(click)="isAllSelected = false;modal.dismiss('Cross click')">
                                                      </button>
                                                    </div>
                                                    <div class="modal-body"  style="height: 500px; overflow: scroll;">
                                                        <!-- <div class="input-group">
                                                            <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch"
                                                                (keyup.enter)="editFilterList()" aria-describedby="button-addon2">
                                                            <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2"
                                                                style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                        </div> -->
                                                        @if(dateList.includes(filterType)){
                                                            <div class="card panel panel-primary">
                                                                <div class="tab-menu-heading tab-menu-heading-boxed">
                                                                    <div class="tabs-menu-boxed">
                                                                        <ul ngbNav #nav="ngbNav" [(activeId)]="activeTabId" class="nav panel-tabs fs-14" >
                                                                            <li [ngbNavItem]="1">
                                                                                <a ngbNavLink class="p-3">General</a>
                                                                                <ng-template ngbNavContent>
                                                                                    <div class="tab-pane active" id="activetabs">
                                                                                        <div style="display: flex;">
                                                                                            <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch" (keyup.enter)="editFilterList()" aria-describedby="button-addon2" >
                                                                                            <button class="btn btn-primary border me-2" (click)="editFilterList()" type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                                                        </div>
                                                                                        @for(data of filterData;track data){
                                                                                            @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                                                <div class="form-check">
                                                                                                    <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                                                    <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                                                                </div>
                                                                                            }
                                                                                        }
                                                                                    </div>
                                                                                </ng-template>
                                                                            </li>
                                                                            <li [ngbNavItem]="2">
                                                                                <a ngbNavLink class="p-3">Range of dates</a>
                                                                                <ng-template ngbNavContent>
                                                                                    <div class="tab-pane" id="linktabs">
                                                                                        <div class="card-body">
                                                                                            <div class="date-box">
                                                                                                <input type="text" id="input" [(ngModel)]="minDate" class="form-control date-box-width">
                                                                                                <input type="text" id="input" [(ngModel)]="maxDate" class="form-control date-box-width">
                                                                                            </div>
                                                                                            <div id="merging-tooltips">
                                                                                              <ngx-slider 
                                                                                              [(value)]="minValue"
                                                                                              [(highValue)]="maxValue"
                                                                                              [options]="options"
                                                                                              (valueChange)="updateDateRange()"
                                                                                              (highValueChange)="updateDateRange()"
                                                                                            ></ngx-slider>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </ng-template>
                                                                            </li>
                                                                        </ul>
                                                                        <div class="panel-body tabs-menu-body p-1" style="height: 578px;">
                                                                            <div class="tab-content">
                                                                                <div [ngbNavOutlet]="nav"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }@else{
                                                            <div style="display: flex;">
                                                                <input type="text" class="form-control border-end-0 " placeholder="Search" [(ngModel)]="editFilterSearch"  aria-describedby="button-addon2" >
                                                                <button class="btn btn-primary border me-2"  type="button" id="button-addon2" style="border-radius: 0px 4px 4px 0px;"><i class="fe fe-search "></i></button>
                                                            </div>
                                                            <div class="form-check">
                                                                <input type="checkbox" id="selectAll" [(ngModel)]="isAllSelected" (change)="toggleEditAllRows($event)" class="form-check-input">
                                                                <label for="defaultCheck1" class="form-check-label"> Select All </label>
                                                            </div>
                                                            <!-- @for(data of filterData;track data | filter: editFilterSearch){ -->
                                                                <div *ngFor="let data of filterData | test: editFilterSearch : 'label'">
                                                                @if(data? data : (boolList.includes(filterType)? true: '')){
                                                                    <div class="form-check">
                                                                        <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                                        <label for="defaultCheck1" class="form-check-label"> {{data.label}}</label>
                                                                    </div>
                                                                }
                                                                </div>
                                                            <!-- } -->
                                                        }

                                                        <!-- @for(data of filterData;track data){
                                                        <div class="form-check">
                                                            <input type="checkbox" name="checkbox" id="defaultCheck1" [(ngModel)]="data.selected" class="form-check-input" (click)="filterCheck($event,data.label)">    
                                                            <label for="defaultCheck1" class="form-check-label"> {{data.label}} </label>
                                                        </div>
                                                    } -->
                                                    </div>
                                                    <div class="modal-footer">
                                                        <div class="col text-left p-0">
                                                            <input type="checkbox" id="exclude" [(ngModel)]="isExclude" class="form-check-input">
                                                            <label for="exclude" class="form-check-label">Exclude</label>
                                                        </div>
                                                        <div class="text-right">
                                                            <button [disabled]="!(filterDataArray?.length > 0 || filterDateRange.length > 0)" type="button"
                                                                class="btn ripple btn-primary me-2" (click)="filterDataEditPut(); isAllSelected = false;modal.dismiss('Cross click')">Apply</button>
                                                            <button type="button" class="btn ripple btn-secondary" (click)="isAllSelected = false;modal.close('Save click')">
                                                                Close
                                                            </button>
                                                        </div>
                                                    </div>
                                                  </ng-template>
                                            </div>
                                            <div class="border mb-1 charts-card-height">
                                                <div class="card-header justify-content-between align-items-center">
                                                    <div class="card-title fs-12">Charts</div>
                                                </div>
                                                <div class="card-body" style=" padding: 2px 12px;">
                                                    <div class="row">
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': draggedRows.length<1 && draggedColumns.length<1}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Table" tooltipClass="tooltip-primary" (click)="chartDisplay(true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,1);tableDisplayPagination();"><img src="./assets/images/charts/Table-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': table}"></a>
                                                        </div>
                                                        <div class="card-title fs-12 mt-2 mb-1 border bg-light rounded-2" style="text-align: center;">Single Axis</div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Bar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,6)"><img src="./assets/images/charts/Bar-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': bar}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)} ">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Area" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,17)"><img src="./assets/images/charts/area-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': area}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Line" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,13)"><img src="./assets/images/charts/Line-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': line}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Pie" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,24)"><img src="./assets/images/charts/pie-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon " [ngClass]="{'active': pie}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled':  (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Donut" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,10)"><img src="./assets/images/charts/doughnut-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon " [ngClass]="{'active': donut}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled':  (draggedRows.length>1 || draggedColumns.length>1) || draggedRows.length<1 || draggedColumns.length>0}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Kpi" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,25)"><img src="./assets/images/charts/kpi-icon.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': kpi}"></a>
                                                        </div>
                                                        <div *ngIf="isApexCharts" class="col-3 px-2 mt-2" [ngClass]="{'disabled':  (draggedRows.length>1 || draggedColumns.length>1) || draggedRows.length<1 || draggedColumns.length>0 || guagechartRowData > 1 }">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="guage" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,28)"><img src="./assets/images/charts/gauge-icon-new.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': guage}"></a>
                                                        </div>
                                                        <div *ngIf="isEChatrts" class="col-3 px-2 mt-2" [ngClass]="{'disabled': !dateList.includes(draggedColumnsData[0]?.[1]) && (draggedRows.length !== 1 || draggedColumns !== 1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Calendar Chart" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,11)"><img src="./assets/images/charts/calendar-chart.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': calendar}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': (draggedRows.length>1 || draggedColumns.length>1) || ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Funnel Chart" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,27)"><img src="./assets/images/charts/funnelChart-icon.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': funnel}"></a>
                                                        </div>
                                                        <div class="card-title fs-12 mt-2 mb-1 border bg-light rounded-2" style="text-align: center;">Dual Axis</div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Side-Bar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,7)"><img src="./assets/images/charts/bar-bar.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': sidebyside}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Stacked-Bar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,false,5)"><img src="./assets/images/charts/stocked_bar.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon " [ngClass]="{'active': stocked}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': draggedRows.length !== 2 || draggedColumns.length<1}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Bar-Line" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,false,4)"><img src="./assets/images/charts/Bar-line.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': barLine}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="HStacked" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,2)"><img src="./assets/images/charts/horizental-stacked.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': horizentalStocked}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="HGrouped" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,false,3)"><img src="./assets/images/charts/Bar-bar-horizental.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': grouped}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);" triggers="hover" ngbTooltip="Multi-Line" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,false,false,8)"><img src="./assets/images/charts/multi-line-new.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': multiLine}"></a>
                                                        </div>
                                                        <div *ngIf="isEChatrts" class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Radar" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,false,false,12)"><img src="./assets/images/charts/spider.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': radar}"></a>
                                                        </div>
                                                        <div class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length<1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="Heat Map" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false,26)"><img src="./assets/images/charts/heatmap-new.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': heatMap}"></a>
                                                        </div>
                                                        <div *ngIf="isEChatrts" class="col-3 px-2 mt-2" [ngClass]="{'disabled': ( draggedRows.length<1 || draggedColumns.length!=1)}">
                                                            <a href="javascript:void(0);"  triggers="hover" ngbTooltip="World Map" tooltipClass="tooltip-primary" (click)="chartDisplay(false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,false,29)"><img src="./assets/images/charts/world-map.png" class="rounded-2 w-90 mrk-t border p-1 chart-icon" [ngClass]="{'active': map}"></a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- <div *ngIf="isApexCharts && !(table && chartId)" class="card mb-0 marks-card-height" >
                                                <div class="card-header justify-content-between align-items-center">
                                                    <div class="card-title fs-12">Marks </div>
                                                </div>
                                                <div class="card-body" style=" padding: 2px 12px;">
                                                    <div class="row"> 
                                                        <div *ngIf="!barlineChart" class="col-3 px-2 m-1 border text-center sub-menu-item">
                                                            <div class="" ngbDropdown>
                            
                                                            <ngx-colors 
                                                           ngx-colors-trigger 
                                                           [(ngModel)]="color"  (ngModelChange)="marksColor2($event)"
                                                           [format] = "'hex'"
                                                            ></ngx-colors>
                                                                <span class="mark-txt fs-11">Color</span>
                                                            </div>
                                                            
                                                        </div>
                                                        <div *ngIf="barlineChart" class="col-3 px-2 m-1 border text-center sub-menu-item">
                                                            <div class="" ngbDropdown>
                                                                <ngx-colors ngx-colors-trigger [(ngModel)]="barColor" (ngModelChange)="marksColor2($event)" [format]="'hex'"></ngx-colors>
                                                                <span class="mark-txt fs-11">bar color</span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="barlineChart" class="col-3 px-2 m-1 border text-center sub-menu-item">
                                                            <div class="" ngbDropdown>
                                                                <ngx-colors ngx-colors-trigger [(ngModel)]="lineColor" (ngModelChange)="marksColor2($event)" [format]="'hex'"></ngx-colors>
                                                                <span class="mark-txt fs-11">line color</span>
                                                            </div>
                                                        </div>
                                                        <div class="col-3 px-2 m-1 border text-center sub-menu-item">
                                                            <a href="javascript:void(0);">
                                                                <img src="./assets/images/marks/title.png" alt="img" class="rounded-2 w-70 mrk-t mt-1">
                                                            </a>
                                                            <span class="mark-txt fs-11">Text</span>
                                                        </div>
                                                        <div class="col-3 px-2 m-1 border text-center sub-menu-item">
                                                            <div class="" ngbDropdown>
                                                                <a href="javascript:void(0);" data-bs-toggle="dropdown" role="button" ngbDropdownToggle
                                                                    aria-haspopup="true" aria-expanded="false" class=""><img _ngcontent-ng-c394438746="" src="./assets/images/marks/size.png" alt="img" class="rounded-2 w-70 mrk-t mt-1">
                                                                </a>
                                                                <div class="dropdown-menu p-3" ngbDropdownMenu>
                                                                    <input type="range" class="form-range" id="customRange1">
                                                                </div>
                                                            </div>
                                                            <span class="mark-txt fs-11">Size</span>
                                                        </div>
                                                        <div class="col-3 px-1 m-1 border text-center sub-menu-item">
                                                            <a href="javascript:void(0);">
                                                                <img src="./assets/images/marks/tooltip.png" alt="img" class="rounded-2 w-70 mrk-t mt-1">
                                                            </a>
                                                            <span class="mark-txt fs-11">Tooltip</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> -->
                                        </div>
                                    </ng-template>
                                </li>
                                <li [ngbNavItem]="2">
                                     <a ngbNavLink class="p-1">Customize</a>
                                        <ng-template ngbNavContent>
                                            <div class="tab-pane" id="linktabs">
                                                 <div ngbAccordion [closeOthers]="true" class="accordion" id="accordionExample">
                                                    <div *ngIf="(table && chartId)" ngbAccordionItem class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                            <button ngbAccordionButton class="accordion-button p-3 fw-500 border" type="button" data-bs-toggle="collapse"
                                                                data-bs-target="#collapse" aria-expanded="true" aria-controls="collapse">
                                                                Header
                                                            </button>
                                                    
                                                        </h6>
                                                        <div ngbAccordionCollapse id="collapse" class="accordion-collapse collapse" aria-labelledby="heading"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                                <ng-template>
                                                                    <div>
                                                                        <div class="sub-menu-item  p-2">
                                                                            <div class="row">
                                                                                <div class="">
                                                                                    <div class="font-color-card">
                                                                                        <p class="mb-0">Fonts</p>
                                                                                        <div class="dropup" ngbDropdown>
                                                                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle"
                                                                                                ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                <div class="dropup" ngbDropdown>
                                                                                                    <div class="form-group mb-0 p-1">
                                                                                                        <select class="form-select form-select select2 fs-14"
                                                                                                            [(ngModel)]="headerFontFamily">
                                                                                                            <option value="'Arial', sans-serif">Arial</option>
                                                                                                            <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                            <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                            <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                            <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                            <option value="'Georgia', serif">Georgia</option>
                                                                                                            <option value="'Merriweather', serif">Merriweather</option>
                                                                                                            <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                            <option value="Algerian">Algerian</option>
                                                                                                            <option value="Bahnschrift">Bahnschrift</option>
                                                                                                            <option value="sans-serif">Sans Serif</option>
                                                                                                            <option value="Calibri">Calibri</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <div class="bold-italic p-1">
                                                                                                        <div class="row">
                                                                                                            <div class="form-group mb-0 d-flex">
                                                                                                                <select class="form-select form-select select2 fs-14"
                                                                                                                    style="width: 100px;" [(ngModel)]="headerFontSize">
                                                                                                                    <option value="10px">10px</option>
                                                                                                                    <option value="11px">11px</option>
                                                                                                                    <option value="12px">12px</option>
                                                                                                                    <option value="13px">13px</option>
                                                                                                                    <option value="14px">14px</option>
                                                                                                                    <option value="15px">15px</option>
                                                                                                                    <option value="16px">16px</option>
                                                                                                                    <option value="17px">17px</option>
                                                                                                                    <option value="18px">18px</option>
                                                                                                                    <option value="19px">19px</option>
                                                                                                                    <option value="20px">20px</option>
                                                                                                                </select>
                                                                                                                <div class="bold-text"
                                                                                                                    [ngStyle]="{'background-color': headerFontWeight === 700 ? '#2392c1': '#fafcfc'}"
                                                                                                                    (click)="isBold = !isBold;headerFontWeight = isBold ? 700 : 400 ">
                                                                                                                    <p>B</p>
                                                                                                                </div>
                                                                                                                <div class="italic-text"
                                                                                                                    [ngStyle]="{'background-color': headerFontStyle === 'italic' ? '#2392c1': '#fafcfc'}"
                                                                                                                    (click)="isItalic = !isItalic;headerFontStyle = isItalic ? 'italic' : 'normal' ">
                                                                                                                    <p>I</p>
                                                                                                                </div>
                                                                                                                <div class="underline-text"
                                                                                                                    [ngStyle]="{'background-color': headerFontDecoration === 'underline' ? '#2392c1': '#fafcfc'}"
                                                                                                                    (click)="isUnderline = !isUnderline;headerFontDecoration = isUnderline ? 'underline' : 'none' ">
                                                                                                                    <p>U</p>
                                                                                                                </div>
                                                                                                            </div>
                                                        
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="color-shade-card p-1">
                                                                                                        <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                            <div *ngFor="let colorClass of row" [class]="colorClass"
                                                                                                                (click)="headerColorChange($event)">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                        
                                                                                                </div>
                                                                                                <li *ngIf="false">
                                                                                                    <p class="more-color-text">More colors...</p>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <span ngbTooltip=""></span>
                                                                            </div>
                                                                            <div class="sub-menu-item mb-0">
                                                                                <div class="row">
                                                                                  <div class="">
                                                                                      <div class="font-color-card">
                                                                                          <p class="mb-0">Alignments</p>
                                                                                          <div class="dropup" ngbDropdown>
                                                                                              <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                              <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                  <div class="dropup" ngbDropdown >
                                                                                                      <div class=" p-1">
                                                                                                              <div class="form-group mb-0 text-center" (click)="headerFontAlignment = 'left'">
                                                                                                                <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                              </div>
                                                                                                              <div class="form-group mb-0 alignment-sides">
                                                                                                                 <div class="align-left" [ngStyle]="{'background-color': headerFontAlignment == 'left' ? '#2392c1': '#fafcfc'}" (click)="headerFontAlignment = 'left'">
                                                                                                                    <i class="fa fa-align-left"></i>
                                                                                                                </div>
                                                                                                                <div  class="align-center" [ngStyle]="{'background-color': headerFontAlignment == 'center' ? '#2392c1': '#fafcfc'}" (click)="headerFontAlignment = 'center'">
                                                                                                                    <i class="fa fa-align-center"></i>
                                                                                                                </div>
                                                                                                                <div class="align-right" [ngStyle]="{'background-color': headerFontAlignment == 'right' ? '#2392c1': '#fafcfc'}" (click)="headerFontAlignment = 'right'">
                                                                                                                    <i class="fa fa-align-right"></i>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>                                                                                    
                                                                                                  </div>
                                                                                              </ul>
                                                                                          </div>
                                                                                  </div>
                                                                                </div>
                                                                              </div>
                                                                            </div>
                                                                            <span ngbTooltip=""></span>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="(table && chartId)" ngbAccordionItem class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                            <button ngbAccordionButton class="accordion-button p-3 fw-500 border" type="button" data-bs-toggle="collapse"
                                                                data-bs-target="#collapse" aria-expanded="true" aria-controls="collapse">
                                                                Table Data
                                                            </button>
                                                    
                                                        </h6>
                                                        <div ngbAccordionCollapse id="collapse" class="accordion-collapse collapse" aria-labelledby="heading"
                                                            data-bs-parent="#accordionExample">
                                                            <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                                <ng-template>
                                                                    <div>
                                                                        <div class="sub-menu-item  p-2">
                                                                            <div class="row">
                                                                                <div class="">
                                                                                    <div class="font-color-card">
                                                                                        <p class="mb-0">Fonts</p>
                                                                                        <div class="dropup" ngbDropdown>
                                                                                            <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle"
                                                                                                ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                            <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                <div class="dropup" ngbDropdown>
                                                                                                    <div class="form-group mb-0 p-1">
                                                                                                        <select class="form-select form-select select2 fs-14"
                                                                                                            [(ngModel)]="tableDataFontFamily">
                                                                                                            <option value="'Arial', sans-serif">Arial</option>
                                                                                                            <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                            <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                            <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                            <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                            <option value="'Georgia', serif">Georgia</option>
                                                                                                            <option value="'Merriweather', serif">Merriweather</option>
                                                                                                            <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                            <option value="Algerian">Algerian</option>
                                                                                                            <option value="Bahnschrift">Bahnschrift</option>
                                                                                                            <option value="sans-serif">Sans Serif</option>
                                                                                                            <option value="Calibri">Calibri</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <div class="bold-italic p-1">
                                                                                                        <div class="row">
                                                                                                            <div class="form-group mb-0 d-flex">
                                                                                                                <select class="form-select form-select select2 fs-14"
                                                                                                                    style="width: 100px;" [(ngModel)]="tableDataFontSize">
                                                                                                                    <option value="10px">10px</option>
                                                                                                                    <option value="11px">11px</option>
                                                                                                                    <option value="12px">12px</option>
                                                                                                                    <option value="13px">13px</option>
                                                                                                                    <option value="14px">14px</option>
                                                                                                                    <option value="15px">15px</option>
                                                                                                                    <option value="16px">16px</option>
                                                                                                                    <option value="17px">17px</option>
                                                                                                                    <option value="18px">18px</option>
                                                                                                                    <option value="19px">19px</option>
                                                                                                                    <option value="20px">20px</option>
                                                                                                                </select>
                                                                                                                <div class="bold-text"
                                                                                                                    [ngStyle]="{'background-color': tableDataFontWeight === 700 ? '#2392c1': '#fafcfc'}"
                                                                                                                    (click)="isBold = !isBold;tableDataFontWeight = isBold ? 700 : 400 ">
                                                                                                                    <p>B</p>
                                                                                                                </div>
                                                                                                                <div class="italic-text"
                                                                                                                    [ngStyle]="{'background-color': tableDataFontStyle === 'italic' ? '#2392c1': '#fafcfc'}"
                                                                                                                    (click)="isItalic = !isItalic;tableDataFontStyle = isItalic ? 'italic' : 'normal' ">
                                                                                                                    <p>I</p>
                                                                                                                </div>
                                                                                                                <div class="underline-text"
                                                                                                                    [ngStyle]="{'background-color': tableDataFontDecoration === 'underline' ? '#2392c1': '#fafcfc'}"
                                                                                                                    (click)="isUnderline = !isUnderline;tableDataFontDecoration = isUnderline ? 'underline' : 'none' ">
                                                                                                                    <p>U</p>
                                                                                                                </div>
                                                                                                            </div>
                                                        
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="color-shade-card p-1">
                                                                                                        <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                            <div *ngFor="let colorClass of row" [class]="colorClass"
                                                                                                                (click)="tableDataColorChange($event)">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                        
                                                                                                </div>
                                                                                                <li *ngIf="false">
                                                                                                    <p class="more-color-text">More colors...</p>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <span ngbTooltip=""></span>
                                                                            </div>
                                                                            <div class="sub-menu-item mb-0">
                                                                                <div class="row">
                                                                                  <div class="">
                                                                                      <div class="font-color-card">
                                                                                          <p class="mb-0">Alignments</p>
                                                                                          <div class="dropup" ngbDropdown>
                                                                                              <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                              <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                                  <div class="dropup" ngbDropdown >
                                                                                                      <div class=" p-1">
                                                                                                              <div class="form-group mb-0 text-center" (click)="tableDataFontAlignment = 'left'">
                                                                                                                <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                              </div>
                                                                                                              <div class="form-group mb-0 alignment-sides">
                                                                                                                 <div class="align-left" [ngStyle]="{'background-color': tableDataFontAlignment == 'left' ? '#2392c1': '#fafcfc'}" (click)="tableDataFontAlignment = 'left'">
                                                                                                                    <i class="fa fa-align-left"></i>
                                                                                                                </div>
                                                                                                                <div  class="align-center" [ngStyle]="{'background-color': tableDataFontAlignment == 'center' ? '#2392c1': '#fafcfc'}" (click)="tableDataFontAlignment = 'center'">
                                                                                                                    <i class="fa fa-align-center"></i>
                                                                                                                </div>
                                                                                                                <div class="align-right" [ngStyle]="{'background-color': tableDataFontAlignment == 'right' ? '#2392c1': '#fafcfc'}" (click)="tableDataFontAlignment = 'right'">
                                                                                                                    <i class="fa fa-align-right"></i>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>                                                                                    
                                                                                                  </div>
                                                                                              </ul>
                                                                                          </div>
                                                                                  </div>
                                                                                </div>
                                                                              </div>
                                                                            </div>
                                                                            <span ngbTooltip=""></span>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || kpi || funnel || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                          <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                            <button
                                                              ngbAccordionButton
                                                              class="accordion-button p-3 fw-500"
                                                              type="button"
                                                              data-bs-toggle="collapse"
                                                              data-bs-target="#collapse"
                                                              aria-expanded="true"
                                                              aria-controls="collapse"
                                                              >
                                                              Dimension
                                                            </button>
                                                            
                                                          </h6>
                                                          <div
                                                            ngbAccordionCollapse
                                                            id="collapse"
                                                            class="accordion-collapse collapse" 
                                                            aria-labelledby="heading"
                                                            data-bs-parent="#accordionExample"
                                                             >
                                                            <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                              <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                  <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                              </button> -->
                                                              <ng-template>
                                                                <div >
                                                                  <div class="sub-menu-item  p-2" >
                                                                    <!-- <div class="row">
                                                                        <label class="col-md-4 form-label px-1 fs-14">Font</label>
                                                                        <div class="col-md-8">
                                                                            <div class="form-group mb-1">
                                                                                <select class="form-select form-select select2 fs-14" (change)="fontChange($event,'dimension')">
                                                                                    <option value="calibri" style="font-family: Calibri, sans-serif; font-size: 12px;">Calibri, Bold, 12px</option>
                                                                                    <option value="arial" style="font-family: Arial, sans-serif; font-size: 14px;">Arial, Bold, 14px</option>
                                                                                    <option value="times" style="font-family: Times New Roman, serif; font-size: 16px;">Times New Roman, Bold, 16px</option>
                                                                                    <option value="verdana" style="font-family: Verdana, sans-serif; font-size: 12pt;">Verdana, Bold, 12px</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div> -->
                                                                          <div class="row">
                                                                            <div class="" >
                                                                                <div class="font-color-card">
                                                                                    <p class="mb-0">Fonts</p>
                                                                                    <div class="dropup" ngbDropdown>
                                                                                        <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                        <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                            <div class="dropup" ngbDropdown >
                                                                                                <div class="form-group mb-0 p-1">
                                                                                                    <select class="form-select form-select select2 fs-14" [(ngModel)]="xLabelFontFamily" (change)="dimensionsFontFamilyChange()">
                                                                                                        <option value="'Arial', sans-serif">Arial</option>
                                                                                                        <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                        <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                        <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                        <option value="'Georgia', serif">Georgia</option>
                                                                                                        <option value="'Merriweather', serif">Merriweather</option>
                                                                                                        <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                        <option value="Algerian">Algerian</option>
                                                                                                        <option value="Bahnschrift">Bahnschrift</option>
                                                                                                        <option value="sans-serif">Sans Serif</option>
                                                                                                        <option value="Calibri">Calibri</option>
                                                                                                    </select>
                                                                                                </div>
                                                                                                <div class="bold-italic p-1">
                                                                                                    <div class="row">
                                                                                                        <div class="form-group mb-0 d-flex">
                                                                                                            <select class="form-select form-select select2 fs-14" style="width: 100px;" [(ngModel)]="xLabelFontSize" (change)="dimensionsFontSizeChange()">
                                                                                                                <option value="10">10px</option>
                                                                                                                <option value="11">11px</option>
                                                                                                                <option value="12">12px</option>
                                                                                                                <option value="13">13px</option>
                                                                                                                <option value="14">14px</option>
                                                                                                                <option value="15">15px</option>
                                                                                                                <option value="16">16px</option>
                                                                                                                <option value="17">17px</option>
                                                                                                                <option value="18">18px</option>
                                                                                                                <option value="19">19px</option>
                                                                                                                <option value="20">20px</option>
                                                                                                             </select>
                                                                                                             <div class="bold-text" [ngStyle]="{'background-color': isBold ? '#00a5a2': '#fafcfc'}" (click)="isBold = !isBold;xlabelFontWeight = isBold ? 700 : 400 ;dimensionsFontWeightChange()">
                                                                                                                <p>B</p>
                                                                                                            </div>
                                                                                                            <div *ngIf="false" class="italic-text" [ngStyle]="{'background-color': isItalic ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontStyle('I')">
                                                                                                                <p>I</p>
                                                                                                            </div>
                                                                                                            <div *ngIf="false" class="underline-text" [ngStyle]="{'background-color': isUnderline ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontStyle('U')">
                                                                                                                <p>U</p>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                       
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="color-shade-card p-1" *ngIf="isEChatrts">
                                                                                                    <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                      <div
                                                                                                        *ngFor="let colorClass of row"
                                                                                                        [class]="colorClass"
                                                                                                        (click)="dimensionsColorChange($event)">
                                                                                                      </div>
                                                                                                    </div>
                                                                                                  </div>
                                                                                              
                                                                                            </div>
                                                                                            <li *ngIf="false"> <p class="more-color-text">More colors...</p></li>
                                                                                        </ul>
                                                                                    </div>
                                                                            </div>
                                                                          </div>
                                                                          <span ngbTooltip=""></span>
                                                                        </div>
                                                                        <div *ngIf="isApexCharts" class="sub-menu-item mb-0">
                                                                            <div class="row">
                                                                              <div class="">
                                                                                  <div class="font-color-card">
                                                                                      <p class="mb-0">Alignments</p>
                                                                                      <div class="dropup" ngbDropdown>
                                                                                          <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                          <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                              <div class="dropup" ngbDropdown >
                                                                                                  <div class=" p-1">
                                                                                                          <div class="form-group mb-0 text-center" (click)="allignmentChange('center','dimension')">
                                                                                                            <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                          </div>
                                                                                                          <div class="form-group mb-0 alignment-sides">
                                                                                                             <div class="align-left" [ngStyle]="{'background-color': dimensionAlignment == 'left' ? '#2392c1': '#fafcfc'}" (click)="allignmentChange('left','dimension')">
                                                                                                                <i class="fa fa-align-left"></i>
                                                                                                            </div>
                                                                                                            <div  class="align-center" [ngStyle]="{'background-color': dimensionAlignment == 'center' ? '#2392c1': '#fafcfc'}" (click)="allignmentChange('center','dimension')">
                                                                                                                <i class="fa fa-align-center"></i>
                                                                                                            </div>
                                                                                                            <div class="align-right" [ngStyle]="{'background-color': dimensionAlignment == 'right' ? '#2392c1': '#fafcfc'}" (click)="allignmentChange('right','dimension')">
                                                                                                                <i class="fa fa-align-right"></i>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>                                                                                    
                                                                                              </div>
                                                                                          </ul>
                                                                                      </div>
                                                                              </div>
                                                                            </div>
                                                                          </div>
                                                                        </div>
                                                                    <!-- <div *ngIf="!isApexCharts" class="row">
                                                                        <label class="col-md-4 form-label px-1 fs-14">Font-Size</label>
                                                                        <div class="col-md-8">
                                                                            <div class="form-group mb-1">
                                                                                <select [(ngModel)]="xLabelFontSize" (change)="changeAlignment()" class="form-select form-select select2 fs-14">
                                                                                    <option value="9">9</option>
                                                                                    <option value="10">10</option>
                                                                                    <option value="11">11</option>
                                                                                    <option value="12">12</option>
                                                                                    <option value="14">14</option>
                                                                                    <option value="16">16</option>
                                                                                    <option value="18">18</option>
                                                                                    <option value="20">20</option>
                                                                                    <option value="22">22</option>
                                                                                    <option value="24">24</option>
                                                                                    <option value="26">26</option>
                                                                                    <option value="28">28</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div *ngIf="!isApexCharts" class="row">
                                                                        <label class="col-md-5 form-label px-1 fs-14">Font-Family</label>
                                                                        <div class="col-md-7">
                                                                            <div class="form-group mb-1">
                                                                                <select [(ngModel)]="xLabelFontFamily" (change)="changeAlignment()" class="form-select form-select select2 fs-14" >
                                                                                    <option value="Algerian">Algerian</option>
                                                                                    <option value="Arial">Arial</option>
                                                                                    <option value="Bahnschrift">Bahnschrift</option>
                                                                                    <option value="italic">Italic</option>
                                                                                    <option value="sans-serif">Sans Serif</option>
                                                                                    <option value="Calibri">Calibri</option>
                            
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div *ngIf="!isApexCharts" class="row">
                                                                        <label class="col-md-5 form-label px-1 fs-14">Font-Weight</label>
                                                                        <div class="col-md-7">
                                                                            <div class="form-group mb-1">
                                                                                <select  [(ngModel)]="xlabelFontWeight" (change)="changeAlignment()" class="form-select form-select select2 fs-14">
                                                                                    <option value="100">100</option>
                                                                                    <option value="200">200</option>
                                                                                    <option value="300">400</option>
                                                                                    <option value="400">500</option>
                                                                                    <option value="500">600</option>
                                                                                    <option value="600">700</option>
                                                                                    <option value="700">800</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div> -->
                                                                    <!-- <div class="row">
                                                                        <label class="col-md-4 form-label px-1 fs-14">Alignment</label>
                                                                        <div class="col-md-8">
                                                                            <div class="form-group mb-1">
                                                                                <select class="form-select form-select select2 fs-14"  [(ngModel)]="labelAlignment" (change)="allignmentChange($event,'dimension')">
                                                                                    <option value="center">center</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div> -->
                                                                    <span ngbTooltip=""></span>
                                                                  </div>
                                                                </div>
                                                              </ng-template>
                                                            </div>
                                                          </div>
                                                    </div>

                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || funnel || kpi || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                            <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                              <button
                                                                ngbAccordionButton
                                                                class="accordion-button p-3 fw-500 border"
                                                                type="button"
                                                                data-bs-toggle="collapse"
                                                                data-bs-target="#collapse"
                                                                aria-expanded="true"
                                                                aria-controls="collapse"
                                                                >
                                                                Measures
                                                              </button>
                                                              
                                                            </h6>
                                                            <div
                                                              ngbAccordionCollapse
                                                              id="collapse"
                                                              class="accordion-collapse collapse" 
                                                              aria-labelledby="heading"
                                                              data-bs-parent="#accordionExample"
                                                               >
                                                              <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                                <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                    <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                                </button> -->
                                                                <ng-template>
                                                                  <div >
                                                                    <div class="sub-menu-item  p-2" >
                                                                        <div class="row">
                                                                            
                                                                        </div>
                                                                      <!-- <div class="row">
                                                                          <label class="col-md-4 form-label px-1 fs-14">Font</label>
                                                                          <div class="col-md-8">
                                                                              <div class="form-group mb-1">
                                                                                 <select class="form-select form-select select2 fs-14" (change)="fontChange($event,'measures')">
                                                                                    <option value="calibri" style="font-family: Calibri, sans-serif; font-size: 12px;">Calibri, Bold, 12px</option>
                                                                                    <option value="arial" style="font-family: Arial, sans-serif; font-size: 14px;">Arial, Bold, 14px</option>
                                                                                    <option value="times" style="font-family: Times New Roman, serif; font-size: 16px;">Times New Roman, Bold, 16px</option>
                                                                                    <option value="verdana" style="font-family: Verdana, sans-serif; font-size: 12pt;">Verdana, Bold, 12px</option>
                                                                                  </select>
                                                                              </div>
                                                                          </div>
                                                                      </div> -->
                                                                      <div class="row">
                                                                        <div class="" >
                                                                            <div class="font-color-card">
                                                                                <p class="mb-0">Fonts</p>
                                                                                <div class="dropup" ngbDropdown>
                                                                                    <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                    <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                        <div class="dropup" ngbDropdown >
                                                                                            <div class="form-group mb-0 p-1">
                                                                                                <select class="form-select form-select select2 fs-14" [(ngModel)]="yLabelFontFamily" (change)="measuresFontFamilyChange()">
                                                                                                    <option value="'Arial', sans-serif">Arial</option>
                                                                                                    <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                    <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                    <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                    <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                    <option value="'Georgia', serif">Georgia</option>
                                                                                                    <option value="'Merriweather', serif">Merriweather</option>
                                                                                                    <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                    <option value="Algerian">Algerian</option>
                                                                                                    <option value="Bahnschrift">Bahnschrift</option>
                                                                                                    <option value="sans-serif">Sans Serif</option>
                                                                                                    <option value="Calibri">Calibri</option>
                                                                                                </select>
                                                                                            </div>
                                                                                            <div class="bold-italic p-1">
                                                                                                <div class="row">
                                                                                                    <div class="form-group mb-0 d-flex">
                                                                                                        <select class="form-select form-select select2 fs-14" style="width: 100px;" [(ngModel)]="yLabelFontSize" (change)="measuresFontSizeChange()">
                                                                                                            <option value="10">10px</option>
                                                                                                            <option value="11">11px</option>
                                                                                                            <option value="12">12px</option>
                                                                                                            <option value="13">13px</option>
                                                                                                            <option value="14">14px</option>
                                                                                                            <option value="15">15px</option>
                                                                                                            <option value="16">16px</option>
                                                                                                            <option value="17">17px</option>
                                                                                                            <option value="18">18px</option>
                                                                                                            <option value="19">19px</option>
                                                                                                            <option value="20">20px</option>
                                                                                                         </select>
                                                                                                         <div class="bold-text" [ngStyle]="{'background-color': isBold ? '#00a5a2': '#fafcfc'}" (click)="isBold = !isBold;ylabelFontWeight = isBold ? 700 : 400 ;measuresFontWeightChange()">
                                                                                                            <p>B</p>
                                                                                                        </div>
                                                                                                        <div *ngIf="false" class="italic-text" [ngStyle]="{'background-color': isItalic ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontStyle('I')">
                                                                                                            <p>I</p>
                                                                                                        </div>
                                                                                                        <div *ngIf="false" class="underline-text" [ngStyle]="{'background-color': isUnderline ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontStyle('U')">
                                                                                                            <p>U</p>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                   
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="color-shade-card p-1" *ngIf="isEChatrts">
                                                                                                <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                                  <div
                                                                                                    *ngFor="let colorClass of row"
                                                                                                    [class]="colorClass"
                                                                                                    (click)="measuresColorChange($event)">
                                                                                                  </div>
                                                                                                </div>
                                                                                              </div>

                                                                                        </div>
                                                                                        <li *ngIf="false"> <p class="more-color-text">More colors...</p></li>
                                                                                    </ul>
                                                                                </div>
                                                                        </div>
                                                                      </div>
                                                                      <span ngbTooltip=""></span>
                                                                    </div>
                                                                    <div *ngIf="isApexCharts" class="sub-menu-item mb-0">
                                                                        <div class="row">
                                                                          <div class="">
                                                                              <div class="font-color-card">
                                                                                  <p class="mb-0">Alignments</p>
                                                                                  <div class="dropup" ngbDropdown>
                                                                                      <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                      <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                          <div class="dropup" ngbDropdown >
                                                                                                <div class=" p-1 mt-2 mb-2">
                                                                                                    <div class="form-group mb-0 text-center" (click)="allignmentChange('center','measure')">
                                                                                                      <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                                    </div>
                                                                                                    <div class="form-group mb-0 alignment-sides">
                                                                                                       <div class="justify-bottom" [ngStyle]="{'background-color': measureAlignment == 'bottom' ? '#2392c1': '#fafcfc'}" (click)="allignmentChange('bottom','measure')">
                                                                                                          <i class="fa fa-align-justify"></i>
                                                                                                      </div>
                                                                                                      <div  class="justify-middle" [ngStyle]="{'background-color': measureAlignment == 'center' ? '#2392c1': '#fafcfc'}" (click)="allignmentChange('center','measure')">
                                                                                                          <i class="fa fa-align-justify"></i>
                                                                                                      </div>
                                                                                                      <div class="justify-top" [ngStyle]="{'background-color': measureAlignment == 'top' ? '#2392c1': '#fafcfc'}" (click)="allignmentChange('top','measure')">
                                                                                                          <i class="fa fa-align-justify"></i>
                                                                                                      </div>
                                                                                                  </div>
                                                                                              </div>                                                                                  
                                                                                          </div>
                                                                                      </ul>
                                                                                  </div>
                                                                          </div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                      <!-- @if(kpi){
                                                                        <div class="row">
                                                                          <label for="col-md-4 form-label px-1 fs-14">Decimal places and Round:</label>
                                                                          <input type="number" id="decimal-places" [(ngModel)]="KPIDecimalPlaces" (change)="formatKPINumber()" min="0">
                                                                          </div>
                                                                          <div class="row">
                                                                          <label for="display-units">Display Units:</label>
                                                                          <select id="display-units" [(ngModel)]="KPIDisplayUnits" (change)="formatKPINumber()">
                                                                            <option value="none">None</option>
                                                                            <option value="K">Thousands (K)</option>
                                                                            <option value="M">Millions (M)</option>
                                                                            <option value="B">Billions (B)</option>
                                                                            <option value="G">Billions (G)</option>
                                                                          </select>
                                                                          </div>
                                                                          <div class="row">
                                                                          <label for="prefix">Prefix:</label>
                                                                          <input type="text" id="prefix" [(ngModel)]="KPIPrefix" (input)="formatKPINumber()">
                                                                          </div>
                                                                          <div class="row">
                                                                          <label for="suffix">Suffix:</label>
                                                                          <input type="text" id="suffix" [(ngModel)]="KPISuffix" (input)="formatKPINumber()">
                               </div>
                                                                      } -->
                                                                      <!-- <div class="row">
                                                                          <label class="col-md-4 form-label px-1 fs-14">Alignment</label>
                                                                          <div class="col-md-8">
                                                                              <div class="form-group mb-1">
                                                                                 <select class="form-select form-select select2 fs-14" (change)="allignmentChange($event,'measures')">
                                                                                    <option value="center">center</option>
                                                                                    <option value="up">up</option>
                                                                                    <option value="down">down</option>
                                                                                  </select>
                                                                              </div>
                                                                          </div>
                                                                      </div> -->
                                                                      <!-- @if(!kpi){
                                                                      <div class="row">
                                                                          <label class="col-md-4 form-label px-1 fs-14">Numbers</label>
                                                                          <div class="col-md-8">
                                                                              <div class="form-group mb-1">
                                                                                <select class="form-select form-select select2 fs-14" (change)="numberPopupTrigger()">
                                                                                    <option value="1">123.456</option>
                                                                                    <option value="2">Number(custom)</option>
                                                                                </select>
                                                                              </div>
                                                                          </div>
                                                                      </div>
                                                                    }
                                                                      @if(numberPopup){
                                                                        <div class="number-formatting number-popup popup-content">
                                                                            <label for="decimal-places">Decimal places:</label>
                                                                            <input type="number" id="decimal-places" [(ngModel)]="decimalPlaces" min="0">
                                                                            
                                                                            <label for="display-units">Display Units:</label>
                                                                            <select id="display-units" [(ngModel)]="displayUnits">
                                                                              <option value="none">None</option>
                                                                              <option value="K">Thousands (K)</option>
                                                                              <option value="M">Millions (M)</option>
                                                                              <option value="B">Billions (B)</option>
                                                                              <option value="G">Billions (G)</option>
                                                                            </select>
                                                                            
                                                                            <label for="prefix">Prefix:</label>
                                                                            <input type="text" id="prefix" [(ngModel)]="prefix">
                                                                            
                                                                            <label for="suffix">Suffix:</label>
                                                                            <input type="text" id="suffix" [(ngModel)]="suffix">
                                                                            
                                                                            <div class="buttons">
                                                                                <button class="btn btn-danger" (click)="numberPopupTrigger()">Close</button>
                                                                                <button class="btn btn-primary" (click)="updateChart(heatMap?{dataLabels:{formatter: this.formatNumber.bind(this)}}:{ yaxis: {labels: {formatter: this.formatNumber.bind(this)}}}); numberPopupTrigger()">Update</button>
                                                                            </div>
                                                                          </div>
                                                                      } -->
                                                                      <span ngbTooltip=""></span>
                                                                    </div>
                                                                  </div>
                                                                </ng-template>
                                                              </div>
                                                            </div>
                                                    </div>

                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || calendar || map)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border "
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Measure Values
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="sub-menu-item  p-2 mb-0" *ngIf="!kpi">
                                                                  <div class="row">
                                                                    <div class="" >
                                                                        <div class="font-color-card">
                                                                            <p class="mb-0">Fonts</p>
                                                                            <div class="dropup" ngbDropdown>
                                                                                <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                                <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                    <div class="dropup" ngbDropdown >
                                                                                        <div class="form-group mb-0 p-1">
                                                                                            <select class="form-select form-select select2 fs-14" [(ngModel)]="dataLabelsFontFamily" (change)="setDataLabelsFontFamily($event)">
                                                                                                <option value="0" selected disabled>family</option>
                                                                                                <option value="'Arial', sans-serif">Arial</option>
                                                                                                <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                                                <option value="'Verdana', sans-serif">Verdana</option>
                                                                                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                                                <option value="'Times New Roman', serif">Times New Roman</option>
                                                                                                <option value="'Georgia', serif">Georgia</option>
                                                                                                <option value="'Merriweather', serif">Merriweather</option>
                                                                                                <option value="'Roboto', sans-serif">Roboto</option>
                                                                                                <option value="Algerian">Algerian</option>
                                                                                                <option value="Bahnschrift">Bahnschrift</option>
                                                                                                <option value="sans-serif">Sans Serif</option>
                                                                                                <option value="Calibri">Calibri</option>
                                                                                            </select>
                                                                                        </div>
                                                                                        <div class="bold-italic p-1">
                                                                                            <div class="row">
                                                                                                <div class="form-group mb-0 d-flex">
                                                                                                    <select class="form-select form-select select2 fs-14" style="width: 100px;" [(ngModel)]="dataLabelsFontSize" (change)="setDataLabelsFontSize($event)">
                                                                                                        <option value="0" selected disabled>size</option>
                                                                                                        <option value="10px">10px</option>
                                                                                                        <option value="11px">11px</option>
                                                                                                        <option value="12px">12px</option>
                                                                                                        <option value="13px">13px</option>
                                                                                                        <option value="14px">14px</option>
                                                                                                        <option value="15px">15px</option>
                                                                                                        <option value="16px">16px</option>
                                                                                                        <option value="17px">17px</option>
                                                                                                        <option value="18px">18px</option>
                                                                                                        <option value="19px">19px</option>
                                                                                                        <option value="20px">20px</option>
                                                                                                     </select>
                                                                                                     <div class="bold-text" [ngStyle]="{'background-color': isBold ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontStyle('B')">
                                                                                                        <p>B</p>
                                                                                                    </div>
                                                                                                    <div *ngIf="false" class="italic-text" [ngStyle]="{'background-color': isItalic ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontStyle('I')">
                                                                                                        <p>I</p>
                                                                                                    </div>
                                                                                                    <div *ngIf="false" class="underline-text" [ngStyle]="{'background-color': isUnderline ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontStyle('U')">
                                                                                                        <p>U</p>
                                                                                                    </div>
                                                                                                </div>
                                                                                               
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="color-shade-card p-1">
                                                                                            <div *ngFor="let row of colorPalette" class="row px-4">
                                                                                              <div
                                                                                                *ngFor="let colorClass of row"
                                                                                                [class]="colorClass"
                                                                                                (click)="dataLabelsFontColor($event)">
                                                                                              </div>
                                                                                            </div>
                                                                                          </div>

                                                                                      
                                                                                    </div>
                                                                                    <li> <p class="more-color-text">More colors...</p></li>
                                                                                </ul>
                                                                            </div>
                                                                    </div>
                                                                  </div>
                                                                  <span ngbTooltip=""></span>
                                                                </div>
                                                              </div>
                                                              <div class="sub-menu-item  p-2 mb-0" *ngIf="!(kpi || guage || calendar || map || radar || multiLine || (isApexCharts && ( barLine || heatMap)))">
                                                                <div class="row">
                                                                  <div class="">
                                                                      <div class="font-color-card">
                                                                          <p class="mb-0">Alignments</p>
                                                                          <div class="dropup" ngbDropdown>
                                                                              <i class="fe fe-chevron-down fs-18 text-body-secondary dropdown-toggle" ngbDropdownToggle data-bs-toggle="dropdown"></i>
                                                                              <ul class="dropdown-menu custom-dropdown" ngbDropdownMenu>
                                                                                  <div class="dropup" ngbDropdown >
                                                                                    <div class=" p-1" *ngIf="horizentalStocked || grouped || funnel">
                                                                                        <div class="form-group mb-0 text-center" (click)="setDataLabelsFontPosition('top')">
                                                                                          <button class="btn btn-blue-light Automatic-btn">Automatic</button>                                                                                                 
                                                                                        </div>
                                                                                        <div class="form-group mb-0 alignment-sides">
                                                                                           <div class="align-left" [ngStyle]="{'background-color': dataLabelsFontPosition == 'bottom' ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontPosition('bottom')">
                                                                                              <i class="fa fa-align-left"></i>
                                                                                          </div>
                                                                                          <div  class="align-center" [ngStyle]="{'background-color': dataLabelsFontPosition == 'center' ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontPosition('center')">
                                                                                              <i class="fa fa-align-center"></i>
                                                                                          </div>
                                                                                          <div class="align-right" [ngStyle]="{'background-color': dataLabelsFontPosition == 'top' ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontPosition('top')">
                                                                                              <i class="fa fa-align-right"></i>
                                                                                          </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class=" p-1 mt-2 mb-2" *ngIf="!(horizentalStocked || grouped || funnel)">
                                                                                        <div class="form-group mb-0 text-center" (click)="setDataLabelsFontPosition('top')">
                                                                                            <button class="btn btn-blue-light Automatic-btn">Automatic</button>
                                                                                        </div>
                                                                                        <div class="form-group mb-0 alignment-sides">
                                                                                            <div class="justify-bottom" [ngStyle]="{'background-color': dataLabelsFontPosition == 'bottom' ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontPosition('bottom')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                            <div class="justify-middle" [ngStyle]="{'background-color': dataLabelsFontPosition == 'center' ? '#2392c1': '#fafcfc'}" (click)=" setDataLabelsFontPosition('center')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                            <div class="justify-top" [ngStyle]="{'background-color': dataLabelsFontPosition == 'top' ? '#2392c1': '#fafcfc'}" (click)="setDataLabelsFontPosition('top')">
                                                                                                <i class="fa fa-align-justify"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                  </div>
                                                                              </ul>
                                                                          </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                              <!-- <div class="p-2" style="display: flex;justify-content: space-between;" *ngIf="bar || sidebyside || stocked || horizentalStocked || grouped">
                                                                <label>Position</label>
                                                                <select class="form-select form-select select2 fs-14" (change)="dataLabelsFontPosition($event)" style="width: 40%; height: 30px;">
                                                                    <option value="0" selected disabled>select</option>
                                                                    <option value="top">TOP</option>
                                                                    <option value="center">CENTER</option>
                                                                    <option value="bottom">BOTTOM</option>
                                                                </select>
                                                              </div> -->
                                                              @if(kpi){
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="col-md-4 form-label px-1 fs-14">Decimal places and Round:</label>
                                                                  <input type="number" class="form-control fs-14" id="decimal-places" style="width: auto;"[(ngModel)]="KPIDecimalPlaces" (change)="formatKPINumber()" min="0">
                                                                  </div>
                                                                  <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="display-units">Display Units:</label>
                                                                  <select id="display-units" class="form-select select2 fs-14" style="width: auto;" [(ngModel)]="KPIDisplayUnits" (change)="formatKPINumber()">
                                                                    <option value="none">None</option>
                                                                    <option value="K">Thousands (K)</option>
                                                                    <option value="M">Millions (M)</option>
                                                                    <option value="B">Billions (B)</option>
                                                                    <option value="G">Billions (G)</option>
                                                                  </select>
                                                                  </div>
                                                                  <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="prefix">Prefix:</label>
                                                                  <input type="text" class="form-control fs-14" id="prefix" style="width: auto;" [(ngModel)]="KPIPrefix" (input)="formatKPINumber()">
                                                                  </div>
                                                                  <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-2">
                                                                  <label for="suffix">Suffix:</label>
                                                                  <input type="text" class="form-control fs-14" id="suffix" style="width: auto;" [(ngModel)]="KPISuffix" (input)="formatKPINumber()">
                                                                </div>
                                                              }
                                                                <div *ngIf="!(kpi || guage)" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                                    <label>Numbers</label>
                                                                    <div class="btn-group my-2" ngbDropdown>
                                                                        <button type="button" ngbDropdownToggle class="btn btn-primary-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                                            123.456 &nbsp;<i class="fa fa-chevron-down"></i>
                                                                        </button>
                                                                        <ul class="dropdown-menu" ngbDropdownMenu>
                                                                            <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="numberPopupTrigger()">Number(custom)</a></li>
                                                                        </ul>
                                                                    </div>
                                                                    <!-- <div class="col-md-8">
                                                                        <div class="form-group mb-1">
                                                                          <select class="form-select form-select select2 fs-14" (onChange)="numberPopupTrigger()">
                                                                              <option selected disabled value="1">123.456</option>
                                                                              <option value="2">Number(custom)</option>
                                                                          </select>
                                                                        </div>
                                                                    </div> -->
                                                                </div>
                                                              
                                                                @if(numberPopup){
                                                                  <div class="number-formatting number-popup popup-content">
                                                                      <label for="decimal-places">Decimal places:</label>
                                                                      <input type="number" id="decimal-places" [(ngModel)]="decimalPlaces" min="0">
                                                                      
                                                                      <label for="display-units">Display Units:</label>
                                                                      <select id="display-units" [(ngModel)]="displayUnits">
                                                                        <option value="none">None</option>
                                                                        <option value="K">Thousands (K)</option>
                                                                        <option value="M">Millions (M)</option>
                                                                        <option value="B">Billions (B)</option>
                                                                        <option value="G">Billions (G)</option>
                                                                      </select>
                                                                      
                                                                      <label for="prefix">Prefix:</label>
                                                                      <input type="text" id="prefix" [(ngModel)]="prefix">
                                                                      
                                                                      <label for="suffix">Suffix:</label>
                                                                      <input type="text" id="suffix" [(ngModel)]="suffix">
                                                                      
                                                                      <div class="buttons">
                                                                          <button class="btn btn-danger" (click)="numberPopupTrigger()">Close</button>
                                                                          <button class="btn btn-primary" (click)="updateNumberFormat(); numberPopupTrigger()">Update</button>
                                                                      </div>
                                                                    </div>
                                                                }
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                  </div>

                                                    <div *ngIf="(table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0)" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Banding </p>
                                                        </div>
                                                        <div *ngIf="bandingSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('banding')">
                                                            <span></span>
                                                        </div>
                                                        <div *ngIf="!bandingSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('banding')">
                                                            <span></span>
                                                        </div>
                                                    </div>
                                                    <!-- <div *ngIf="(table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0) && bandingSwitch" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Banding color </p>
                                                        </div>
                                                        <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="color1"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                         <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="color2"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <div *ngIf="(table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0)" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                        <div  style="font-size: 15px;">
                                                            <label>Page Length</label>
                                                            <select  [(ngModel)]="itemsPerPage" (ngModelChange)="tableDisplayPagination()" class="form-control cursor">
                                                                <option  [ngValue]="''" disabled> select page length</option>
                                                                  <option  [ngValue]="10"> 10</option>
                                                                  <option  value="50"> 50</option>
                                                                  <option  value="100"> 100</option>
                                                                  <option  value="500"> 500</option>
                                                                  <option  value="1000"> 1000</option>
                                                            </select>
                                                         </div>
                                                    </div>
                                                    <div *ngIf="!isApexCharts && isEChatrts && !(pie || donut || funnel || calendar || radar || kpi || table)" class="d-flex align-items-center justify-content-between  mb-1 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Zoom </p>
                                                        </div>
                                                        <div *ngIf="isZoom" class="toggle toggle-sm on mb-0" (click)="enableZoom()">
                                                            <span></span>
                                                        </div>
                                                        <div *ngIf="!isZoom" class="toggle toggle-sm off mb-0" (click)="enableZoom()">
                                                            <span></span>
                                                        </div>
                                                    </div>
                                                    <!-- <div *ngIf="!isApexCharts && !calendar" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >background Color </p>
                                                        </div>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="backgroundColor"  (ngModelChange)="marksColor($event,6)"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div>   -->
                                                    <!-- <div *ngIf="!isApexCharts && xLabelSwitch && !(pie || donut || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >X-label Color </p>
                                                        </div>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="xLabelColor"  (ngModelChange)="marksColor($event,5)"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <!-- <div *ngIf="!isApexCharts && xGridSwitch && !(pie || donut || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >X-Grid Line Color </p>
                                                        </div>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="xGridColor"  (ngModelChange)="marksColor($event,1)"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <!-- <div *ngIf="!isApexCharts && yLabelSwitch && !(pie || donut || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Y-label Color </p>
                                                        </div>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="yLabelColor"  (ngModelChange)="marksColor($event,2)"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <!-- <div *ngIf="!isApexCharts && yGridSwitch && !(pie || donut || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Y-Grid Line Color </p>
                                                        </div>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="yGridColor"  (ngModelChange)="marksColor($event,3)"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || kpi || funnel || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            X-Axis
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >X-label </p>
                                                                    </div>
                                                                    <div *ngIf="xLabelSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('xlabel')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!xLabelSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('xlabel')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>

                                                                <div *ngIf="!heatMap" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Grid Line </p>
                                                                    </div>
                                                                    <div *ngIf="xGridSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('xgrid')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!xGridSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('xgrid')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
                                                           
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="!((table && chartId) || (pie && chartId) || donut || kpi || funnel || guage || calendar || radar)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Y-Axis
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Y-label </p>
                                                                    </div>
                                                                    <div *ngIf="yLabelSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('ylabel')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!yLabelSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('ylabel')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
 
                                                                <div *ngIf="!heatMap" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Grid Line </p>
                                                                    </div>
                                                                    <div *ngIf="yGridSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('ygrid')">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!yGridSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('ygrid')">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
     
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="((kpi || guage) && draggedRows.length === 1) || !((table && !bandingSwitch) || guage || calendar || map || draggedColumns.length === 0 || draggedRows.length ===0)" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Color Palettes
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <ng-template>
                                                                <div *ngIf="!((table && chartId) || kpi || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p>Background</p>
                                                                    </div>
                                                                    <div *ngIf="backgroundColorSwitch" class="toggle toggle-sm on mb-0" (click)="backgroundColorSwitch = !backgroundColorSwitch; resetBackgroundColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!backgroundColorSwitch" class="toggle toggle-sm off mb-0" (click)="backgroundColorSwitch = !backgroundColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="backgroundColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="backgroundColor"  (ngModelChange)="setBackgroundColor(backgroundColor)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>

                                                                <div *ngIf="!((table && chartId) || (pie && chartId)||donut||kpi||barLine||sidebyside||stocked||horizentalStocked||grouped||multiLine||heatMap||funnel || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p>Chart</p>
                                                                    </div>
                                                                    <div *ngIf="chartColorSwitch" class="toggle toggle-sm on mb-0" (click)="chartColorSwitch = !chartColorSwitch; resetChartColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!chartColorSwitch" class="toggle toggle-sm off mb-0" (click)="chartColorSwitch = !chartColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="chartColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="color" 
                                                                    (ngModelChange)="marksColor2($event)"
                                                                    [format]="'hex'"></ngx-colors>
                                                                </div>

                                                                <div *ngIf="barLine" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >bar</p>
                                                                    </div>
                                                                    <div *ngIf="barColorSwitch" class="toggle toggle-sm on mb-0" (click)="barColorSwitch = !barColorSwitch; resetChartColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!barColorSwitch" class="toggle toggle-sm off mb-0" (click)="barColorSwitch = !barColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="barColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="barColor" 
                                                                    (ngModelChange)="marksColor2($event)" 
                                                                    [format]="'hex'">
                                                                    </ngx-colors>
                                                                </div>
                                                                <div *ngIf="barLine" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >line</p>
                                                                    </div>
                                                                    <div *ngIf="lineColorSwitch" class="toggle toggle-sm on mb-0" (click)="lineColorSwitch = !lineColorSwitch; resetChartColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!lineColorSwitch" class="toggle toggle-sm off mb-0" (click)="lineColorSwitch = !lineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="lineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="lineColor" 
                                                                    (ngModelChange)="marksColor2($event)" 
                                                                    [format]="'hex'">
                                                                    </ngx-colors>
                                                                </div>
                                                                <div *ngIf="isApexCharts && (xGridSwitch || yGridSwitch) && !((table && chartId) || (pie && chartId) || donut || kpi || funnel || heatMap || guage)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Grid Line</p>
                                                                    </div>
                                                                    <div *ngIf="gridLineColorSwitch" class="toggle toggle-sm on mb-0" (click)="gridLineColorSwitch = !gridLineColorSwitch; resetGridColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!gridLineColorSwitch" class="toggle toggle-sm off mb-0" (click)="gridLineColorSwitch = !gridLineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="gridLineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="GridColor"  (ngModelChange)="gridLineColor($event)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>

                                                                <!-- <div *ngIf="!isApexCharts && xLabelSwitch && !(pie || donut || calendar || kpi)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >X-label Color </p>
                                                                    </div>
                                                                    <div *ngIf="xLabelColorSwitch" class="toggle toggle-sm on mb-0" (click)="xLabelColorSwitch = !xLabelColorSwitch; resetColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!xLabelColorSwitch" class="toggle toggle-sm off mb-0" (click)="xLabelColorSwitch = !xLabelColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="xLabelColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="xLabelColor"  (ngModelChange)="marksColor($event,5)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>  
                                                                <div *ngIf="!isApexCharts && xGridSwitch && !(pie || donut || calendar || kpi || radar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                </div>   -->
                                                                <div *ngIf="!isApexCharts && xGridSwitch && !(pie || donut || calendar || kpi)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >X-Grid Line Color </p>
                                                                    </div>
                                                                    <div *ngIf="xGridLineColorSwitch" class="toggle toggle-sm on mb-0" (click)="xGridLineColorSwitch = !xGridLineColorSwitch; resetEchartXGridColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!xGridLineColorSwitch" class="toggle toggle-sm off mb-0" (click)="xGridLineColorSwitch = !xGridLineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="xGridLineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="xGridColor"  (ngModelChange)="marksColor($event,1)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                                <!-- <div *ngIf="!isApexCharts && yLabelSwitch && !(pie || donut || calendar || kpi)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Y-label Color </p>
                                                                    </div>
                                                                    <div *ngIf="yLabelColorSwitch" class="toggle toggle-sm on mb-0" (click)="yLabelColorSwitch = !yLabelColorSwitch; resetColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!yLabelColorSwitch" class="toggle toggle-sm off mb-0" (click)="yLabelColorSwitch = !yLabelColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="yLabelColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="yLabelColor"  (ngModelChange)="marksColor($event,2)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div> -->
                                                                <div *ngIf="!isApexCharts && yGridSwitch && !(pie || donut || calendar || kpi || radar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Y-Grid Line Color </p>
                                                                    </div>
                                                                    <div *ngIf="yGridLineColorSwitch" class="toggle toggle-sm on mb-0" (click)="yGridLineColorSwitch = !yGridLineColorSwitch; resetEchartYGridColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!yGridLineColorSwitch" class="toggle toggle-sm off mb-0" (click)="yGridLineColorSwitch = !yGridLineColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="yGridLineColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="yGridColor"  (ngModelChange)="marksColor($event,3)"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                                <div *ngIf="(table && chartId) && (draggedColumns.length !== 0 || draggedRows.length !==0) && bandingSwitch" class="d-flex align-items-center justify-content-between mb-1 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Banding color </p>
                                                                    </div>
                                                                    <div *ngIf="bandingColorSwitch" class="toggle toggle-sm on mb-0" (click)="bandingColorSwitch = !bandingColorSwitch; resetBandingColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!bandingColorSwitch" class="toggle toggle-sm off mb-0" (click)="bandingColorSwitch = !bandingColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="bandingColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="color1"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                     <ngx-colors *ngIf="bandingColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="color2"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                                <div *ngIf="kpi" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <label for="color">Color</label>
                                                                    <div *ngIf="kpiColorSwitch" class="toggle toggle-sm on mb-0" (click)="kpiColorSwitch = !kpiColorSwitch; resetKpiColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!kpiColorSwitch" class="toggle toggle-sm off mb-0" (click)="kpiColorSwitch = !kpiColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="kpiColorSwitch"
                                                                    ngx-colors-trigger 
                                                                    [(ngModel)]="kpiColor"
                                                                    [format] = "'hex'"
                                                                     ></ngx-colors>
                                                                </div>
                                                                <div *ngIf="!isDistributed && funnel" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <label>color</label>
                                                                    <div *ngIf="funnelColorSwitch" class="toggle toggle-sm on mb-0" (click)="funnelColorSwitch = !funnelColorSwitch; resetChartColor()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!funnelColorSwitch" class="toggle toggle-sm off mb-0" (click)="funnelColorSwitch = !funnelColorSwitch;">
                                                                        <span></span>
                                                                    </div>
                                                                    <ngx-colors *ngIf="funnelColorSwitch" [(ngModel)]="color" ngx-colors-trigger [format]="'hex'" (ngModelChange)="marksColor2($event)">
                                                                    </ngx-colors>
                                                                </div>
     
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>

                                                    <div *ngIf="((pie && chartId) || donut || radar)">
                                                        <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class=""> 
                                                                <p >Legends </p>
                                                            </div>
                                                            <div *ngIf="legendSwitch" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('legend')">
                                                                <span></span>
                                                            </div>
                                                            <div *ngIf="!legendSwitch" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('legend')">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="legendSwitch" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class="">Allignment</div>
                                                            <div class="btn-group my-2" ngbDropdown>
                                                                <button type="button" ngbDropdownToggle class="btn btn-primary-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                                    {{legendsAllignment}}
                                                                </button>
                                                                <ul class="dropdown-menu" ngbDropdownMenu>
                                                                    <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('top')">Top</a></li>
                                                                    <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('bottom')">Bottom</a></li>
                                                                    <li><a  ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('left')">Left</a></li>
                                                                    <li><a ngbDropdownItem class="dropdown-item" ngbDropdownItem (click)="changeLegendsAllignment('right')">Right</a></li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class=""> 
                                                                <p >Data Labels </p>
                                                            </div>
                                                            <div *ngIf="dataLabels" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('dataLabels')">
                                                                <span></span>
                                                            </div>
                                                            <div *ngIf="!dataLabels" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('dataLabels')">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="donut && !isEChatrts" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div class="" > 
                                                                <p >Label </p>
                                                            </div>
                                                            <div *ngIf="label" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('label')">
                                                                <span></span>
                                                            </div>
                                                            <div *ngIf="!label" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('label')">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="donut" sclass="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div style="display: flex;justify-content: space-between;">
                                                                <label>Donut Size</label>
                                                                <input type="number" [(ngModel)]="donutSize" min="1" max="100" step="5" (ngModelChange)="changeSize()">
                                                            </div>
                                                        </div>
                                                        <div *ngIf="donut && label && !isEChatrts" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                            <div style="display: flex;justify-content: space-between;">
                                                                <label for="decimalInput">Decimal Places: </label>
                                                            <input style="height: 30px;" type="number" id="decimalInput" [(ngModel)]="donutDecimalPlaces" (input)="updateDonut()" min="0" />
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- <div *ngIf="isApexCharts && (xGridSwitch || yGridSwitch) && !((table && chartId) || (pie && chartId) || donut || kpi || funnel || heatMap || guage)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Grid Line Color </p>
                                                        </div>
                                                        <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="GridColor"  (change)="gridLineColor($event)"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <!-- <div *ngIf="isApexCharts  && !((table && chartId) || kpi || guage)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Background Color </p>
                                                        </div>
                                                        <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="apexbBgColor"  (change)="apexbBackgroundColor($event)"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <div *ngIf="kpi" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <label for="font-size" step="1" >Font Size</label>
                                                        <input type="number" [(ngModel)]="kpiFontSize" style="width: 30%;">
                                                        <!-- <ngx-slider [(ngModel)]="kpiFontSize" [options]="sliderOptions"></ngx-slider> -->
                                                    </div>
                                                    <!-- <div *ngIf="kpi" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <label for="color">Color:</label>
                                                        <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="kpiColor"
                                                        [format] = "'hex'"
                                                         ></ngx-colors>
                                                    </div> -->
                                                    <!-- <div *ngIf="!((table && chartId) || (pie && chartId)||donut||kpi||barlineChart||sidebyside||stocked||horizentalStocked||grouped||multiLine||heatMap||funnel || guage || calendar)" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >Chart Color </p>
                                                        </div>
                                                        <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="color" 
                                                        (ngModelChange)="marksColor2($event)"
                                                        [format]="'hex'"></ngx-colors>
                                                    </div> -->
                                                    <!-- <div *ngIf="barlineChart" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >bar color </p>
                                                        </div>
                                                        <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="barColor" 
                                                        (ngModelChange)="marksColor2($event)" 
                                                        [format]="'hex'">
                                                        </ngx-colors>
                                                    </div> -->
                                                    <!-- <div *ngIf="barlineChart" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div class=""> 
                                                            <p >line color </p>
                                                        </div>
                                                        <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                        <ngx-colors 
                                                        ngx-colors-trigger 
                                                        [(ngModel)]="lineColor" 
                                                        (ngModelChange)="marksColor2($event)" 
                                                        [format]="'hex'">
                                                        </ngx-colors>
                                                    </div> -->
                                                    <div *ngIf="funnel && isApexCharts">
                                                        <div style="display: flex; justify-content: space-between;">
                                                            <label for="sorting">Sort by:</label>
                                                            <select id="sorting" (change)="sortSeries($event)">
                                                                <option value="0" selected disabled>select</option>
                                                                <option value="ascending">Ascending</option>
                                                                <option value="descending">Descending</option>
                                                            </select>
                                                        </div>
                                                        <div *ngIf="isApexCharts" style="display: flex; justify-content: space-between;">
                                                            <label>Distribution</label>
                                                            <div *ngIf="isDistributed" class="toggle toggle-sm on mb-0" (click)="toggleSwitch('distributed')">
                                                                <span></span>
                                                            </div>
                                                            <div *ngIf="!isDistributed" class="toggle toggle-sm off mb-0" (click)="toggleSwitch('distributed')">
                                                                <span></span>
                                                            </div>
                                                        </div>
                                                        <!-- <div style="display: flex;justify-content: space-between;">
                                                            <label>Font</label>
                                                            <select [(ngModel)]="funnelDLFontFamily" style="width: 30%;" (change)="funnelFontChange($event,'family')">
                                                                <option value="0" selected disabled>family</option>
                                                                <option value="'Arial', sans-serif">Arial</option>
                                                                <option value="'Helvetica', sans-serif">Helvetica</option>
                                                                <option value="'Verdana', sans-serif">Verdana</option>
                                                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                                                <option value="'Times New Roman', serif">Times New Roman</option>
                                                                <option value="'Georgia', serif">Georgia</option>
                                                                <option value="'Merriweather', serif">Merriweather</option>
                                                                <option value="'Roboto', sans-serif">Roboto</option>
                                                            </select>
                                                            <select [(ngModel)]="funnelDLFontSize" (change)="funnelFontChange($event,'size')" style="width: 30%;">
                                                                <option value="0" selected disabled>size</option>
                                                                <option value="10px">10px</option>
                                                                <option value="12px">12px</option>
                                                                <option value="14px">14px</option>
                                                                <option value="16px">16px</option>
                                                                <option value="18px">18px</option>
                                                                <option value="20px">20px</option>
                                                            </select>
                                                            <select [(ngModel)]="funnelDLAllign" (change)="funnelFontChange($event,'allign')">
                                                                <option value="0" selected disabled>allign</option>
                                                                <option value="top">Right</option>
                                                                <option value="center">center</option>
                                                                <option value="bottom">Left</option>
                                                            </select>
                                                        </div> -->
                                                        <!-- <div style="display: flex;justify-content: space-between;" *ngIf="!isDistributed">
                                                            <label>color</label>
                                                            <button  class="btn btn-primary update-btn" (click)="resetColor()">Reset</button>
                                                            <ngx-colors [(ngModel)]="funnelColor" ngx-colors-trigger [format]="'hex'" (change)="funnelColorChange($event)">
                                                            </ngx-colors>
                                                        </div> -->
                                                    </div>
                                                    <div *ngIf="(isApexCharts && ((pie && chartId) || donut || bar))  && draggedColumns && draggedColumns.length == 1 && dateList.includes(draggedColumns[0]['data_type'])" ngbAccordionItem  class="accordion-item mb-2">
                                                        <h6 ngbAccordionHeader class="accordion-header" id="heading">
                                                          <button
                                                            ngbAccordionButton
                                                            class="accordion-button p-3 fw-500 border"
                                                            type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#collapse"
                                                            aria-expanded="true"
                                                            aria-controls="collapse"
                                                            >
                                                            Drilldown
                                                          </button>
                                                          
                                                        </h6>
                                                        <div
                                                          ngbAccordionCollapse
                                                          id="collapse"
                                                          class="accordion-collapse collapse" 
                                                          aria-labelledby="heading"
                                                          data-bs-parent="#accordionExample"
                                                           >
                                                          <div class="accordion-body p-0  database-dropdown" ngbAccordionBody style="    height: auto;max-height: 350px;">
                                                            <!-- <button type="button" data-bs-dismiss="alert" aria-label="Close" class="btn-close mt-0">
                                                                <i class="bi bi-arrows-fullscreen drilldown-icon"></i>
                                                            </button> -->
                                                            <ng-template>
                                                                <div class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                                    <div class=""> 
                                                                        <p >Date Field </p>
                                                                    </div>
                                                                    <div *ngIf="dateDrillDownSwitch" class="toggle toggle-sm on mb-0" (click)="toggleDateSwitch()">
                                                                        <span></span>
                                                                    </div>
                                                                    <div *ngIf="!dateDrillDownSwitch" class="toggle toggle-sm off mb-0" (click)="toggleDateSwitch()">
                                                                        <span></span>
                                                                    </div>
                                                                </div>
                                                                <div cdkDropList cdkDropListOrientation="horizontal" class="example-list" 
                                                                style="position: relative;min-height: 33px; padding: 2px;" 
                                                                #drilldownList="cdkDropList" 
                                                                [cdkDropListData]="draggedDrillDownColumns" 
                                                                (cdkDropListDropped)="drillDownColumndrop($event)">
                                                                    @for(columns of draggedDrillDownColumns;track columns;let index = $index){
                                                                    <div class="example-box border-end" (cdkDragStarted)="dragStartedColumn(index,columns.column)" cdkDrag >
                                                                       
                                                                        {{ columns.column }}
                                                                     <!--  <input type="text" class="form-control example-box border-end" [(ngModel)]="columns.column" value="" (click)="rename(index,columns.column,$event)" (keydown)="renameColumn(index,columns.column,$event)" >-->
                                
                                                                        
                                                                    </div>
                                                                    }
                                                                </div>                                                            
                                                            </ng-template>
                                                          </div>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="guage" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <div>
                                                            <label for="minValue">Enter Minimum Value:</label>
                                                            <input type="number" class="form-control fs-14" [(ngModel)]="minValueGuage" id="minValue" (change)="customMinMaxGuage()" />
                                                          
                                                            <label for="maxValue">Enter Maximum Value:</label>
                                                            <input type="number" class="form-control fs-14" [(ngModel)]="maxValueGuage" id="maxValue" (change)="customMinMaxGuage()" />
                                                        </div>
                                                    </div>
                                                    <div *ngIf="bar" class="d-flex align-items-center justify-content-between mb-0 flex-wrap gap-2 p-3">
                                                        <label for="sorting">Sort by:</label>
                                                        <select id="sorting" (change)="sortSeries($event)">
                                                            <option value="0" selected disabled>select</option>
                                                            <option value="ascending">Ascending</option>
                                                            <option value="descending">Descending</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>
                                </li>

                                <li [ngbNavItem]="3">
                                    <a ngbNavLink class="p-1" (click)="getChartSuggestions()">
                                        <button class="copilot-button">
                                            <img src="./assets/images/copilot.gif" alt="Copilot" class="copilot-icon" />
                                        </button>
                                    </a>
                                    <ng-template ngbNavContent>
                                        <div class="tab-pane" id="linktabs">
                                            <div class="copilot-container p-2">
                                                <h6 style="text-align: center;font-weight:900;background-image: linear-gradient(to right, #ff69b4, #00bfff); background-size: 100% 1px; background-position: 0% 100%; color: #fff; padding: 5px;">Genie AIQ</h6>
                                                <div *ngIf="chartSuggestions && chartSuggestions.length > 0" class="chart-suggestions mt-3">
                                                    <button *ngFor="let chart of chartSuggestions" type="button"
                                                        class="btn ripple btn-primary inp-btn d-flex align-items-center"
                                                        (click)="fetchChartData(chart)"
                                                        matTooltip="{{ chart.description }}" matTooltipPosition="above">
                                                        <span class="avatar avatar rounded-circle-copilot mr-2 me-2">
                                                            <img *ngIf="chart.chart_id === 1"
                                                                src="./assets/images/Tiled view sheet icons/table-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 6"
                                                                src="./assets/images/Tiled view sheet icons/bar-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 17"
                                                                src="./assets/images/Tiled view sheet icons/area-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 13"
                                                                src="./assets/images/Tiled view sheet icons/line-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 24"
                                                                src="./assets/images/Tiled view sheet icons/pie-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 7"
                                                                src="./assets/images/Tiled view sheet icons/sideBar-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 5"
                                                                src="./assets/images/Tiled view sheet icons/Stacked-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 4"
                                                                src="./assets/images/Tiled view sheet icons/BarLine-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 2"
                                                                src="./assets/images/Tiled view sheet icons/Hstacked-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 3"
                                                                src="./assets/images/Tiled view sheet icons/HGrouped-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 8"
                                                                src="./assets/images/Tiled view sheet icons/multiline-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                            <img *ngIf="chart.chart_id === 10"
                                                                src="./assets/images/Tiled view sheet icons/donut-tiled-icon.jpg" alt=""
                                                                class="rounded-circle-copilot">
                                                        </span>
                                                        <span>{{ chart.chart_title }}</span>
                                                    </button>
                                                </div>
                                                <div class="error-mgs" *ngIf="!chartSuggestions || chartSuggestions.length === 0">
                                                    <a *ngIf="!qrySetId" (click)="goToConnections()" style="cursor: pointer;"><span
                                                        class="add-txt text-info">Connect to DataSource</span></a>
                                                    <p *ngIf="errorMessage" [innerHTML]="errorMessage">{{ errorMessage }}</p>
                                                    <p *ngIf="errorMessage1">{{ errorMessage1 }} <a style="cursor: pointer;color: #05aff8;" (click)="routeConfigure()">Add GPT API KEY</a>to proceed.</p>
                                                </div>
                                                <div class="input-group mt-3 inp">
                                                    <input type="text" class="form-control" [(ngModel)]="userPrompt" placeholder="Enter your prompt">
                                                    <div class="input-group-append">
                                                        <!-- <button (click)="startVoiceRecognition()" style="height: 33px; width:33px"> <img
                                                                src="./assets/images/microphone.svg" alt="Micro Phone" /> </button>
                                                        <button class="btn btn-primary inp-send" (click)="sendPrompt()">></button> -->
                                                        <button type="button" class="btn  btn-icon btn-primary-light rounded-pill" (click)="startVoiceRecognition()">
                                                            <i class="fe fe-mic"></i>
                                                        </button>
                                                        <button type="button" class="btn btn-icon btn-primary brround" (click)="sendPrompt()">
                                                                <i class="fa fa-paper-plane-o"></i>
                                                            </button>
                                                    </div>
                                                    <p></p>
                                                    <p style="font-size: 0.6rem;">The art of chart suggestion: not magic, but data-driven</p>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-template>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="panel-body tabs-menu-body p-1 panel-body-h" >
                        <div class="tab-content">
                            <div [ngbNavOutlet]="nav"></div>

                        </div>
                    </div>
                </div>
            </div>
           
        </div>
        <ng-template #viewQueryModal let-modal>
            <div id="largemodal" tabindex="-1" role="dialog">
                <div class=" modal-lg " role="document">
                <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title">Query</h6>
            </div>
            <div class="modal-body viewQuery-hgt">
                
                <div class="form-group select2-sm">
                   <p>{{tablePaginationCustomQuery}}</p>
                </div>
            </div>
            <div class="modal-footer">
                            
                <button type="button" class="btn ripple btn-secondary" (click)="modal.close('Save click')">
                    close
                </button>
                <button type="button" class="btn ripple btn-primary" (click)="copyQuery(); modal.close('Save click')">Copy <i class="fa fa-copy"></i></button>
            </div>
            </div>
        </div>
        </div>
        </ng-template>
    </div>